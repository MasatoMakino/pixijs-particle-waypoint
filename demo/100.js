"use strict";(self.webpackChunk_masatomakino_pixijs_particle_waypoint=self.webpackChunk_masatomakino_pixijs_particle_waypoint||[]).push([[100],{9054:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   e: () => (/* binding */ textureBitGl),\n/* harmony export */   r: () => (/* binding */ textureBit)\n/* harmony export */ });\n\nconst textureBit = {\n  name: "texture-bit",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n\n        struct TextureUniforms {\n            uTextureMatrix:mat3x3<f32>,\n        }\n\n        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            @group(2) @binding(0) var uTexture: texture_2d<f32>;\n            @group(2) @binding(1) var uSampler: sampler;\n\n         \n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            outColor = textureSample(uTexture, uSampler, vUV);\n        `\n    )\n  }\n};\nconst textureBitGl = {\n  name: "texture-bit",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            uniform mat3 uTextureMatrix;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* glsl */\n      `\n        uniform sampler2D uTexture;\n\n         \n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            outColor = texture(uTexture, vUV);\n        `\n    )\n  }\n};\n\n\n//# sourceMappingURL=textureBit.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTA1NC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRW9DO0FBQ3BDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL2hpZ2gtc2hhZGVyL3NoYWRlci1iaXRzL3RleHR1cmVCaXQubWpzPzNkYjciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCB0ZXh0dXJlQml0ID0ge1xuICBuYW1lOiBcInRleHR1cmUtYml0XCIsXG4gIHZlcnRleDoge1xuICAgIGhlYWRlcjogKFxuICAgICAgLyogd2dzbCAqL1xuICAgICAgYFxuXG4gICAgICAgIHN0cnVjdCBUZXh0dXJlVW5pZm9ybXMge1xuICAgICAgICAgICAgdVRleHR1cmVNYXRyaXg6bWF0M3gzPGYzMj4sXG4gICAgICAgIH1cblxuICAgICAgICBAZ3JvdXAoMikgQGJpbmRpbmcoMikgdmFyPHVuaWZvcm0+IHRleHR1cmVVbmlmb3JtcyA6IFRleHR1cmVVbmlmb3JtcztcbiAgICAgICAgYFxuICAgICksXG4gICAgbWFpbjogKFxuICAgICAgLyogd2dzbCAqL1xuICAgICAgYFxuICAgICAgICAgICAgdXYgPSAodGV4dHVyZVVuaWZvcm1zLnVUZXh0dXJlTWF0cml4ICogdmVjMyh1diwgMS4wKSkueHk7XG4gICAgICAgIGBcbiAgICApXG4gIH0sXG4gIGZyYWdtZW50OiB7XG4gICAgaGVhZGVyOiAoXG4gICAgICAvKiB3Z3NsICovXG4gICAgICBgXG4gICAgICAgICAgICBAZ3JvdXAoMikgQGJpbmRpbmcoMCkgdmFyIHVUZXh0dXJlOiB0ZXh0dXJlXzJkPGYzMj47XG4gICAgICAgICAgICBAZ3JvdXAoMikgQGJpbmRpbmcoMSkgdmFyIHVTYW1wbGVyOiBzYW1wbGVyO1xuXG4gICAgICAgICBcbiAgICAgICAgYFxuICAgICksXG4gICAgbWFpbjogKFxuICAgICAgLyogd2dzbCAqL1xuICAgICAgYFxuICAgICAgICAgICAgb3V0Q29sb3IgPSB0ZXh0dXJlU2FtcGxlKHVUZXh0dXJlLCB1U2FtcGxlciwgdlVWKTtcbiAgICAgICAgYFxuICAgIClcbiAgfVxufTtcbmNvbnN0IHRleHR1cmVCaXRHbCA9IHtcbiAgbmFtZTogXCJ0ZXh0dXJlLWJpdFwiLFxuICB2ZXJ0ZXg6IHtcbiAgICBoZWFkZXI6IChcbiAgICAgIC8qIGdsc2wgKi9cbiAgICAgIGBcbiAgICAgICAgICAgIHVuaWZvcm0gbWF0MyB1VGV4dHVyZU1hdHJpeDtcbiAgICAgICAgYFxuICAgICksXG4gICAgbWFpbjogKFxuICAgICAgLyogZ2xzbCAqL1xuICAgICAgYFxuICAgICAgICAgICAgdXYgPSAodVRleHR1cmVNYXRyaXggKiB2ZWMzKHV2LCAxLjApKS54eTtcbiAgICAgICAgYFxuICAgIClcbiAgfSxcbiAgZnJhZ21lbnQ6IHtcbiAgICBoZWFkZXI6IChcbiAgICAgIC8qIGdsc2wgKi9cbiAgICAgIGBcbiAgICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XG5cbiAgICAgICAgIFxuICAgICAgICBgXG4gICAgKSxcbiAgICBtYWluOiAoXG4gICAgICAvKiBnbHNsICovXG4gICAgICBgXG4gICAgICAgICAgICBvdXRDb2xvciA9IHRleHR1cmUodVRleHR1cmUsIHZVVik7XG4gICAgICAgIGBcbiAgICApXG4gIH1cbn07XG5cbmV4cG9ydCB7IHRleHR1cmVCaXQsIHRleHR1cmVCaXRHbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGV4dHVyZUJpdC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9054\n')},6546:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   B: () => (/* binding */ ensureAttributes)\n/* harmony export */ });\n/* harmony import */ var _utils_logging_warn_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4796);\n/* harmony import */ var _shared_geometry_utils_getAttributeInfoFromFormat_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9824);\n\n\n\n"use strict";\nfunction ensureAttributes(geometry, extractedData) {\n  for (const i in geometry.attributes) {\n    const attribute = geometry.attributes[i];\n    const attributeData = extractedData[i];\n    if (attributeData) {\n      attribute.location ?? (attribute.location = attributeData.location);\n      attribute.format ?? (attribute.format = attributeData.format);\n      attribute.offset ?? (attribute.offset = attributeData.offset);\n      attribute.instance ?? (attribute.instance = attributeData.instance);\n    } else {\n      (0,_utils_logging_warn_mjs__WEBPACK_IMPORTED_MODULE_0__/* .warn */ .Z)(`Attribute ${i} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`);\n    }\n  }\n  ensureStartAndStride(geometry);\n}\nfunction ensureStartAndStride(geometry) {\n  const { buffers, attributes } = geometry;\n  const tempStride = {};\n  const tempStart = {};\n  for (const j in buffers) {\n    const buffer = buffers[j];\n    tempStride[buffer.uid] = 0;\n    tempStart[buffer.uid] = 0;\n  }\n  for (const j in attributes) {\n    const attribute = attributes[j];\n    tempStride[attribute.buffer.uid] += (0,_shared_geometry_utils_getAttributeInfoFromFormat_mjs__WEBPACK_IMPORTED_MODULE_1__/* .getAttributeInfoFromFormat */ .v)(attribute.format).stride;\n  }\n  for (const j in attributes) {\n    const attribute = attributes[j];\n    attribute.stride ?? (attribute.stride = tempStride[attribute.buffer.uid]);\n    attribute.start ?? (attribute.start = tempStart[attribute.buffer.uid]);\n    tempStart[attribute.buffer.uid] += (0,_shared_geometry_utils_getAttributeInfoFromFormat_mjs__WEBPACK_IMPORTED_MODULE_1__/* .getAttributeInfoFromFormat */ .v)(attribute.format).stride;\n  }\n}\n\n\n//# sourceMappingURL=ensureAttributes.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjU0Ni5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE2RDtBQUM4Qzs7QUFFM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sTUFBTSxzRUFBSSxjQUFjLEdBQUc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsc0JBQXNCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywwSEFBMEI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywwSEFBMEI7QUFDakU7QUFDQTs7QUFFNEI7QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AbWFzYXRvbWFraW5vL3BpeGlqcy1wYXJ0aWNsZS13YXlwb2ludC8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9yZW5kZXJpbmcvcmVuZGVyZXJzL2dsL3NoYWRlci9wcm9ncmFtL2Vuc3VyZUF0dHJpYnV0ZXMubWpzPzA1ZjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2FybiB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3V0aWxzL2xvZ2dpbmcvd2Fybi5tanMnO1xuaW1wb3J0IHsgZ2V0QXR0cmlidXRlSW5mb0Zyb21Gb3JtYXQgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvZ2VvbWV0cnkvdXRpbHMvZ2V0QXR0cmlidXRlSW5mb0Zyb21Gb3JtYXQubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBlbnN1cmVBdHRyaWJ1dGVzKGdlb21ldHJ5LCBleHRyYWN0ZWREYXRhKSB7XG4gIGZvciAoY29uc3QgaSBpbiBnZW9tZXRyeS5hdHRyaWJ1dGVzKSB7XG4gICAgY29uc3QgYXR0cmlidXRlID0gZ2VvbWV0cnkuYXR0cmlidXRlc1tpXTtcbiAgICBjb25zdCBhdHRyaWJ1dGVEYXRhID0gZXh0cmFjdGVkRGF0YVtpXTtcbiAgICBpZiAoYXR0cmlidXRlRGF0YSkge1xuICAgICAgYXR0cmlidXRlLmxvY2F0aW9uID8/IChhdHRyaWJ1dGUubG9jYXRpb24gPSBhdHRyaWJ1dGVEYXRhLmxvY2F0aW9uKTtcbiAgICAgIGF0dHJpYnV0ZS5mb3JtYXQgPz8gKGF0dHJpYnV0ZS5mb3JtYXQgPSBhdHRyaWJ1dGVEYXRhLmZvcm1hdCk7XG4gICAgICBhdHRyaWJ1dGUub2Zmc2V0ID8/IChhdHRyaWJ1dGUub2Zmc2V0ID0gYXR0cmlidXRlRGF0YS5vZmZzZXQpO1xuICAgICAgYXR0cmlidXRlLmluc3RhbmNlID8/IChhdHRyaWJ1dGUuaW5zdGFuY2UgPSBhdHRyaWJ1dGVEYXRhLmluc3RhbmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2FybihgQXR0cmlidXRlICR7aX0gaXMgbm90IHByZXNlbnQgaW4gdGhlIHNoYWRlciwgYnV0IGlzIHByZXNlbnQgaW4gdGhlIGdlb21ldHJ5LiBVbmFibGUgdG8gaW5mZXIgYXR0cmlidXRlIGRldGFpbHMuYCk7XG4gICAgfVxuICB9XG4gIGVuc3VyZVN0YXJ0QW5kU3RyaWRlKGdlb21ldHJ5KTtcbn1cbmZ1bmN0aW9uIGVuc3VyZVN0YXJ0QW5kU3RyaWRlKGdlb21ldHJ5KSB7XG4gIGNvbnN0IHsgYnVmZmVycywgYXR0cmlidXRlcyB9ID0gZ2VvbWV0cnk7XG4gIGNvbnN0IHRlbXBTdHJpZGUgPSB7fTtcbiAgY29uc3QgdGVtcFN0YXJ0ID0ge307XG4gIGZvciAoY29uc3QgaiBpbiBidWZmZXJzKSB7XG4gICAgY29uc3QgYnVmZmVyID0gYnVmZmVyc1tqXTtcbiAgICB0ZW1wU3RyaWRlW2J1ZmZlci51aWRdID0gMDtcbiAgICB0ZW1wU3RhcnRbYnVmZmVyLnVpZF0gPSAwO1xuICB9XG4gIGZvciAoY29uc3QgaiBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgY29uc3QgYXR0cmlidXRlID0gYXR0cmlidXRlc1tqXTtcbiAgICB0ZW1wU3RyaWRlW2F0dHJpYnV0ZS5idWZmZXIudWlkXSArPSBnZXRBdHRyaWJ1dGVJbmZvRnJvbUZvcm1hdChhdHRyaWJ1dGUuZm9ybWF0KS5zdHJpZGU7XG4gIH1cbiAgZm9yIChjb25zdCBqIGluIGF0dHJpYnV0ZXMpIHtcbiAgICBjb25zdCBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzW2pdO1xuICAgIGF0dHJpYnV0ZS5zdHJpZGUgPz8gKGF0dHJpYnV0ZS5zdHJpZGUgPSB0ZW1wU3RyaWRlW2F0dHJpYnV0ZS5idWZmZXIudWlkXSk7XG4gICAgYXR0cmlidXRlLnN0YXJ0ID8/IChhdHRyaWJ1dGUuc3RhcnQgPSB0ZW1wU3RhcnRbYXR0cmlidXRlLmJ1ZmZlci51aWRdKTtcbiAgICB0ZW1wU3RhcnRbYXR0cmlidXRlLmJ1ZmZlci51aWRdICs9IGdldEF0dHJpYnV0ZUluZm9Gcm9tRm9ybWF0KGF0dHJpYnV0ZS5mb3JtYXQpLnN0cmlkZTtcbiAgfVxufVxuXG5leHBvcnQgeyBlbnN1cmVBdHRyaWJ1dGVzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnN1cmVBdHRyaWJ1dGVzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6546\n')},647:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   L: () => (/* binding */ GpuStencilModesToPixi)\n/* harmony export */ });\n/* harmony import */ var _shared_state_const_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2475);\n\n\n"use strict";\nconst GpuStencilModesToPixi = [];\nGpuStencilModesToPixi[_shared_state_const_mjs__WEBPACK_IMPORTED_MODULE_0__/* .STENCIL_MODES */ .D.NONE] = void 0;\nGpuStencilModesToPixi[_shared_state_const_mjs__WEBPACK_IMPORTED_MODULE_0__/* .STENCIL_MODES */ .D.DISABLED] = {\n  stencilWriteMask: 0,\n  stencilReadMask: 0\n};\nGpuStencilModesToPixi[_shared_state_const_mjs__WEBPACK_IMPORTED_MODULE_0__/* .STENCIL_MODES */ .D.RENDERING_MASK_ADD] = {\n  stencilFront: {\n    compare: "equal",\n    passOp: "increment-clamp"\n  },\n  stencilBack: {\n    compare: "equal",\n    passOp: "increment-clamp"\n  }\n};\nGpuStencilModesToPixi[_shared_state_const_mjs__WEBPACK_IMPORTED_MODULE_0__/* .STENCIL_MODES */ .D.RENDERING_MASK_REMOVE] = {\n  stencilFront: {\n    compare: "equal",\n    passOp: "decrement-clamp"\n  },\n  stencilBack: {\n    compare: "equal",\n    passOp: "decrement-clamp"\n  }\n};\nGpuStencilModesToPixi[_shared_state_const_mjs__WEBPACK_IMPORTED_MODULE_0__/* .STENCIL_MODES */ .D.MASK_ACTIVE] = {\n  stencilWriteMask: 0,\n  stencilFront: {\n    compare: "equal",\n    passOp: "keep"\n  },\n  stencilBack: {\n    compare: "equal",\n    passOp: "keep"\n  }\n};\n\n\n//# sourceMappingURL=GpuStencilModesToPixi.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjQ3LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBNkQ7O0FBRTdEO0FBQ0E7QUFDQSxzQkFBc0IsMkVBQWE7QUFDbkMsc0JBQXNCLDJFQUFhO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyRUFBYTtBQUNuQztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyRUFBYTtBQUNuQztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyRUFBYTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVpQztBQUNqQyIsInNvdXJjZXMiOlsid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3JlbmRlcmluZy9yZW5kZXJlcnMvZ3B1L3N0YXRlL0dwdVN0ZW5jaWxNb2Rlc1RvUGl4aS5tanM/ZDAyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTVEVOQ0lMX01PREVTIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3N0YXRlL2NvbnN0Lm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgR3B1U3RlbmNpbE1vZGVzVG9QaXhpID0gW107XG5HcHVTdGVuY2lsTW9kZXNUb1BpeGlbU1RFTkNJTF9NT0RFUy5OT05FXSA9IHZvaWQgMDtcbkdwdVN0ZW5jaWxNb2Rlc1RvUGl4aVtTVEVOQ0lMX01PREVTLkRJU0FCTEVEXSA9IHtcbiAgc3RlbmNpbFdyaXRlTWFzazogMCxcbiAgc3RlbmNpbFJlYWRNYXNrOiAwXG59O1xuR3B1U3RlbmNpbE1vZGVzVG9QaXhpW1NURU5DSUxfTU9ERVMuUkVOREVSSU5HX01BU0tfQUREXSA9IHtcbiAgc3RlbmNpbEZyb250OiB7XG4gICAgY29tcGFyZTogXCJlcXVhbFwiLFxuICAgIHBhc3NPcDogXCJpbmNyZW1lbnQtY2xhbXBcIlxuICB9LFxuICBzdGVuY2lsQmFjazoge1xuICAgIGNvbXBhcmU6IFwiZXF1YWxcIixcbiAgICBwYXNzT3A6IFwiaW5jcmVtZW50LWNsYW1wXCJcbiAgfVxufTtcbkdwdVN0ZW5jaWxNb2Rlc1RvUGl4aVtTVEVOQ0lMX01PREVTLlJFTkRFUklOR19NQVNLX1JFTU9WRV0gPSB7XG4gIHN0ZW5jaWxGcm9udDoge1xuICAgIGNvbXBhcmU6IFwiZXF1YWxcIixcbiAgICBwYXNzT3A6IFwiZGVjcmVtZW50LWNsYW1wXCJcbiAgfSxcbiAgc3RlbmNpbEJhY2s6IHtcbiAgICBjb21wYXJlOiBcImVxdWFsXCIsXG4gICAgcGFzc09wOiBcImRlY3JlbWVudC1jbGFtcFwiXG4gIH1cbn07XG5HcHVTdGVuY2lsTW9kZXNUb1BpeGlbU1RFTkNJTF9NT0RFUy5NQVNLX0FDVElWRV0gPSB7XG4gIHN0ZW5jaWxXcml0ZU1hc2s6IDAsXG4gIHN0ZW5jaWxGcm9udDoge1xuICAgIGNvbXBhcmU6IFwiZXF1YWxcIixcbiAgICBwYXNzT3A6IFwia2VlcFwiXG4gIH0sXG4gIHN0ZW5jaWxCYWNrOiB7XG4gICAgY29tcGFyZTogXCJlcXVhbFwiLFxuICAgIHBhc3NPcDogXCJrZWVwXCJcbiAgfVxufTtcblxuZXhwb3J0IHsgR3B1U3RlbmNpbE1vZGVzVG9QaXhpIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HcHVTdGVuY2lsTW9kZXNUb1BpeGkubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///647\n')},6496:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   q: () => (/* binding */ BufferResource)\n/* harmony export */ });\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4146);\n/* harmony import */ var _utils_data_uid_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6258);\n\n\n\n"use strict";\nclass BufferResource extends eventemitter3__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z {\n  /**\n   * Create a new Buffer Resource.\n   * @param options - The options for the buffer resource\n   * @param options.buffer - The underlying buffer that this resource is using\n   * @param options.offset - The offset of the buffer this resource is using.\n   * If not provided, then it will use the offset of the buffer.\n   * @param options.size - The size of the buffer this resource is using.\n   * If not provided, then it will use the size of the buffer.\n   */\n  constructor({ buffer, offset, size }) {\n    super();\n    /**\n     * emits when the underlying buffer has changed shape (i.e. resized)\n     * letting the renderer know that it needs to discard the old buffer on the GPU and create a new one\n     * @event change\n     */\n    /** a unique id for this uniform group used through the renderer */\n    this.uid = (0,_utils_data_uid_mjs__WEBPACK_IMPORTED_MODULE_1__/* .uid */ .h)("buffer");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     * @ignore\n     */\n    this._resourceType = "bufferResource";\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     * @ignore\n     */\n    this._touched = 0;\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     * @ignore\n     */\n    this._resourceId = (0,_utils_data_uid_mjs__WEBPACK_IMPORTED_MODULE_1__/* .uid */ .h)("resource");\n    /**\n     * A cheeky hint to the GL renderer to let it know this is a BufferResource\n     * @internal\n     * @ignore\n     */\n    this._bufferResource = true;\n    /**\n     * Has the Buffer resource been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    this.buffer = buffer;\n    this.offset = offset | 0;\n    this.size = size;\n    this.buffer.on("change", this.onBufferChange, this);\n  }\n  onBufferChange() {\n    this._resourceId = (0,_utils_data_uid_mjs__WEBPACK_IMPORTED_MODULE_1__/* .uid */ .h)("resource");\n    this.emit("change", this);\n  }\n  /**\n   * Destroys this resource. Make sure the underlying buffer is not used anywhere else\n   * if you want to destroy it as well, or code will explode\n   * @param destroyBuffer - Should the underlying buffer be destroyed as well?\n   */\n  destroy(destroyBuffer = false) {\n    this.destroyed = true;\n    if (destroyBuffer) {\n      this.buffer.destroy();\n    }\n    this.emit("change", this);\n    this.buffer = null;\n  }\n}\n\n\n//# sourceMappingURL=BufferResource.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjQ5Ni5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5QztBQUNZOztBQUVyRDtBQUNBLDZCQUE2Qiw4REFBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpRUFBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlFQUFHO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsaUVBQUc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTBCO0FBQzFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvYnVmZmVyL0J1ZmZlclJlc291cmNlLm1qcz8yNTY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRlbWl0dGVyMyc7XG5pbXBvcnQgeyB1aWQgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy9kYXRhL3VpZC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIEJ1ZmZlclJlc291cmNlIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBCdWZmZXIgUmVzb3VyY2UuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBidWZmZXIgcmVzb3VyY2VcbiAgICogQHBhcmFtIG9wdGlvbnMuYnVmZmVyIC0gVGhlIHVuZGVybHlpbmcgYnVmZmVyIHRoYXQgdGhpcyByZXNvdXJjZSBpcyB1c2luZ1xuICAgKiBAcGFyYW0gb3B0aW9ucy5vZmZzZXQgLSBUaGUgb2Zmc2V0IG9mIHRoZSBidWZmZXIgdGhpcyByZXNvdXJjZSBpcyB1c2luZy5cbiAgICogSWYgbm90IHByb3ZpZGVkLCB0aGVuIGl0IHdpbGwgdXNlIHRoZSBvZmZzZXQgb2YgdGhlIGJ1ZmZlci5cbiAgICogQHBhcmFtIG9wdGlvbnMuc2l6ZSAtIFRoZSBzaXplIG9mIHRoZSBidWZmZXIgdGhpcyByZXNvdXJjZSBpcyB1c2luZy5cbiAgICogSWYgbm90IHByb3ZpZGVkLCB0aGVuIGl0IHdpbGwgdXNlIHRoZSBzaXplIG9mIHRoZSBidWZmZXIuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7IGJ1ZmZlciwgb2Zmc2V0LCBzaXplIH0pIHtcbiAgICBzdXBlcigpO1xuICAgIC8qKlxuICAgICAqIGVtaXRzIHdoZW4gdGhlIHVuZGVybHlpbmcgYnVmZmVyIGhhcyBjaGFuZ2VkIHNoYXBlIChpLmUuIHJlc2l6ZWQpXG4gICAgICogbGV0dGluZyB0aGUgcmVuZGVyZXIga25vdyB0aGF0IGl0IG5lZWRzIHRvIGRpc2NhcmQgdGhlIG9sZCBidWZmZXIgb24gdGhlIEdQVSBhbmQgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAqIEBldmVudCBjaGFuZ2VcbiAgICAgKi9cbiAgICAvKiogYSB1bmlxdWUgaWQgZm9yIHRoaXMgdW5pZm9ybSBncm91cCB1c2VkIHRocm91Z2ggdGhlIHJlbmRlcmVyICovXG4gICAgdGhpcy51aWQgPSB1aWQoXCJidWZmZXJcIik7XG4gICAgLyoqXG4gICAgICogYSByZXNvdXJjZSB0eXBlLCB1c2VkIHRvIGlkZW50aWZ5IGhvdyB0byBoYW5kbGUgaXQgd2hlbiBpdHMgaW4gYSBiaW5kIGdyb3VwIC8gc2hhZGVyIHJlc291cmNlXG4gICAgICogQGludGVybmFsXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHRoaXMuX3Jlc291cmNlVHlwZSA9IFwiYnVmZmVyUmVzb3VyY2VcIjtcbiAgICAvKipcbiAgICAgKiB1c2VkIGludGVybmFsbHkgdG8ga25vdyBpZiBhIHVuaWZvcm0gZ3JvdXAgd2FzIHVzZWQgaW4gdGhlIGxhc3QgcmVuZGVyIHBhc3NcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgdGhpcy5fdG91Y2hlZCA9IDA7XG4gICAgLyoqXG4gICAgICogdGhlIHJlc291cmNlIGlkIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgcmVuZGVyZXIgdG8gYnVpbGQgYmluZCBncm91cCBrZXlzXG4gICAgICogQGludGVybmFsXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHRoaXMuX3Jlc291cmNlSWQgPSB1aWQoXCJyZXNvdXJjZVwiKTtcbiAgICAvKipcbiAgICAgKiBBIGNoZWVreSBoaW50IHRvIHRoZSBHTCByZW5kZXJlciB0byBsZXQgaXQga25vdyB0aGlzIGlzIGEgQnVmZmVyUmVzb3VyY2VcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgdGhpcy5fYnVmZmVyUmVzb3VyY2UgPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIEhhcyB0aGUgQnVmZmVyIHJlc291cmNlIGJlZW4gZGVzdHJveWVkP1xuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQgfCAwO1xuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgdGhpcy5idWZmZXIub24oXCJjaGFuZ2VcIiwgdGhpcy5vbkJ1ZmZlckNoYW5nZSwgdGhpcyk7XG4gIH1cbiAgb25CdWZmZXJDaGFuZ2UoKSB7XG4gICAgdGhpcy5fcmVzb3VyY2VJZCA9IHVpZChcInJlc291cmNlXCIpO1xuICAgIHRoaXMuZW1pdChcImNoYW5nZVwiLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogRGVzdHJveXMgdGhpcyByZXNvdXJjZS4gTWFrZSBzdXJlIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlciBpcyBub3QgdXNlZCBhbnl3aGVyZSBlbHNlXG4gICAqIGlmIHlvdSB3YW50IHRvIGRlc3Ryb3kgaXQgYXMgd2VsbCwgb3IgY29kZSB3aWxsIGV4cGxvZGVcbiAgICogQHBhcmFtIGRlc3Ryb3lCdWZmZXIgLSBTaG91bGQgdGhlIHVuZGVybHlpbmcgYnVmZmVyIGJlIGRlc3Ryb3llZCBhcyB3ZWxsP1xuICAgKi9cbiAgZGVzdHJveShkZXN0cm95QnVmZmVyID0gZmFsc2UpIHtcbiAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgaWYgKGRlc3Ryb3lCdWZmZXIpIHtcbiAgICAgIHRoaXMuYnVmZmVyLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgdGhpcy5lbWl0KFwiY2hhbmdlXCIsIHRoaXMpO1xuICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgeyBCdWZmZXJSZXNvdXJjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QnVmZmVyUmVzb3VyY2UubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6496\n')},1826:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (/* binding */ RenderTarget)\n/* harmony export */ });\n/* harmony import */ var _utils_data_uid_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6258);\n/* harmony import */ var _texture_sources_TextureSource_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5206);\n/* harmony import */ var _texture_Texture_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9853);\n\n\n\n\n"use strict";\nconst _RenderTarget = class _RenderTarget {\n  /**\n   * @param [descriptor] - Options for creating a render target.\n   */\n  constructor(descriptor = {}) {\n    /** unique id for this render target */\n    this.uid = (0,_utils_data_uid_mjs__WEBPACK_IMPORTED_MODULE_0__/* .uid */ .h)("renderTarget");\n    /**\n     * An array of textures that can be written to by the GPU - mostly this has one texture in Pixi, but you could\n     * write to multiple if required! (eg deferred lighting)\n     */\n    this.colorTextures = [];\n    this.dirtyId = 0;\n    this.isRoot = false;\n    this._size = new Float32Array(2);\n    /** if true, then when the render target is destroyed, it will destroy all the textures that were created for it. */\n    this._managedColorTextures = false;\n    descriptor = { ..._RenderTarget.defaultOptions, ...descriptor };\n    this.stencil = descriptor.stencil;\n    this.depth = descriptor.depth;\n    this.isRoot = descriptor.isRoot;\n    if (typeof descriptor.colorTextures === "number") {\n      this._managedColorTextures = true;\n      for (let i = 0; i < descriptor.colorTextures; i++) {\n        this.colorTextures.push(\n          new _texture_sources_TextureSource_mjs__WEBPACK_IMPORTED_MODULE_1__/* .TextureSource */ .p({\n            width: descriptor.width,\n            height: descriptor.height,\n            resolution: descriptor.resolution,\n            antialias: descriptor.antialias\n          })\n        );\n      }\n    } else {\n      this.colorTextures = [...descriptor.colorTextures.map((texture) => texture.source)];\n      const colorSource = this.colorTexture.source;\n      this.resize(colorSource.width, colorSource.height, colorSource._resolution);\n    }\n    this.colorTexture.source.on("resize", this.onSourceResize, this);\n    if (descriptor.depthStencilTexture || this.stencil) {\n      if (descriptor.depthStencilTexture instanceof _texture_Texture_mjs__WEBPACK_IMPORTED_MODULE_2__/* .Texture */ .x || descriptor.depthStencilTexture instanceof _texture_sources_TextureSource_mjs__WEBPACK_IMPORTED_MODULE_1__/* .TextureSource */ .p) {\n        this.depthStencilTexture = descriptor.depthStencilTexture.source;\n      } else {\n        this.ensureDepthStencilTexture();\n      }\n    }\n  }\n  get size() {\n    const _size = this._size;\n    _size[0] = this.pixelWidth;\n    _size[1] = this.pixelHeight;\n    return _size;\n  }\n  get width() {\n    return this.colorTexture.source.width;\n  }\n  get height() {\n    return this.colorTexture.source.height;\n  }\n  get pixelWidth() {\n    return this.colorTexture.source.pixelWidth;\n  }\n  get pixelHeight() {\n    return this.colorTexture.source.pixelHeight;\n  }\n  get resolution() {\n    return this.colorTexture.source._resolution;\n  }\n  get colorTexture() {\n    return this.colorTextures[0];\n  }\n  onSourceResize(source) {\n    this.resize(source.width, source.height, source._resolution, true);\n  }\n  /**\n   * This will ensure a depthStencil texture is created for this render target.\n   * Most likely called by the mask system to make sure we have stencil buffer added.\n   * @internal\n   * @ignore\n   */\n  ensureDepthStencilTexture() {\n    if (!this.depthStencilTexture) {\n      this.depthStencilTexture = new _texture_sources_TextureSource_mjs__WEBPACK_IMPORTED_MODULE_1__/* .TextureSource */ .p({\n        width: this.width,\n        height: this.height,\n        resolution: this.resolution,\n        format: "depth24plus-stencil8",\n        autoGenerateMipmaps: false,\n        antialias: false,\n        mipLevelCount: 1\n        // sampleCount: handled by the render target system..\n      });\n    }\n  }\n  resize(width, height, resolution = this.resolution, skipColorTexture = false) {\n    this.dirtyId++;\n    this.colorTextures.forEach((colorTexture, i) => {\n      if (skipColorTexture && i === 0)\n        return;\n      colorTexture.source.resize(width, height, resolution);\n    });\n    if (this.depthStencilTexture) {\n      this.depthStencilTexture.source.resize(width, height, resolution);\n    }\n  }\n  destroy() {\n    this.colorTexture.source.off("resize", this.onSourceResize, this);\n    if (this._managedColorTextures) {\n      this.colorTextures.forEach((texture) => {\n        texture.destroy();\n      });\n    }\n    if (this.depthStencilTexture) {\n      this.depthStencilTexture.destroy();\n      delete this.depthStencilTexture;\n    }\n  }\n};\n/** The default options for a render target */\n_RenderTarget.defaultOptions = {\n  /** the width of the RenderTarget */\n  width: 0,\n  /** the height of the RenderTarget */\n  height: 0,\n  /** the resolution of the RenderTarget */\n  resolution: 1,\n  /** an array of textures, or a number indicating how many color textures there should be */\n  colorTextures: 1,\n  /** should this render target have a stencil buffer? */\n  stencil: false,\n  /** should this render target have a depth buffer? */\n  depth: false,\n  /** should this render target be antialiased? */\n  antialias: false,\n  // save on perf by default!\n  /** is this a root element, true if this is gl context owners render target */\n  isRoot: false\n};\nlet RenderTarget = _RenderTarget;\n\n\n//# sourceMappingURL=RenderTarget.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTgyNi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUQ7QUFDZ0I7QUFDcEI7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxlQUFlLGlFQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsOEJBQThCO0FBQ3BEO0FBQ0EsY0FBYyxzRkFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxrRUFBTyw4Q0FBOEMsc0ZBQWE7QUFDdEg7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHNGQUFhO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXdCO0FBQ3hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvcmVuZGVyVGFyZ2V0L1JlbmRlclRhcmdldC5tanM/MmFlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1aWQgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy9kYXRhL3VpZC5tanMnO1xuaW1wb3J0IHsgVGV4dHVyZVNvdXJjZSB9IGZyb20gJy4uL3RleHR1cmUvc291cmNlcy9UZXh0dXJlU291cmNlLm1qcyc7XG5pbXBvcnQgeyBUZXh0dXJlIH0gZnJvbSAnLi4vdGV4dHVyZS9UZXh0dXJlLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgX1JlbmRlclRhcmdldCA9IGNsYXNzIF9SZW5kZXJUYXJnZXQge1xuICAvKipcbiAgICogQHBhcmFtIFtkZXNjcmlwdG9yXSAtIE9wdGlvbnMgZm9yIGNyZWF0aW5nIGEgcmVuZGVyIHRhcmdldC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlc2NyaXB0b3IgPSB7fSkge1xuICAgIC8qKiB1bmlxdWUgaWQgZm9yIHRoaXMgcmVuZGVyIHRhcmdldCAqL1xuICAgIHRoaXMudWlkID0gdWlkKFwicmVuZGVyVGFyZ2V0XCIpO1xuICAgIC8qKlxuICAgICAqIEFuIGFycmF5IG9mIHRleHR1cmVzIHRoYXQgY2FuIGJlIHdyaXR0ZW4gdG8gYnkgdGhlIEdQVSAtIG1vc3RseSB0aGlzIGhhcyBvbmUgdGV4dHVyZSBpbiBQaXhpLCBidXQgeW91IGNvdWxkXG4gICAgICogd3JpdGUgdG8gbXVsdGlwbGUgaWYgcmVxdWlyZWQhIChlZyBkZWZlcnJlZCBsaWdodGluZylcbiAgICAgKi9cbiAgICB0aGlzLmNvbG9yVGV4dHVyZXMgPSBbXTtcbiAgICB0aGlzLmRpcnR5SWQgPSAwO1xuICAgIHRoaXMuaXNSb290ID0gZmFsc2U7XG4gICAgdGhpcy5fc2l6ZSA9IG5ldyBGbG9hdDMyQXJyYXkoMik7XG4gICAgLyoqIGlmIHRydWUsIHRoZW4gd2hlbiB0aGUgcmVuZGVyIHRhcmdldCBpcyBkZXN0cm95ZWQsIGl0IHdpbGwgZGVzdHJveSBhbGwgdGhlIHRleHR1cmVzIHRoYXQgd2VyZSBjcmVhdGVkIGZvciBpdC4gKi9cbiAgICB0aGlzLl9tYW5hZ2VkQ29sb3JUZXh0dXJlcyA9IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IgPSB7IC4uLl9SZW5kZXJUYXJnZXQuZGVmYXVsdE9wdGlvbnMsIC4uLmRlc2NyaXB0b3IgfTtcbiAgICB0aGlzLnN0ZW5jaWwgPSBkZXNjcmlwdG9yLnN0ZW5jaWw7XG4gICAgdGhpcy5kZXB0aCA9IGRlc2NyaXB0b3IuZGVwdGg7XG4gICAgdGhpcy5pc1Jvb3QgPSBkZXNjcmlwdG9yLmlzUm9vdDtcbiAgICBpZiAodHlwZW9mIGRlc2NyaXB0b3IuY29sb3JUZXh0dXJlcyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgdGhpcy5fbWFuYWdlZENvbG9yVGV4dHVyZXMgPSB0cnVlO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXNjcmlwdG9yLmNvbG9yVGV4dHVyZXM7IGkrKykge1xuICAgICAgICB0aGlzLmNvbG9yVGV4dHVyZXMucHVzaChcbiAgICAgICAgICBuZXcgVGV4dHVyZVNvdXJjZSh7XG4gICAgICAgICAgICB3aWR0aDogZGVzY3JpcHRvci53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogZGVzY3JpcHRvci5oZWlnaHQsXG4gICAgICAgICAgICByZXNvbHV0aW9uOiBkZXNjcmlwdG9yLnJlc29sdXRpb24sXG4gICAgICAgICAgICBhbnRpYWxpYXM6IGRlc2NyaXB0b3IuYW50aWFsaWFzXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb2xvclRleHR1cmVzID0gWy4uLmRlc2NyaXB0b3IuY29sb3JUZXh0dXJlcy5tYXAoKHRleHR1cmUpID0+IHRleHR1cmUuc291cmNlKV07XG4gICAgICBjb25zdCBjb2xvclNvdXJjZSA9IHRoaXMuY29sb3JUZXh0dXJlLnNvdXJjZTtcbiAgICAgIHRoaXMucmVzaXplKGNvbG9yU291cmNlLndpZHRoLCBjb2xvclNvdXJjZS5oZWlnaHQsIGNvbG9yU291cmNlLl9yZXNvbHV0aW9uKTtcbiAgICB9XG4gICAgdGhpcy5jb2xvclRleHR1cmUuc291cmNlLm9uKFwicmVzaXplXCIsIHRoaXMub25Tb3VyY2VSZXNpemUsIHRoaXMpO1xuICAgIGlmIChkZXNjcmlwdG9yLmRlcHRoU3RlbmNpbFRleHR1cmUgfHwgdGhpcy5zdGVuY2lsKSB7XG4gICAgICBpZiAoZGVzY3JpcHRvci5kZXB0aFN0ZW5jaWxUZXh0dXJlIGluc3RhbmNlb2YgVGV4dHVyZSB8fCBkZXNjcmlwdG9yLmRlcHRoU3RlbmNpbFRleHR1cmUgaW5zdGFuY2VvZiBUZXh0dXJlU291cmNlKSB7XG4gICAgICAgIHRoaXMuZGVwdGhTdGVuY2lsVGV4dHVyZSA9IGRlc2NyaXB0b3IuZGVwdGhTdGVuY2lsVGV4dHVyZS5zb3VyY2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVuc3VyZURlcHRoU3RlbmNpbFRleHR1cmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZ2V0IHNpemUoKSB7XG4gICAgY29uc3QgX3NpemUgPSB0aGlzLl9zaXplO1xuICAgIF9zaXplWzBdID0gdGhpcy5waXhlbFdpZHRoO1xuICAgIF9zaXplWzFdID0gdGhpcy5waXhlbEhlaWdodDtcbiAgICByZXR1cm4gX3NpemU7XG4gIH1cbiAgZ2V0IHdpZHRoKCkge1xuICAgIHJldHVybiB0aGlzLmNvbG9yVGV4dHVyZS5zb3VyY2Uud2lkdGg7XG4gIH1cbiAgZ2V0IGhlaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb2xvclRleHR1cmUuc291cmNlLmhlaWdodDtcbiAgfVxuICBnZXQgcGl4ZWxXaWR0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb2xvclRleHR1cmUuc291cmNlLnBpeGVsV2lkdGg7XG4gIH1cbiAgZ2V0IHBpeGVsSGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbG9yVGV4dHVyZS5zb3VyY2UucGl4ZWxIZWlnaHQ7XG4gIH1cbiAgZ2V0IHJlc29sdXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29sb3JUZXh0dXJlLnNvdXJjZS5fcmVzb2x1dGlvbjtcbiAgfVxuICBnZXQgY29sb3JUZXh0dXJlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbG9yVGV4dHVyZXNbMF07XG4gIH1cbiAgb25Tb3VyY2VSZXNpemUoc291cmNlKSB7XG4gICAgdGhpcy5yZXNpemUoc291cmNlLndpZHRoLCBzb3VyY2UuaGVpZ2h0LCBzb3VyY2UuX3Jlc29sdXRpb24sIHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIHdpbGwgZW5zdXJlIGEgZGVwdGhTdGVuY2lsIHRleHR1cmUgaXMgY3JlYXRlZCBmb3IgdGhpcyByZW5kZXIgdGFyZ2V0LlxuICAgKiBNb3N0IGxpa2VseSBjYWxsZWQgYnkgdGhlIG1hc2sgc3lzdGVtIHRvIG1ha2Ugc3VyZSB3ZSBoYXZlIHN0ZW5jaWwgYnVmZmVyIGFkZGVkLlxuICAgKiBAaW50ZXJuYWxcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgZW5zdXJlRGVwdGhTdGVuY2lsVGV4dHVyZSgpIHtcbiAgICBpZiAoIXRoaXMuZGVwdGhTdGVuY2lsVGV4dHVyZSkge1xuICAgICAgdGhpcy5kZXB0aFN0ZW5jaWxUZXh0dXJlID0gbmV3IFRleHR1cmVTb3VyY2Uoe1xuICAgICAgICB3aWR0aDogdGhpcy53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICAgICAgcmVzb2x1dGlvbjogdGhpcy5yZXNvbHV0aW9uLFxuICAgICAgICBmb3JtYXQ6IFwiZGVwdGgyNHBsdXMtc3RlbmNpbDhcIixcbiAgICAgICAgYXV0b0dlbmVyYXRlTWlwbWFwczogZmFsc2UsXG4gICAgICAgIGFudGlhbGlhczogZmFsc2UsXG4gICAgICAgIG1pcExldmVsQ291bnQ6IDFcbiAgICAgICAgLy8gc2FtcGxlQ291bnQ6IGhhbmRsZWQgYnkgdGhlIHJlbmRlciB0YXJnZXQgc3lzdGVtLi5cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXNpemUod2lkdGgsIGhlaWdodCwgcmVzb2x1dGlvbiA9IHRoaXMucmVzb2x1dGlvbiwgc2tpcENvbG9yVGV4dHVyZSA9IGZhbHNlKSB7XG4gICAgdGhpcy5kaXJ0eUlkKys7XG4gICAgdGhpcy5jb2xvclRleHR1cmVzLmZvckVhY2goKGNvbG9yVGV4dHVyZSwgaSkgPT4ge1xuICAgICAgaWYgKHNraXBDb2xvclRleHR1cmUgJiYgaSA9PT0gMClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY29sb3JUZXh0dXJlLnNvdXJjZS5yZXNpemUod2lkdGgsIGhlaWdodCwgcmVzb2x1dGlvbik7XG4gICAgfSk7XG4gICAgaWYgKHRoaXMuZGVwdGhTdGVuY2lsVGV4dHVyZSkge1xuICAgICAgdGhpcy5kZXB0aFN0ZW5jaWxUZXh0dXJlLnNvdXJjZS5yZXNpemUod2lkdGgsIGhlaWdodCwgcmVzb2x1dGlvbik7XG4gICAgfVxuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5jb2xvclRleHR1cmUuc291cmNlLm9mZihcInJlc2l6ZVwiLCB0aGlzLm9uU291cmNlUmVzaXplLCB0aGlzKTtcbiAgICBpZiAodGhpcy5fbWFuYWdlZENvbG9yVGV4dHVyZXMpIHtcbiAgICAgIHRoaXMuY29sb3JUZXh0dXJlcy5mb3JFYWNoKCh0ZXh0dXJlKSA9PiB7XG4gICAgICAgIHRleHR1cmUuZGVzdHJveSgpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmRlcHRoU3RlbmNpbFRleHR1cmUpIHtcbiAgICAgIHRoaXMuZGVwdGhTdGVuY2lsVGV4dHVyZS5kZXN0cm95KCk7XG4gICAgICBkZWxldGUgdGhpcy5kZXB0aFN0ZW5jaWxUZXh0dXJlO1xuICAgIH1cbiAgfVxufTtcbi8qKiBUaGUgZGVmYXVsdCBvcHRpb25zIGZvciBhIHJlbmRlciB0YXJnZXQgKi9cbl9SZW5kZXJUYXJnZXQuZGVmYXVsdE9wdGlvbnMgPSB7XG4gIC8qKiB0aGUgd2lkdGggb2YgdGhlIFJlbmRlclRhcmdldCAqL1xuICB3aWR0aDogMCxcbiAgLyoqIHRoZSBoZWlnaHQgb2YgdGhlIFJlbmRlclRhcmdldCAqL1xuICBoZWlnaHQ6IDAsXG4gIC8qKiB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgUmVuZGVyVGFyZ2V0ICovXG4gIHJlc29sdXRpb246IDEsXG4gIC8qKiBhbiBhcnJheSBvZiB0ZXh0dXJlcywgb3IgYSBudW1iZXIgaW5kaWNhdGluZyBob3cgbWFueSBjb2xvciB0ZXh0dXJlcyB0aGVyZSBzaG91bGQgYmUgKi9cbiAgY29sb3JUZXh0dXJlczogMSxcbiAgLyoqIHNob3VsZCB0aGlzIHJlbmRlciB0YXJnZXQgaGF2ZSBhIHN0ZW5jaWwgYnVmZmVyPyAqL1xuICBzdGVuY2lsOiBmYWxzZSxcbiAgLyoqIHNob3VsZCB0aGlzIHJlbmRlciB0YXJnZXQgaGF2ZSBhIGRlcHRoIGJ1ZmZlcj8gKi9cbiAgZGVwdGg6IGZhbHNlLFxuICAvKiogc2hvdWxkIHRoaXMgcmVuZGVyIHRhcmdldCBiZSBhbnRpYWxpYXNlZD8gKi9cbiAgYW50aWFsaWFzOiBmYWxzZSxcbiAgLy8gc2F2ZSBvbiBwZXJmIGJ5IGRlZmF1bHQhXG4gIC8qKiBpcyB0aGlzIGEgcm9vdCBlbGVtZW50LCB0cnVlIGlmIHRoaXMgaXMgZ2wgY29udGV4dCBvd25lcnMgcmVuZGVyIHRhcmdldCAqL1xuICBpc1Jvb3Q6IGZhbHNlXG59O1xubGV0IFJlbmRlclRhcmdldCA9IF9SZW5kZXJUYXJnZXQ7XG5cbmV4cG9ydCB7IFJlbmRlclRhcmdldCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVuZGVyVGFyZ2V0Lm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1826\n')},2028:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  l: () => (/* binding */ RenderTargetSystem)\n});\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/maths/matrix/Matrix.mjs\nvar Matrix = __webpack_require__(5321);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/maths/shapes/Rectangle.mjs\nvar Rectangle = __webpack_require__(3904);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/gl/const.mjs\nvar gl_const = __webpack_require__(6582);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/gpu/renderTarget/calculateProjection.mjs\n\nfunction calculateProjection(pm, x, y, width, height, flipY) {\n  const sign = flipY ? 1 : -1;\n  pm.identity();\n  pm.a = 1 / width * 2;\n  pm.d = sign * (1 / height * 2);\n  pm.tx = -1 - x * pm.a;\n  pm.ty = -sign - y * pm.d;\n  return pm;\n}\n\n\n//# sourceMappingURL=calculateProjection.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/system/SystemRunner.mjs\nvar SystemRunner = __webpack_require__(7051);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/CanvasSource.mjs\nvar CanvasSource = __webpack_require__(6914);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/TextureSource.mjs + 2 modules\nvar TextureSource = __webpack_require__(5206);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/texture/Texture.mjs + 2 modules\nvar Texture = __webpack_require__(9853);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/texture/utils/getCanvasTexture.mjs\nvar getCanvasTexture = __webpack_require__(1604);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/isRenderingToScreen.mjs\n\nfunction isRenderingToScreen(renderTarget) {\n  const resource = renderTarget.colorTexture.source.resource;\n  return globalThis.HTMLCanvasElement && resource instanceof HTMLCanvasElement && document.body.contains(resource);\n}\n\n\n//# sourceMappingURL=isRenderingToScreen.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/RenderTarget.mjs\nvar RenderTarget = __webpack_require__(1826);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/RenderTargetSystem.mjs\n\n\n\n\n\n\n\n\n\n\n\n\n\"use strict\";\nclass RenderTargetSystem {\n  constructor(renderer) {\n    /** This is the root viewport for the render pass*/\n    this.rootViewPort = new Rectangle/* Rectangle */.A();\n    /** the current viewport that the gpu is using */\n    this.viewport = new Rectangle/* Rectangle */.A();\n    /**\n     * a runner that lets systems know if the active render target has changed.\n     * Eg the Stencil System needs to know so it can manage the stencil buffer\n     */\n    this.onRenderTargetChange = new SystemRunner/* SystemRunner */.P(\"onRenderTargetChange\");\n    /** the projection matrix that is used by the shaders based on the active render target and the viewport */\n    this.projectionMatrix = new Matrix/* Matrix */.y();\n    /** the default clear color for render targets */\n    this.defaultClearColor = [0, 0, 0, 0];\n    /**\n     * a hash that stores the render target for a given render surface. When you pass in a texture source,\n     * a render target is created for it. This map stores and makes it easy to retrieve the render target\n     */\n    this._renderSurfaceToRenderTargetHash = /* @__PURE__ */ new Map();\n    /** A hash that stores a gpu render target for a given render target. */\n    this._gpuRenderTargetHash = /* @__PURE__ */ Object.create(null);\n    /**\n     * A stack that stores the render target and frame that is currently being rendered to.\n     * When push is called, the current render target is stored in this stack.\n     * When pop is called, the previous render target is restored.\n     */\n    this._renderTargetStack = [];\n    this._renderer = renderer;\n  }\n  /** called when dev wants to finish a render pass */\n  finishRenderPass() {\n    this.adaptor.finishRenderPass(this.renderTarget);\n  }\n  /**\n   * called when the renderer starts to render a scene.\n   * @param options\n   * @param options.target - the render target to render to\n   * @param options.clear - the clear mode to use. Can be true or a CLEAR number 'COLOR | DEPTH | STENCIL' 0b111\n   * @param options.clearColor - the color to clear to\n   * @param options.frame - the frame to render to\n   */\n  renderStart({\n    target,\n    clear,\n    clearColor,\n    frame\n  }) {\n    this._renderTargetStack.length = 0;\n    this.push(\n      target,\n      clear,\n      clearColor,\n      frame\n    );\n    this.rootViewPort.copyFrom(this.viewport);\n    this.rootRenderTarget = this.renderTarget;\n    this.renderingToScreen = isRenderingToScreen(this.rootRenderTarget);\n  }\n  /**\n   * Binding a render surface! This is the main function of the render target system.\n   * It will take the RenderSurface (which can be a texture, canvas, or render target) and bind it to the renderer.\n   * Once bound all draw calls will be rendered to the render surface.\n   *\n   * If a frame is not provide and the render surface is a texture, the frame of the texture will be used.\n   * @param renderSurface - the render surface to bind\n   * @param clear - the clear mode to use. Can be true or a CLEAR number 'COLOR | DEPTH | STENCIL' 0b111\n   * @param clearColor - the color to clear to\n   * @param frame - the frame to render to\n   * @returns the render target that was bound\n   */\n  bind(renderSurface, clear = true, clearColor, frame) {\n    const renderTarget = this.getRenderTarget(renderSurface);\n    const didChange = this.renderTarget !== renderTarget;\n    this.renderTarget = renderTarget;\n    this.renderSurface = renderSurface;\n    const gpuRenderTarget = this.getGpuRenderTarget(renderTarget);\n    if (renderTarget.pixelWidth !== gpuRenderTarget.width || renderTarget.pixelHeight !== gpuRenderTarget.height) {\n      this.adaptor.resizeGpuRenderTarget(renderTarget);\n      gpuRenderTarget.width = renderTarget.pixelWidth;\n      gpuRenderTarget.height = renderTarget.pixelHeight;\n    }\n    const source = renderTarget.colorTexture;\n    const viewport = this.viewport;\n    const pixelWidth = source.pixelWidth;\n    const pixelHeight = source.pixelHeight;\n    if (!frame && renderSurface instanceof Texture/* Texture */.x) {\n      frame = renderSurface.frame;\n    }\n    if (frame) {\n      const resolution = source._resolution;\n      viewport.x = frame.x * resolution + 0.5 | 0;\n      viewport.y = frame.y * resolution + 0.5 | 0;\n      viewport.width = frame.width * resolution + 0.5 | 0;\n      viewport.height = frame.height * resolution + 0.5 | 0;\n    } else {\n      viewport.x = 0;\n      viewport.y = 0;\n      viewport.width = pixelWidth;\n      viewport.height = pixelHeight;\n    }\n    calculateProjection(\n      this.projectionMatrix,\n      0,\n      0,\n      viewport.width / source.resolution,\n      viewport.height / source.resolution,\n      !renderTarget.isRoot\n    );\n    this.adaptor.startRenderPass(renderTarget, clear, clearColor, viewport);\n    if (didChange) {\n      this.onRenderTargetChange.emit(renderTarget);\n    }\n    return renderTarget;\n  }\n  clear(target, clear = gl_const/* CLEAR */.E.ALL, clearColor) {\n    if (!clear)\n      return;\n    if (target) {\n      target = this.getRenderTarget(target);\n    }\n    this.adaptor.clear(\n      target || this.renderTarget,\n      clear,\n      clearColor,\n      this.viewport\n    );\n  }\n  contextChange() {\n    this._gpuRenderTargetHash = /* @__PURE__ */ Object.create(null);\n  }\n  /**\n   * Push a render surface to the renderer. This will bind the render surface to the renderer,\n   * @param renderSurface - the render surface to push\n   * @param clear - the clear mode to use. Can be true or a CLEAR number 'COLOR | DEPTH | STENCIL' 0b111\n   * @param clearColor - the color to clear to\n   * @param frame - the frame to use when rendering to the render surface\n   */\n  push(renderSurface, clear = gl_const/* CLEAR */.E.ALL, clearColor, frame) {\n    const renderTarget = this.bind(renderSurface, clear, clearColor, frame);\n    this._renderTargetStack.push({\n      renderTarget,\n      frame\n    });\n    return renderTarget;\n  }\n  /** Pops the current render target from the renderer and restores the previous render target. */\n  pop() {\n    this._renderTargetStack.pop();\n    const currentRenderTargetData = this._renderTargetStack[this._renderTargetStack.length - 1];\n    this.bind(currentRenderTargetData.renderTarget, false, null, currentRenderTargetData.frame);\n  }\n  /**\n   * Gets the render target from the provide render surface. Eg if its a texture,\n   * it will return the render target for the texture.\n   * If its a render target, it will return the same render target.\n   * @param renderSurface - the render surface to get the render target for\n   * @returns the render target for the render surface\n   */\n  getRenderTarget(renderSurface) {\n    if (renderSurface.isTexture) {\n      renderSurface = renderSurface.source;\n    }\n    return this._renderSurfaceToRenderTargetHash.get(renderSurface) ?? this._initRenderTarget(renderSurface);\n  }\n  /**\n   * Copies a render surface to another texture\n   * @param sourceRenderSurfaceTexture - the render surface to copy from\n   * @param destinationTexture - the texture to copy to\n   * @param originSrc - the origin of the copy\n   * @param originSrc.x - the x origin of the copy\n   * @param originSrc.y - the y origin of the copy\n   * @param size - the size of the copy\n   * @param size.width - the width of the copy\n   * @param size.height - the height of the copy\n   * @param originDest - the destination origin (top left to paste from!)\n   * @param originDest.x - the x origin of the paste\n   * @param originDest.y - the y origin of the paste\n   */\n  copyToTexture(sourceRenderSurfaceTexture, destinationTexture, originSrc, size, originDest) {\n    if (originSrc.x < 0) {\n      size.width += originSrc.x;\n      originDest.x -= originSrc.x;\n      originSrc.x = 0;\n    }\n    if (originSrc.y < 0) {\n      size.height += originSrc.y;\n      originDest.y -= originSrc.y;\n      originSrc.y = 0;\n    }\n    const { pixelWidth, pixelHeight } = sourceRenderSurfaceTexture;\n    size.width = Math.min(size.width, pixelWidth - originSrc.x);\n    size.height = Math.min(size.height, pixelHeight - originSrc.y);\n    return this.adaptor.copyToTexture(\n      sourceRenderSurfaceTexture,\n      destinationTexture,\n      originSrc,\n      size,\n      originDest\n    );\n  }\n  /**\n   * ensures that we have a depth stencil buffer available to render to\n   * This is used by the mask system to make sure we have a stencil buffer.\n   */\n  ensureDepthStencil() {\n    if (!this.renderTarget.stencil) {\n      this.renderTarget.stencil = true;\n      this.adaptor.startRenderPass(this.renderTarget, false, null, this.viewport);\n    }\n  }\n  /** nukes the render target system */\n  destroy() {\n    this._renderer = null;\n    this._renderSurfaceToRenderTargetHash.forEach((renderTarget, key) => {\n      if (renderTarget !== key) {\n        renderTarget.destroy();\n      }\n    });\n    this._renderSurfaceToRenderTargetHash.clear();\n    this._gpuRenderTargetHash = /* @__PURE__ */ Object.create(null);\n  }\n  _initRenderTarget(renderSurface) {\n    let renderTarget = null;\n    if (CanvasSource/* CanvasSource */.D.test(renderSurface)) {\n      renderSurface = (0,getCanvasTexture/* getCanvasTexture */.t)(renderSurface).source;\n    }\n    if (renderSurface instanceof RenderTarget/* RenderTarget */.A) {\n      renderTarget = renderSurface;\n    } else if (renderSurface instanceof TextureSource/* TextureSource */.p) {\n      renderTarget = new RenderTarget/* RenderTarget */.A({\n        colorTextures: [renderSurface]\n      });\n      if (CanvasSource/* CanvasSource */.D.test(renderSurface.source.resource)) {\n        renderTarget.isRoot = true;\n      }\n      renderSurface.once(\"destroy\", () => {\n        renderTarget.destroy();\n        const gpuRenderTarget = this._gpuRenderTargetHash[renderTarget.uid];\n        if (gpuRenderTarget) {\n          this._gpuRenderTargetHash[renderTarget.uid] = null;\n          this.adaptor.destroyGpuRenderTarget(gpuRenderTarget);\n        }\n      });\n    }\n    this._renderSurfaceToRenderTargetHash.set(renderSurface, renderTarget);\n    return renderTarget;\n  }\n  getGpuRenderTarget(renderTarget) {\n    return this._gpuRenderTargetHash[renderTarget.uid] || (this._gpuRenderTargetHash[renderTarget.uid] = this.adaptor.initGpuRenderTarget(renderTarget));\n  }\n}\n\n\n//# sourceMappingURL=RenderTargetSystem.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9ncHUvcmVuZGVyVGFyZ2V0L2NhbGN1bGF0ZVByb2plY3Rpb24ubWpzPzQ2ZDgiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvcmVuZGVyVGFyZ2V0L2lzUmVuZGVyaW5nVG9TY3JlZW4ubWpzPzg4OTkiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvcmVuZGVyVGFyZ2V0L1JlbmRlclRhcmdldFN5c3RlbS5tanM/Zjc2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGNhbGN1bGF0ZVByb2plY3Rpb24ocG0sIHgsIHksIHdpZHRoLCBoZWlnaHQsIGZsaXBZKSB7XG4gIGNvbnN0IHNpZ24gPSBmbGlwWSA/IDEgOiAtMTtcbiAgcG0uaWRlbnRpdHkoKTtcbiAgcG0uYSA9IDEgLyB3aWR0aCAqIDI7XG4gIHBtLmQgPSBzaWduICogKDEgLyBoZWlnaHQgKiAyKTtcbiAgcG0udHggPSAtMSAtIHggKiBwbS5hO1xuICBwbS50eSA9IC1zaWduIC0geSAqIHBtLmQ7XG4gIHJldHVybiBwbTtcbn1cblxuZXhwb3J0IHsgY2FsY3VsYXRlUHJvamVjdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FsY3VsYXRlUHJvamVjdGlvbi5tanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGlzUmVuZGVyaW5nVG9TY3JlZW4ocmVuZGVyVGFyZ2V0KSB7XG4gIGNvbnN0IHJlc291cmNlID0gcmVuZGVyVGFyZ2V0LmNvbG9yVGV4dHVyZS5zb3VyY2UucmVzb3VyY2U7XG4gIHJldHVybiBnbG9iYWxUaGlzLkhUTUxDYW52YXNFbGVtZW50ICYmIHJlc291cmNlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQgJiYgZG9jdW1lbnQuYm9keS5jb250YWlucyhyZXNvdXJjZSk7XG59XG5cbmV4cG9ydCB7IGlzUmVuZGVyaW5nVG9TY3JlZW4gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzUmVuZGVyaW5nVG9TY3JlZW4ubWpzLm1hcFxuIiwiaW1wb3J0IHsgTWF0cml4IH0gZnJvbSAnLi4vLi4vLi4vLi4vbWF0aHMvbWF0cml4L01hdHJpeC5tanMnO1xuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSAnLi4vLi4vLi4vLi4vbWF0aHMvc2hhcGVzL1JlY3RhbmdsZS5tanMnO1xuaW1wb3J0IHsgQ0xFQVIgfSBmcm9tICcuLi8uLi9nbC9jb25zdC5tanMnO1xuaW1wb3J0IHsgY2FsY3VsYXRlUHJvamVjdGlvbiB9IGZyb20gJy4uLy4uL2dwdS9yZW5kZXJUYXJnZXQvY2FsY3VsYXRlUHJvamVjdGlvbi5tanMnO1xuaW1wb3J0IHsgU3lzdGVtUnVubmVyIH0gZnJvbSAnLi4vc3lzdGVtL1N5c3RlbVJ1bm5lci5tanMnO1xuaW1wb3J0IHsgQ2FudmFzU291cmNlIH0gZnJvbSAnLi4vdGV4dHVyZS9zb3VyY2VzL0NhbnZhc1NvdXJjZS5tanMnO1xuaW1wb3J0IHsgVGV4dHVyZVNvdXJjZSB9IGZyb20gJy4uL3RleHR1cmUvc291cmNlcy9UZXh0dXJlU291cmNlLm1qcyc7XG5pbXBvcnQgeyBUZXh0dXJlIH0gZnJvbSAnLi4vdGV4dHVyZS9UZXh0dXJlLm1qcyc7XG5pbXBvcnQgeyBnZXRDYW52YXNUZXh0dXJlIH0gZnJvbSAnLi4vdGV4dHVyZS91dGlscy9nZXRDYW52YXNUZXh0dXJlLm1qcyc7XG5pbXBvcnQgeyBpc1JlbmRlcmluZ1RvU2NyZWVuIH0gZnJvbSAnLi9pc1JlbmRlcmluZ1RvU2NyZWVuLm1qcyc7XG5pbXBvcnQgeyBSZW5kZXJUYXJnZXQgfSBmcm9tICcuL1JlbmRlclRhcmdldC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIFJlbmRlclRhcmdldFN5c3RlbSB7XG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyKSB7XG4gICAgLyoqIFRoaXMgaXMgdGhlIHJvb3Qgdmlld3BvcnQgZm9yIHRoZSByZW5kZXIgcGFzcyovXG4gICAgdGhpcy5yb290Vmlld1BvcnQgPSBuZXcgUmVjdGFuZ2xlKCk7XG4gICAgLyoqIHRoZSBjdXJyZW50IHZpZXdwb3J0IHRoYXQgdGhlIGdwdSBpcyB1c2luZyAqL1xuICAgIHRoaXMudmlld3BvcnQgPSBuZXcgUmVjdGFuZ2xlKCk7XG4gICAgLyoqXG4gICAgICogYSBydW5uZXIgdGhhdCBsZXRzIHN5c3RlbXMga25vdyBpZiB0aGUgYWN0aXZlIHJlbmRlciB0YXJnZXQgaGFzIGNoYW5nZWQuXG4gICAgICogRWcgdGhlIFN0ZW5jaWwgU3lzdGVtIG5lZWRzIHRvIGtub3cgc28gaXQgY2FuIG1hbmFnZSB0aGUgc3RlbmNpbCBidWZmZXJcbiAgICAgKi9cbiAgICB0aGlzLm9uUmVuZGVyVGFyZ2V0Q2hhbmdlID0gbmV3IFN5c3RlbVJ1bm5lcihcIm9uUmVuZGVyVGFyZ2V0Q2hhbmdlXCIpO1xuICAgIC8qKiB0aGUgcHJvamVjdGlvbiBtYXRyaXggdGhhdCBpcyB1c2VkIGJ5IHRoZSBzaGFkZXJzIGJhc2VkIG9uIHRoZSBhY3RpdmUgcmVuZGVyIHRhcmdldCBhbmQgdGhlIHZpZXdwb3J0ICovXG4gICAgdGhpcy5wcm9qZWN0aW9uTWF0cml4ID0gbmV3IE1hdHJpeCgpO1xuICAgIC8qKiB0aGUgZGVmYXVsdCBjbGVhciBjb2xvciBmb3IgcmVuZGVyIHRhcmdldHMgKi9cbiAgICB0aGlzLmRlZmF1bHRDbGVhckNvbG9yID0gWzAsIDAsIDAsIDBdO1xuICAgIC8qKlxuICAgICAqIGEgaGFzaCB0aGF0IHN0b3JlcyB0aGUgcmVuZGVyIHRhcmdldCBmb3IgYSBnaXZlbiByZW5kZXIgc3VyZmFjZS4gV2hlbiB5b3UgcGFzcyBpbiBhIHRleHR1cmUgc291cmNlLFxuICAgICAqIGEgcmVuZGVyIHRhcmdldCBpcyBjcmVhdGVkIGZvciBpdC4gVGhpcyBtYXAgc3RvcmVzIGFuZCBtYWtlcyBpdCBlYXN5IHRvIHJldHJpZXZlIHRoZSByZW5kZXIgdGFyZ2V0XG4gICAgICovXG4gICAgdGhpcy5fcmVuZGVyU3VyZmFjZVRvUmVuZGVyVGFyZ2V0SGFzaCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgLyoqIEEgaGFzaCB0aGF0IHN0b3JlcyBhIGdwdSByZW5kZXIgdGFyZ2V0IGZvciBhIGdpdmVuIHJlbmRlciB0YXJnZXQuICovXG4gICAgdGhpcy5fZ3B1UmVuZGVyVGFyZ2V0SGFzaCA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIC8qKlxuICAgICAqIEEgc3RhY2sgdGhhdCBzdG9yZXMgdGhlIHJlbmRlciB0YXJnZXQgYW5kIGZyYW1lIHRoYXQgaXMgY3VycmVudGx5IGJlaW5nIHJlbmRlcmVkIHRvLlxuICAgICAqIFdoZW4gcHVzaCBpcyBjYWxsZWQsIHRoZSBjdXJyZW50IHJlbmRlciB0YXJnZXQgaXMgc3RvcmVkIGluIHRoaXMgc3RhY2suXG4gICAgICogV2hlbiBwb3AgaXMgY2FsbGVkLCB0aGUgcHJldmlvdXMgcmVuZGVyIHRhcmdldCBpcyByZXN0b3JlZC5cbiAgICAgKi9cbiAgICB0aGlzLl9yZW5kZXJUYXJnZXRTdGFjayA9IFtdO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gIH1cbiAgLyoqIGNhbGxlZCB3aGVuIGRldiB3YW50cyB0byBmaW5pc2ggYSByZW5kZXIgcGFzcyAqL1xuICBmaW5pc2hSZW5kZXJQYXNzKCkge1xuICAgIHRoaXMuYWRhcHRvci5maW5pc2hSZW5kZXJQYXNzKHRoaXMucmVuZGVyVGFyZ2V0KTtcbiAgfVxuICAvKipcbiAgICogY2FsbGVkIHdoZW4gdGhlIHJlbmRlcmVyIHN0YXJ0cyB0byByZW5kZXIgYSBzY2VuZS5cbiAgICogQHBhcmFtIG9wdGlvbnNcbiAgICogQHBhcmFtIG9wdGlvbnMudGFyZ2V0IC0gdGhlIHJlbmRlciB0YXJnZXQgdG8gcmVuZGVyIHRvXG4gICAqIEBwYXJhbSBvcHRpb25zLmNsZWFyIC0gdGhlIGNsZWFyIG1vZGUgdG8gdXNlLiBDYW4gYmUgdHJ1ZSBvciBhIENMRUFSIG51bWJlciAnQ09MT1IgfCBERVBUSCB8IFNURU5DSUwnIDBiMTExXG4gICAqIEBwYXJhbSBvcHRpb25zLmNsZWFyQ29sb3IgLSB0aGUgY29sb3IgdG8gY2xlYXIgdG9cbiAgICogQHBhcmFtIG9wdGlvbnMuZnJhbWUgLSB0aGUgZnJhbWUgdG8gcmVuZGVyIHRvXG4gICAqL1xuICByZW5kZXJTdGFydCh7XG4gICAgdGFyZ2V0LFxuICAgIGNsZWFyLFxuICAgIGNsZWFyQ29sb3IsXG4gICAgZnJhbWVcbiAgfSkge1xuICAgIHRoaXMuX3JlbmRlclRhcmdldFN0YWNrLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5wdXNoKFxuICAgICAgdGFyZ2V0LFxuICAgICAgY2xlYXIsXG4gICAgICBjbGVhckNvbG9yLFxuICAgICAgZnJhbWVcbiAgICApO1xuICAgIHRoaXMucm9vdFZpZXdQb3J0LmNvcHlGcm9tKHRoaXMudmlld3BvcnQpO1xuICAgIHRoaXMucm9vdFJlbmRlclRhcmdldCA9IHRoaXMucmVuZGVyVGFyZ2V0O1xuICAgIHRoaXMucmVuZGVyaW5nVG9TY3JlZW4gPSBpc1JlbmRlcmluZ1RvU2NyZWVuKHRoaXMucm9vdFJlbmRlclRhcmdldCk7XG4gIH1cbiAgLyoqXG4gICAqIEJpbmRpbmcgYSByZW5kZXIgc3VyZmFjZSEgVGhpcyBpcyB0aGUgbWFpbiBmdW5jdGlvbiBvZiB0aGUgcmVuZGVyIHRhcmdldCBzeXN0ZW0uXG4gICAqIEl0IHdpbGwgdGFrZSB0aGUgUmVuZGVyU3VyZmFjZSAod2hpY2ggY2FuIGJlIGEgdGV4dHVyZSwgY2FudmFzLCBvciByZW5kZXIgdGFyZ2V0KSBhbmQgYmluZCBpdCB0byB0aGUgcmVuZGVyZXIuXG4gICAqIE9uY2UgYm91bmQgYWxsIGRyYXcgY2FsbHMgd2lsbCBiZSByZW5kZXJlZCB0byB0aGUgcmVuZGVyIHN1cmZhY2UuXG4gICAqXG4gICAqIElmIGEgZnJhbWUgaXMgbm90IHByb3ZpZGUgYW5kIHRoZSByZW5kZXIgc3VyZmFjZSBpcyBhIHRleHR1cmUsIHRoZSBmcmFtZSBvZiB0aGUgdGV4dHVyZSB3aWxsIGJlIHVzZWQuXG4gICAqIEBwYXJhbSByZW5kZXJTdXJmYWNlIC0gdGhlIHJlbmRlciBzdXJmYWNlIHRvIGJpbmRcbiAgICogQHBhcmFtIGNsZWFyIC0gdGhlIGNsZWFyIG1vZGUgdG8gdXNlLiBDYW4gYmUgdHJ1ZSBvciBhIENMRUFSIG51bWJlciAnQ09MT1IgfCBERVBUSCB8IFNURU5DSUwnIDBiMTExXG4gICAqIEBwYXJhbSBjbGVhckNvbG9yIC0gdGhlIGNvbG9yIHRvIGNsZWFyIHRvXG4gICAqIEBwYXJhbSBmcmFtZSAtIHRoZSBmcmFtZSB0byByZW5kZXIgdG9cbiAgICogQHJldHVybnMgdGhlIHJlbmRlciB0YXJnZXQgdGhhdCB3YXMgYm91bmRcbiAgICovXG4gIGJpbmQocmVuZGVyU3VyZmFjZSwgY2xlYXIgPSB0cnVlLCBjbGVhckNvbG9yLCBmcmFtZSkge1xuICAgIGNvbnN0IHJlbmRlclRhcmdldCA9IHRoaXMuZ2V0UmVuZGVyVGFyZ2V0KHJlbmRlclN1cmZhY2UpO1xuICAgIGNvbnN0IGRpZENoYW5nZSA9IHRoaXMucmVuZGVyVGFyZ2V0ICE9PSByZW5kZXJUYXJnZXQ7XG4gICAgdGhpcy5yZW5kZXJUYXJnZXQgPSByZW5kZXJUYXJnZXQ7XG4gICAgdGhpcy5yZW5kZXJTdXJmYWNlID0gcmVuZGVyU3VyZmFjZTtcbiAgICBjb25zdCBncHVSZW5kZXJUYXJnZXQgPSB0aGlzLmdldEdwdVJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQpO1xuICAgIGlmIChyZW5kZXJUYXJnZXQucGl4ZWxXaWR0aCAhPT0gZ3B1UmVuZGVyVGFyZ2V0LndpZHRoIHx8IHJlbmRlclRhcmdldC5waXhlbEhlaWdodCAhPT0gZ3B1UmVuZGVyVGFyZ2V0LmhlaWdodCkge1xuICAgICAgdGhpcy5hZGFwdG9yLnJlc2l6ZUdwdVJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQpO1xuICAgICAgZ3B1UmVuZGVyVGFyZ2V0LndpZHRoID0gcmVuZGVyVGFyZ2V0LnBpeGVsV2lkdGg7XG4gICAgICBncHVSZW5kZXJUYXJnZXQuaGVpZ2h0ID0gcmVuZGVyVGFyZ2V0LnBpeGVsSGVpZ2h0O1xuICAgIH1cbiAgICBjb25zdCBzb3VyY2UgPSByZW5kZXJUYXJnZXQuY29sb3JUZXh0dXJlO1xuICAgIGNvbnN0IHZpZXdwb3J0ID0gdGhpcy52aWV3cG9ydDtcbiAgICBjb25zdCBwaXhlbFdpZHRoID0gc291cmNlLnBpeGVsV2lkdGg7XG4gICAgY29uc3QgcGl4ZWxIZWlnaHQgPSBzb3VyY2UucGl4ZWxIZWlnaHQ7XG4gICAgaWYgKCFmcmFtZSAmJiByZW5kZXJTdXJmYWNlIGluc3RhbmNlb2YgVGV4dHVyZSkge1xuICAgICAgZnJhbWUgPSByZW5kZXJTdXJmYWNlLmZyYW1lO1xuICAgIH1cbiAgICBpZiAoZnJhbWUpIHtcbiAgICAgIGNvbnN0IHJlc29sdXRpb24gPSBzb3VyY2UuX3Jlc29sdXRpb247XG4gICAgICB2aWV3cG9ydC54ID0gZnJhbWUueCAqIHJlc29sdXRpb24gKyAwLjUgfCAwO1xuICAgICAgdmlld3BvcnQueSA9IGZyYW1lLnkgKiByZXNvbHV0aW9uICsgMC41IHwgMDtcbiAgICAgIHZpZXdwb3J0LndpZHRoID0gZnJhbWUud2lkdGggKiByZXNvbHV0aW9uICsgMC41IHwgMDtcbiAgICAgIHZpZXdwb3J0LmhlaWdodCA9IGZyYW1lLmhlaWdodCAqIHJlc29sdXRpb24gKyAwLjUgfCAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB2aWV3cG9ydC54ID0gMDtcbiAgICAgIHZpZXdwb3J0LnkgPSAwO1xuICAgICAgdmlld3BvcnQud2lkdGggPSBwaXhlbFdpZHRoO1xuICAgICAgdmlld3BvcnQuaGVpZ2h0ID0gcGl4ZWxIZWlnaHQ7XG4gICAgfVxuICAgIGNhbGN1bGF0ZVByb2plY3Rpb24oXG4gICAgICB0aGlzLnByb2plY3Rpb25NYXRyaXgsXG4gICAgICAwLFxuICAgICAgMCxcbiAgICAgIHZpZXdwb3J0LndpZHRoIC8gc291cmNlLnJlc29sdXRpb24sXG4gICAgICB2aWV3cG9ydC5oZWlnaHQgLyBzb3VyY2UucmVzb2x1dGlvbixcbiAgICAgICFyZW5kZXJUYXJnZXQuaXNSb290XG4gICAgKTtcbiAgICB0aGlzLmFkYXB0b3Iuc3RhcnRSZW5kZXJQYXNzKHJlbmRlclRhcmdldCwgY2xlYXIsIGNsZWFyQ29sb3IsIHZpZXdwb3J0KTtcbiAgICBpZiAoZGlkQ2hhbmdlKSB7XG4gICAgICB0aGlzLm9uUmVuZGVyVGFyZ2V0Q2hhbmdlLmVtaXQocmVuZGVyVGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbmRlclRhcmdldDtcbiAgfVxuICBjbGVhcih0YXJnZXQsIGNsZWFyID0gQ0xFQVIuQUxMLCBjbGVhckNvbG9yKSB7XG4gICAgaWYgKCFjbGVhcilcbiAgICAgIHJldHVybjtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICB0YXJnZXQgPSB0aGlzLmdldFJlbmRlclRhcmdldCh0YXJnZXQpO1xuICAgIH1cbiAgICB0aGlzLmFkYXB0b3IuY2xlYXIoXG4gICAgICB0YXJnZXQgfHwgdGhpcy5yZW5kZXJUYXJnZXQsXG4gICAgICBjbGVhcixcbiAgICAgIGNsZWFyQ29sb3IsXG4gICAgICB0aGlzLnZpZXdwb3J0XG4gICAgKTtcbiAgfVxuICBjb250ZXh0Q2hhbmdlKCkge1xuICAgIHRoaXMuX2dwdVJlbmRlclRhcmdldEhhc2ggPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICAvKipcbiAgICogUHVzaCBhIHJlbmRlciBzdXJmYWNlIHRvIHRoZSByZW5kZXJlci4gVGhpcyB3aWxsIGJpbmQgdGhlIHJlbmRlciBzdXJmYWNlIHRvIHRoZSByZW5kZXJlcixcbiAgICogQHBhcmFtIHJlbmRlclN1cmZhY2UgLSB0aGUgcmVuZGVyIHN1cmZhY2UgdG8gcHVzaFxuICAgKiBAcGFyYW0gY2xlYXIgLSB0aGUgY2xlYXIgbW9kZSB0byB1c2UuIENhbiBiZSB0cnVlIG9yIGEgQ0xFQVIgbnVtYmVyICdDT0xPUiB8IERFUFRIIHwgU1RFTkNJTCcgMGIxMTFcbiAgICogQHBhcmFtIGNsZWFyQ29sb3IgLSB0aGUgY29sb3IgdG8gY2xlYXIgdG9cbiAgICogQHBhcmFtIGZyYW1lIC0gdGhlIGZyYW1lIHRvIHVzZSB3aGVuIHJlbmRlcmluZyB0byB0aGUgcmVuZGVyIHN1cmZhY2VcbiAgICovXG4gIHB1c2gocmVuZGVyU3VyZmFjZSwgY2xlYXIgPSBDTEVBUi5BTEwsIGNsZWFyQ29sb3IsIGZyYW1lKSB7XG4gICAgY29uc3QgcmVuZGVyVGFyZ2V0ID0gdGhpcy5iaW5kKHJlbmRlclN1cmZhY2UsIGNsZWFyLCBjbGVhckNvbG9yLCBmcmFtZSk7XG4gICAgdGhpcy5fcmVuZGVyVGFyZ2V0U3RhY2sucHVzaCh7XG4gICAgICByZW5kZXJUYXJnZXQsXG4gICAgICBmcmFtZVxuICAgIH0pO1xuICAgIHJldHVybiByZW5kZXJUYXJnZXQ7XG4gIH1cbiAgLyoqIFBvcHMgdGhlIGN1cnJlbnQgcmVuZGVyIHRhcmdldCBmcm9tIHRoZSByZW5kZXJlciBhbmQgcmVzdG9yZXMgdGhlIHByZXZpb3VzIHJlbmRlciB0YXJnZXQuICovXG4gIHBvcCgpIHtcbiAgICB0aGlzLl9yZW5kZXJUYXJnZXRTdGFjay5wb3AoKTtcbiAgICBjb25zdCBjdXJyZW50UmVuZGVyVGFyZ2V0RGF0YSA9IHRoaXMuX3JlbmRlclRhcmdldFN0YWNrW3RoaXMuX3JlbmRlclRhcmdldFN0YWNrLmxlbmd0aCAtIDFdO1xuICAgIHRoaXMuYmluZChjdXJyZW50UmVuZGVyVGFyZ2V0RGF0YS5yZW5kZXJUYXJnZXQsIGZhbHNlLCBudWxsLCBjdXJyZW50UmVuZGVyVGFyZ2V0RGF0YS5mcmFtZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIHJlbmRlciB0YXJnZXQgZnJvbSB0aGUgcHJvdmlkZSByZW5kZXIgc3VyZmFjZS4gRWcgaWYgaXRzIGEgdGV4dHVyZSxcbiAgICogaXQgd2lsbCByZXR1cm4gdGhlIHJlbmRlciB0YXJnZXQgZm9yIHRoZSB0ZXh0dXJlLlxuICAgKiBJZiBpdHMgYSByZW5kZXIgdGFyZ2V0LCBpdCB3aWxsIHJldHVybiB0aGUgc2FtZSByZW5kZXIgdGFyZ2V0LlxuICAgKiBAcGFyYW0gcmVuZGVyU3VyZmFjZSAtIHRoZSByZW5kZXIgc3VyZmFjZSB0byBnZXQgdGhlIHJlbmRlciB0YXJnZXQgZm9yXG4gICAqIEByZXR1cm5zIHRoZSByZW5kZXIgdGFyZ2V0IGZvciB0aGUgcmVuZGVyIHN1cmZhY2VcbiAgICovXG4gIGdldFJlbmRlclRhcmdldChyZW5kZXJTdXJmYWNlKSB7XG4gICAgaWYgKHJlbmRlclN1cmZhY2UuaXNUZXh0dXJlKSB7XG4gICAgICByZW5kZXJTdXJmYWNlID0gcmVuZGVyU3VyZmFjZS5zb3VyY2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9yZW5kZXJTdXJmYWNlVG9SZW5kZXJUYXJnZXRIYXNoLmdldChyZW5kZXJTdXJmYWNlKSA/PyB0aGlzLl9pbml0UmVuZGVyVGFyZ2V0KHJlbmRlclN1cmZhY2UpO1xuICB9XG4gIC8qKlxuICAgKiBDb3BpZXMgYSByZW5kZXIgc3VyZmFjZSB0byBhbm90aGVyIHRleHR1cmVcbiAgICogQHBhcmFtIHNvdXJjZVJlbmRlclN1cmZhY2VUZXh0dXJlIC0gdGhlIHJlbmRlciBzdXJmYWNlIHRvIGNvcHkgZnJvbVxuICAgKiBAcGFyYW0gZGVzdGluYXRpb25UZXh0dXJlIC0gdGhlIHRleHR1cmUgdG8gY29weSB0b1xuICAgKiBAcGFyYW0gb3JpZ2luU3JjIC0gdGhlIG9yaWdpbiBvZiB0aGUgY29weVxuICAgKiBAcGFyYW0gb3JpZ2luU3JjLnggLSB0aGUgeCBvcmlnaW4gb2YgdGhlIGNvcHlcbiAgICogQHBhcmFtIG9yaWdpblNyYy55IC0gdGhlIHkgb3JpZ2luIG9mIHRoZSBjb3B5XG4gICAqIEBwYXJhbSBzaXplIC0gdGhlIHNpemUgb2YgdGhlIGNvcHlcbiAgICogQHBhcmFtIHNpemUud2lkdGggLSB0aGUgd2lkdGggb2YgdGhlIGNvcHlcbiAgICogQHBhcmFtIHNpemUuaGVpZ2h0IC0gdGhlIGhlaWdodCBvZiB0aGUgY29weVxuICAgKiBAcGFyYW0gb3JpZ2luRGVzdCAtIHRoZSBkZXN0aW5hdGlvbiBvcmlnaW4gKHRvcCBsZWZ0IHRvIHBhc3RlIGZyb20hKVxuICAgKiBAcGFyYW0gb3JpZ2luRGVzdC54IC0gdGhlIHggb3JpZ2luIG9mIHRoZSBwYXN0ZVxuICAgKiBAcGFyYW0gb3JpZ2luRGVzdC55IC0gdGhlIHkgb3JpZ2luIG9mIHRoZSBwYXN0ZVxuICAgKi9cbiAgY29weVRvVGV4dHVyZShzb3VyY2VSZW5kZXJTdXJmYWNlVGV4dHVyZSwgZGVzdGluYXRpb25UZXh0dXJlLCBvcmlnaW5TcmMsIHNpemUsIG9yaWdpbkRlc3QpIHtcbiAgICBpZiAob3JpZ2luU3JjLnggPCAwKSB7XG4gICAgICBzaXplLndpZHRoICs9IG9yaWdpblNyYy54O1xuICAgICAgb3JpZ2luRGVzdC54IC09IG9yaWdpblNyYy54O1xuICAgICAgb3JpZ2luU3JjLnggPSAwO1xuICAgIH1cbiAgICBpZiAob3JpZ2luU3JjLnkgPCAwKSB7XG4gICAgICBzaXplLmhlaWdodCArPSBvcmlnaW5TcmMueTtcbiAgICAgIG9yaWdpbkRlc3QueSAtPSBvcmlnaW5TcmMueTtcbiAgICAgIG9yaWdpblNyYy55ID0gMDtcbiAgICB9XG4gICAgY29uc3QgeyBwaXhlbFdpZHRoLCBwaXhlbEhlaWdodCB9ID0gc291cmNlUmVuZGVyU3VyZmFjZVRleHR1cmU7XG4gICAgc2l6ZS53aWR0aCA9IE1hdGgubWluKHNpemUud2lkdGgsIHBpeGVsV2lkdGggLSBvcmlnaW5TcmMueCk7XG4gICAgc2l6ZS5oZWlnaHQgPSBNYXRoLm1pbihzaXplLmhlaWdodCwgcGl4ZWxIZWlnaHQgLSBvcmlnaW5TcmMueSk7XG4gICAgcmV0dXJuIHRoaXMuYWRhcHRvci5jb3B5VG9UZXh0dXJlKFxuICAgICAgc291cmNlUmVuZGVyU3VyZmFjZVRleHR1cmUsXG4gICAgICBkZXN0aW5hdGlvblRleHR1cmUsXG4gICAgICBvcmlnaW5TcmMsXG4gICAgICBzaXplLFxuICAgICAgb3JpZ2luRGVzdFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIGVuc3VyZXMgdGhhdCB3ZSBoYXZlIGEgZGVwdGggc3RlbmNpbCBidWZmZXIgYXZhaWxhYmxlIHRvIHJlbmRlciB0b1xuICAgKiBUaGlzIGlzIHVzZWQgYnkgdGhlIG1hc2sgc3lzdGVtIHRvIG1ha2Ugc3VyZSB3ZSBoYXZlIGEgc3RlbmNpbCBidWZmZXIuXG4gICAqL1xuICBlbnN1cmVEZXB0aFN0ZW5jaWwoKSB7XG4gICAgaWYgKCF0aGlzLnJlbmRlclRhcmdldC5zdGVuY2lsKSB7XG4gICAgICB0aGlzLnJlbmRlclRhcmdldC5zdGVuY2lsID0gdHJ1ZTtcbiAgICAgIHRoaXMuYWRhcHRvci5zdGFydFJlbmRlclBhc3ModGhpcy5yZW5kZXJUYXJnZXQsIGZhbHNlLCBudWxsLCB0aGlzLnZpZXdwb3J0KTtcbiAgICB9XG4gIH1cbiAgLyoqIG51a2VzIHRoZSByZW5kZXIgdGFyZ2V0IHN5c3RlbSAqL1xuICBkZXN0cm95KCkge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gbnVsbDtcbiAgICB0aGlzLl9yZW5kZXJTdXJmYWNlVG9SZW5kZXJUYXJnZXRIYXNoLmZvckVhY2goKHJlbmRlclRhcmdldCwga2V5KSA9PiB7XG4gICAgICBpZiAocmVuZGVyVGFyZ2V0ICE9PSBrZXkpIHtcbiAgICAgICAgcmVuZGVyVGFyZ2V0LmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9yZW5kZXJTdXJmYWNlVG9SZW5kZXJUYXJnZXRIYXNoLmNsZWFyKCk7XG4gICAgdGhpcy5fZ3B1UmVuZGVyVGFyZ2V0SGFzaCA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG4gIF9pbml0UmVuZGVyVGFyZ2V0KHJlbmRlclN1cmZhY2UpIHtcbiAgICBsZXQgcmVuZGVyVGFyZ2V0ID0gbnVsbDtcbiAgICBpZiAoQ2FudmFzU291cmNlLnRlc3QocmVuZGVyU3VyZmFjZSkpIHtcbiAgICAgIHJlbmRlclN1cmZhY2UgPSBnZXRDYW52YXNUZXh0dXJlKHJlbmRlclN1cmZhY2UpLnNvdXJjZTtcbiAgICB9XG4gICAgaWYgKHJlbmRlclN1cmZhY2UgaW5zdGFuY2VvZiBSZW5kZXJUYXJnZXQpIHtcbiAgICAgIHJlbmRlclRhcmdldCA9IHJlbmRlclN1cmZhY2U7XG4gICAgfSBlbHNlIGlmIChyZW5kZXJTdXJmYWNlIGluc3RhbmNlb2YgVGV4dHVyZVNvdXJjZSkge1xuICAgICAgcmVuZGVyVGFyZ2V0ID0gbmV3IFJlbmRlclRhcmdldCh7XG4gICAgICAgIGNvbG9yVGV4dHVyZXM6IFtyZW5kZXJTdXJmYWNlXVxuICAgICAgfSk7XG4gICAgICBpZiAoQ2FudmFzU291cmNlLnRlc3QocmVuZGVyU3VyZmFjZS5zb3VyY2UucmVzb3VyY2UpKSB7XG4gICAgICAgIHJlbmRlclRhcmdldC5pc1Jvb3QgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmVuZGVyU3VyZmFjZS5vbmNlKFwiZGVzdHJveVwiLCAoKSA9PiB7XG4gICAgICAgIHJlbmRlclRhcmdldC5kZXN0cm95KCk7XG4gICAgICAgIGNvbnN0IGdwdVJlbmRlclRhcmdldCA9IHRoaXMuX2dwdVJlbmRlclRhcmdldEhhc2hbcmVuZGVyVGFyZ2V0LnVpZF07XG4gICAgICAgIGlmIChncHVSZW5kZXJUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLl9ncHVSZW5kZXJUYXJnZXRIYXNoW3JlbmRlclRhcmdldC51aWRdID0gbnVsbDtcbiAgICAgICAgICB0aGlzLmFkYXB0b3IuZGVzdHJveUdwdVJlbmRlclRhcmdldChncHVSZW5kZXJUYXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5fcmVuZGVyU3VyZmFjZVRvUmVuZGVyVGFyZ2V0SGFzaC5zZXQocmVuZGVyU3VyZmFjZSwgcmVuZGVyVGFyZ2V0KTtcbiAgICByZXR1cm4gcmVuZGVyVGFyZ2V0O1xuICB9XG4gIGdldEdwdVJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQpIHtcbiAgICByZXR1cm4gdGhpcy5fZ3B1UmVuZGVyVGFyZ2V0SGFzaFtyZW5kZXJUYXJnZXQudWlkXSB8fCAodGhpcy5fZ3B1UmVuZGVyVGFyZ2V0SGFzaFtyZW5kZXJUYXJnZXQudWlkXSA9IHRoaXMuYWRhcHRvci5pbml0R3B1UmVuZGVyVGFyZ2V0KHJlbmRlclRhcmdldCkpO1xuICB9XG59XG5cbmV4cG9ydCB7IFJlbmRlclRhcmdldFN5c3RlbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVuZGVyVGFyZ2V0U3lzdGVtLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2028\n")},8809:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   L: () => (/* binding */ UboSystem)\n/* harmony export */ });\n/* harmony import */ var _utils_browser_unsafeEvalSupported_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1013);\n/* harmony import */ var _buffer_Buffer_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7494);\n/* harmony import */ var _buffer_const_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5324);\n\n\n\n\n"use strict";\nclass UboSystem {\n  constructor(adaptor) {\n    /** Cache of uniform buffer layouts and sync functions, so we don\'t have to re-create them */\n    this._syncFunctionHash = /* @__PURE__ */ Object.create(null);\n    this._adaptor = adaptor;\n    this._systemCheck();\n  }\n  /**\n   * Overridable function by `pixi.js/unsafe-eval` to silence\n   * throwing an error if platform doesn\'t support unsafe-evals.\n   * @private\n   */\n  _systemCheck() {\n    if (!(0,_utils_browser_unsafeEvalSupported_mjs__WEBPACK_IMPORTED_MODULE_0__/* .unsafeEvalSupported */ .O)()) {\n      throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.");\n    }\n  }\n  ensureUniformGroup(uniformGroup) {\n    const uniformData = this.getUniformGroupData(uniformGroup);\n    uniformGroup.buffer || (uniformGroup.buffer = new _buffer_Buffer_mjs__WEBPACK_IMPORTED_MODULE_1__/* .Buffer */ .l({\n      data: new Float32Array(uniformData.layout.size / 4),\n      usage: _buffer_const_mjs__WEBPACK_IMPORTED_MODULE_2__/* .BufferUsage */ .F.UNIFORM | _buffer_const_mjs__WEBPACK_IMPORTED_MODULE_2__/* .BufferUsage */ .F.COPY_DST\n    }));\n  }\n  getUniformGroupData(uniformGroup) {\n    return this._syncFunctionHash[uniformGroup._signature] || this._initUniformGroup(uniformGroup);\n  }\n  _initUniformGroup(uniformGroup) {\n    const uniformGroupSignature = uniformGroup._signature;\n    let uniformData = this._syncFunctionHash[uniformGroupSignature];\n    if (!uniformData) {\n      const elements = Object.keys(uniformGroup.uniformStructures).map((i) => uniformGroup.uniformStructures[i]);\n      const layout = this._adaptor.createUboElements(elements);\n      const syncFunction = this._generateUboSync(layout.uboElements);\n      uniformData = this._syncFunctionHash[uniformGroupSignature] = {\n        layout,\n        syncFunction\n      };\n    }\n    return this._syncFunctionHash[uniformGroupSignature];\n  }\n  _generateUboSync(uboElements) {\n    return this._adaptor.generateUboSync(uboElements);\n  }\n  syncUniformGroup(uniformGroup, data, offset) {\n    const uniformGroupData = this.getUniformGroupData(uniformGroup);\n    uniformGroup.buffer || (uniformGroup.buffer = new _buffer_Buffer_mjs__WEBPACK_IMPORTED_MODULE_1__/* .Buffer */ .l({\n      data: new Float32Array(uniformGroupData.layout.size / 4),\n      usage: _buffer_const_mjs__WEBPACK_IMPORTED_MODULE_2__/* .BufferUsage */ .F.UNIFORM | _buffer_const_mjs__WEBPACK_IMPORTED_MODULE_2__/* .BufferUsage */ .F.COPY_DST\n    }));\n    data || (data = uniformGroup.buffer.data);\n    offset || (offset = 0);\n    uniformGroupData.syncFunction(uniformGroup.uniforms, data, offset);\n    return true;\n  }\n  updateUniformGroup(uniformGroup) {\n    if (uniformGroup.isStatic && !uniformGroup._dirtyId)\n      return false;\n    uniformGroup._dirtyId = 0;\n    const synced = this.syncUniformGroup(uniformGroup);\n    uniformGroup.buffer.update();\n    return synced;\n  }\n  destroy() {\n    this._syncFunctionHash = null;\n  }\n}\n\n\n//# sourceMappingURL=UboSystem.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODgwOS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0Y7QUFDMUM7QUFDSTs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsb0dBQW1CO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsK0RBQU07QUFDNUQ7QUFDQSxhQUFhLG1FQUFXLFdBQVcsbUVBQVc7QUFDOUMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsK0RBQU07QUFDNUQ7QUFDQSxhQUFhLG1FQUFXLFdBQVcsbUVBQVc7QUFDOUMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXFCO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvc2hhZGVyL1Vib1N5c3RlbS5tanM/Zjc4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1bnNhZmVFdmFsU3VwcG9ydGVkIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvYnJvd3Nlci91bnNhZmVFdmFsU3VwcG9ydGVkLm1qcyc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICcuLi9idWZmZXIvQnVmZmVyLm1qcyc7XG5pbXBvcnQgeyBCdWZmZXJVc2FnZSB9IGZyb20gJy4uL2J1ZmZlci9jb25zdC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIFVib1N5c3RlbSB7XG4gIGNvbnN0cnVjdG9yKGFkYXB0b3IpIHtcbiAgICAvKiogQ2FjaGUgb2YgdW5pZm9ybSBidWZmZXIgbGF5b3V0cyBhbmQgc3luYyBmdW5jdGlvbnMsIHNvIHdlIGRvbid0IGhhdmUgdG8gcmUtY3JlYXRlIHRoZW0gKi9cbiAgICB0aGlzLl9zeW5jRnVuY3Rpb25IYXNoID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fYWRhcHRvciA9IGFkYXB0b3I7XG4gICAgdGhpcy5fc3lzdGVtQ2hlY2soKTtcbiAgfVxuICAvKipcbiAgICogT3ZlcnJpZGFibGUgZnVuY3Rpb24gYnkgYHBpeGkuanMvdW5zYWZlLWV2YWxgIHRvIHNpbGVuY2VcbiAgICogdGhyb3dpbmcgYW4gZXJyb3IgaWYgcGxhdGZvcm0gZG9lc24ndCBzdXBwb3J0IHVuc2FmZS1ldmFscy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9zeXN0ZW1DaGVjaygpIHtcbiAgICBpZiAoIXVuc2FmZUV2YWxTdXBwb3J0ZWQoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3VycmVudCBlbnZpcm9ubWVudCBkb2VzIG5vdCBhbGxvdyB1bnNhZmUtZXZhbCwgcGxlYXNlIHVzZSBwaXhpLmpzL3Vuc2FmZS1ldmFsIG1vZHVsZSB0byBlbmFibGUgc3VwcG9ydC5cIik7XG4gICAgfVxuICB9XG4gIGVuc3VyZVVuaWZvcm1Hcm91cCh1bmlmb3JtR3JvdXApIHtcbiAgICBjb25zdCB1bmlmb3JtRGF0YSA9IHRoaXMuZ2V0VW5pZm9ybUdyb3VwRGF0YSh1bmlmb3JtR3JvdXApO1xuICAgIHVuaWZvcm1Hcm91cC5idWZmZXIgfHwgKHVuaWZvcm1Hcm91cC5idWZmZXIgPSBuZXcgQnVmZmVyKHtcbiAgICAgIGRhdGE6IG5ldyBGbG9hdDMyQXJyYXkodW5pZm9ybURhdGEubGF5b3V0LnNpemUgLyA0KSxcbiAgICAgIHVzYWdlOiBCdWZmZXJVc2FnZS5VTklGT1JNIHwgQnVmZmVyVXNhZ2UuQ09QWV9EU1RcbiAgICB9KSk7XG4gIH1cbiAgZ2V0VW5pZm9ybUdyb3VwRGF0YSh1bmlmb3JtR3JvdXApIHtcbiAgICByZXR1cm4gdGhpcy5fc3luY0Z1bmN0aW9uSGFzaFt1bmlmb3JtR3JvdXAuX3NpZ25hdHVyZV0gfHwgdGhpcy5faW5pdFVuaWZvcm1Hcm91cCh1bmlmb3JtR3JvdXApO1xuICB9XG4gIF9pbml0VW5pZm9ybUdyb3VwKHVuaWZvcm1Hcm91cCkge1xuICAgIGNvbnN0IHVuaWZvcm1Hcm91cFNpZ25hdHVyZSA9IHVuaWZvcm1Hcm91cC5fc2lnbmF0dXJlO1xuICAgIGxldCB1bmlmb3JtRGF0YSA9IHRoaXMuX3N5bmNGdW5jdGlvbkhhc2hbdW5pZm9ybUdyb3VwU2lnbmF0dXJlXTtcbiAgICBpZiAoIXVuaWZvcm1EYXRhKSB7XG4gICAgICBjb25zdCBlbGVtZW50cyA9IE9iamVjdC5rZXlzKHVuaWZvcm1Hcm91cC51bmlmb3JtU3RydWN0dXJlcykubWFwKChpKSA9PiB1bmlmb3JtR3JvdXAudW5pZm9ybVN0cnVjdHVyZXNbaV0pO1xuICAgICAgY29uc3QgbGF5b3V0ID0gdGhpcy5fYWRhcHRvci5jcmVhdGVVYm9FbGVtZW50cyhlbGVtZW50cyk7XG4gICAgICBjb25zdCBzeW5jRnVuY3Rpb24gPSB0aGlzLl9nZW5lcmF0ZVVib1N5bmMobGF5b3V0LnVib0VsZW1lbnRzKTtcbiAgICAgIHVuaWZvcm1EYXRhID0gdGhpcy5fc3luY0Z1bmN0aW9uSGFzaFt1bmlmb3JtR3JvdXBTaWduYXR1cmVdID0ge1xuICAgICAgICBsYXlvdXQsXG4gICAgICAgIHN5bmNGdW5jdGlvblxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3N5bmNGdW5jdGlvbkhhc2hbdW5pZm9ybUdyb3VwU2lnbmF0dXJlXTtcbiAgfVxuICBfZ2VuZXJhdGVVYm9TeW5jKHVib0VsZW1lbnRzKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkYXB0b3IuZ2VuZXJhdGVVYm9TeW5jKHVib0VsZW1lbnRzKTtcbiAgfVxuICBzeW5jVW5pZm9ybUdyb3VwKHVuaWZvcm1Hcm91cCwgZGF0YSwgb2Zmc2V0KSB7XG4gICAgY29uc3QgdW5pZm9ybUdyb3VwRGF0YSA9IHRoaXMuZ2V0VW5pZm9ybUdyb3VwRGF0YSh1bmlmb3JtR3JvdXApO1xuICAgIHVuaWZvcm1Hcm91cC5idWZmZXIgfHwgKHVuaWZvcm1Hcm91cC5idWZmZXIgPSBuZXcgQnVmZmVyKHtcbiAgICAgIGRhdGE6IG5ldyBGbG9hdDMyQXJyYXkodW5pZm9ybUdyb3VwRGF0YS5sYXlvdXQuc2l6ZSAvIDQpLFxuICAgICAgdXNhZ2U6IEJ1ZmZlclVzYWdlLlVOSUZPUk0gfCBCdWZmZXJVc2FnZS5DT1BZX0RTVFxuICAgIH0pKTtcbiAgICBkYXRhIHx8IChkYXRhID0gdW5pZm9ybUdyb3VwLmJ1ZmZlci5kYXRhKTtcbiAgICBvZmZzZXQgfHwgKG9mZnNldCA9IDApO1xuICAgIHVuaWZvcm1Hcm91cERhdGEuc3luY0Z1bmN0aW9uKHVuaWZvcm1Hcm91cC51bmlmb3JtcywgZGF0YSwgb2Zmc2V0KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB1cGRhdGVVbmlmb3JtR3JvdXAodW5pZm9ybUdyb3VwKSB7XG4gICAgaWYgKHVuaWZvcm1Hcm91cC5pc1N0YXRpYyAmJiAhdW5pZm9ybUdyb3VwLl9kaXJ0eUlkKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHVuaWZvcm1Hcm91cC5fZGlydHlJZCA9IDA7XG4gICAgY29uc3Qgc3luY2VkID0gdGhpcy5zeW5jVW5pZm9ybUdyb3VwKHVuaWZvcm1Hcm91cCk7XG4gICAgdW5pZm9ybUdyb3VwLmJ1ZmZlci51cGRhdGUoKTtcbiAgICByZXR1cm4gc3luY2VkO1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fc3luY0Z1bmN0aW9uSGFzaCA9IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IHsgVWJvU3lzdGVtIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1VYm9TeXN0ZW0ubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8809\n')},9758:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   S: () => (/* binding */ createUboSyncFunction)\n/* harmony export */ });\n/* harmony import */ var _uniformParsers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6602);\n\n\n"use strict";\nfunction createUboSyncFunction(uboElements, parserCode, arrayGenerationFunction, singleSettersMap) {\n  const funcFragments = [`\n        var v = null;\n        var v2 = null;\n        var t = 0;\n        var index = 0;\n        var name = null;\n        var arrayOffset = null;\n    `];\n  let prev = 0;\n  for (let i = 0; i < uboElements.length; i++) {\n    const uboElement = uboElements[i];\n    const name = uboElement.data.name;\n    let parsed = false;\n    let offset = 0;\n    for (let j = 0; j < _uniformParsers_mjs__WEBPACK_IMPORTED_MODULE_0__/* .uniformParsers */ .s.length; j++) {\n      const uniformParser = _uniformParsers_mjs__WEBPACK_IMPORTED_MODULE_0__/* .uniformParsers */ .s[j];\n      if (uniformParser.test(uboElement.data)) {\n        offset = uboElement.offset / 4;\n        funcFragments.push(\n          `name = "${name}";`,\n          `offset += ${offset - prev};`,\n          _uniformParsers_mjs__WEBPACK_IMPORTED_MODULE_0__/* .uniformParsers */ .s[j][parserCode] || _uniformParsers_mjs__WEBPACK_IMPORTED_MODULE_0__/* .uniformParsers */ .s[j].ubo\n        );\n        parsed = true;\n        break;\n      }\n    }\n    if (!parsed) {\n      if (uboElement.data.size > 1) {\n        offset = uboElement.offset / 4;\n        funcFragments.push(arrayGenerationFunction(uboElement, offset - prev));\n      } else {\n        const template = singleSettersMap[uboElement.data.type];\n        offset = uboElement.offset / 4;\n        funcFragments.push(\n          /* wgsl */\n          `\n                    v = uv.${name};\n                    offset += ${offset - prev};\n                    ${template};\n                `\n        );\n      }\n    }\n    prev = offset;\n  }\n  const fragmentSrc = funcFragments.join("\\n");\n  return new Function(\n    "uv",\n    "data",\n    "offset",\n    fragmentSrc\n  );\n}\n\n\n//# sourceMappingURL=createUboSyncFunction.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTc1OC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQXNEOztBQUV0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdCQUF3QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixJQUFJLHdFQUFjLFNBQVM7QUFDL0MsNEJBQTRCLHdFQUFjO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixLQUFLLEVBQUU7QUFDNUIsdUJBQXVCLGVBQWU7QUFDdEMsVUFBVSx3RUFBYyxtQkFBbUIsd0VBQWM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsZ0NBQWdDO0FBQ2hDLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVpQztBQUNqQyIsInNvdXJjZXMiOlsid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3JlbmRlcmluZy9yZW5kZXJlcnMvc2hhcmVkL3NoYWRlci91dGlscy9jcmVhdGVVYm9TeW5jRnVuY3Rpb24ubWpzPzAyNGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdW5pZm9ybVBhcnNlcnMgfSBmcm9tICcuL3VuaWZvcm1QYXJzZXJzLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gY3JlYXRlVWJvU3luY0Z1bmN0aW9uKHVib0VsZW1lbnRzLCBwYXJzZXJDb2RlLCBhcnJheUdlbmVyYXRpb25GdW5jdGlvbiwgc2luZ2xlU2V0dGVyc01hcCkge1xuICBjb25zdCBmdW5jRnJhZ21lbnRzID0gW2BcbiAgICAgICAgdmFyIHYgPSBudWxsO1xuICAgICAgICB2YXIgdjIgPSBudWxsO1xuICAgICAgICB2YXIgdCA9IDA7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIHZhciBuYW1lID0gbnVsbDtcbiAgICAgICAgdmFyIGFycmF5T2Zmc2V0ID0gbnVsbDtcbiAgICBgXTtcbiAgbGV0IHByZXYgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHVib0VsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdWJvRWxlbWVudCA9IHVib0VsZW1lbnRzW2ldO1xuICAgIGNvbnN0IG5hbWUgPSB1Ym9FbGVtZW50LmRhdGEubmFtZTtcbiAgICBsZXQgcGFyc2VkID0gZmFsc2U7XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCB1bmlmb3JtUGFyc2Vycy5sZW5ndGg7IGorKykge1xuICAgICAgY29uc3QgdW5pZm9ybVBhcnNlciA9IHVuaWZvcm1QYXJzZXJzW2pdO1xuICAgICAgaWYgKHVuaWZvcm1QYXJzZXIudGVzdCh1Ym9FbGVtZW50LmRhdGEpKSB7XG4gICAgICAgIG9mZnNldCA9IHVib0VsZW1lbnQub2Zmc2V0IC8gNDtcbiAgICAgICAgZnVuY0ZyYWdtZW50cy5wdXNoKFxuICAgICAgICAgIGBuYW1lID0gXCIke25hbWV9XCI7YCxcbiAgICAgICAgICBgb2Zmc2V0ICs9ICR7b2Zmc2V0IC0gcHJldn07YCxcbiAgICAgICAgICB1bmlmb3JtUGFyc2Vyc1tqXVtwYXJzZXJDb2RlXSB8fCB1bmlmb3JtUGFyc2Vyc1tqXS51Ym9cbiAgICAgICAgKTtcbiAgICAgICAgcGFyc2VkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghcGFyc2VkKSB7XG4gICAgICBpZiAodWJvRWxlbWVudC5kYXRhLnNpemUgPiAxKSB7XG4gICAgICAgIG9mZnNldCA9IHVib0VsZW1lbnQub2Zmc2V0IC8gNDtcbiAgICAgICAgZnVuY0ZyYWdtZW50cy5wdXNoKGFycmF5R2VuZXJhdGlvbkZ1bmN0aW9uKHVib0VsZW1lbnQsIG9mZnNldCAtIHByZXYpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gc2luZ2xlU2V0dGVyc01hcFt1Ym9FbGVtZW50LmRhdGEudHlwZV07XG4gICAgICAgIG9mZnNldCA9IHVib0VsZW1lbnQub2Zmc2V0IC8gNDtcbiAgICAgICAgZnVuY0ZyYWdtZW50cy5wdXNoKFxuICAgICAgICAgIC8qIHdnc2wgKi9cbiAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgIHYgPSB1di4ke25hbWV9O1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gJHtvZmZzZXQgLSBwcmV2fTtcbiAgICAgICAgICAgICAgICAgICAgJHt0ZW1wbGF0ZX07XG4gICAgICAgICAgICAgICAgYFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBwcmV2ID0gb2Zmc2V0O1xuICB9XG4gIGNvbnN0IGZyYWdtZW50U3JjID0gZnVuY0ZyYWdtZW50cy5qb2luKFwiXFxuXCIpO1xuICByZXR1cm4gbmV3IEZ1bmN0aW9uKFxuICAgIFwidXZcIixcbiAgICBcImRhdGFcIixcbiAgICBcIm9mZnNldFwiLFxuICAgIGZyYWdtZW50U3JjXG4gICk7XG59XG5cbmV4cG9ydCB7IGNyZWF0ZVVib1N5bmNGdW5jdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlVWJvU3luY0Z1bmN0aW9uLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9758\n')},5746:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   R: () => (/* binding */ uboSyncFunctionsWGSL),\n/* harmony export */   d: () => (/* binding */ uboSyncFunctionsSTD40)\n/* harmony export */ });\n\nfunction loopMatrix(col, row) {\n  const total = col * row;\n  return `\n        for (let i = 0; i < ${total}; i++) {\n            data[offset + (((i / ${col})|0) * 4) + (i % ${col})] = v[i];\n        }\n    `;\n}\nconst uboSyncFunctionsSTD40 = {\n  f32: `\n        data[offset] = v;`,\n  i32: `\n        data[offset] = v;`,\n  "vec2<f32>": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];`,\n  "vec3<f32>": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];`,\n  "vec4<f32>": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 3] = v[3];`,\n  "mat2x2<f32>": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 4] = v[2];\n        data[offset + 5] = v[3];`,\n  "mat3x3<f32>": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];`,\n  "mat4x4<f32>": `\n        for (let i = 0; i < 16; i++) {\n            data[offset + i] = v[i];\n        }`,\n  "mat3x2<f32>": loopMatrix(3, 2),\n  "mat4x2<f32>": loopMatrix(4, 2),\n  "mat2x3<f32>": loopMatrix(2, 3),\n  "mat4x3<f32>": loopMatrix(4, 3),\n  "mat2x4<f32>": loopMatrix(2, 4),\n  "mat3x4<f32>": loopMatrix(3, 4)\n};\nconst uboSyncFunctionsWGSL = {\n  ...uboSyncFunctionsSTD40,\n  "mat2x2<f32>": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 3] = v[3];\n    `\n};\n\n\n//# sourceMappingURL=uboSyncFunctions.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTc0Ni5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsTUFBTSxRQUFRO0FBQ3RDLG1DQUFtQyxJQUFJLG1CQUFtQixJQUFJO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXVEO0FBQ3ZEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvc2hhZGVyL3V0aWxzL3Vib1N5bmNGdW5jdGlvbnMubWpzPzhkNmQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBsb29wTWF0cml4KGNvbCwgcm93KSB7XG4gIGNvbnN0IHRvdGFsID0gY29sICogcm93O1xuICByZXR1cm4gYFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8ICR7dG90YWx9OyBpKyspIHtcbiAgICAgICAgICAgIGRhdGFbb2Zmc2V0ICsgKCgoaSAvICR7Y29sfSl8MCkgKiA0KSArIChpICUgJHtjb2x9KV0gPSB2W2ldO1xuICAgICAgICB9XG4gICAgYDtcbn1cbmNvbnN0IHVib1N5bmNGdW5jdGlvbnNTVEQ0MCA9IHtcbiAgZjMyOiBgXG4gICAgICAgIGRhdGFbb2Zmc2V0XSA9IHY7YCxcbiAgaTMyOiBgXG4gICAgICAgIGRhdGFbb2Zmc2V0XSA9IHY7YCxcbiAgXCJ2ZWMyPGYzMj5cIjogYFxuICAgICAgICBkYXRhW29mZnNldF0gPSB2WzBdO1xuICAgICAgICBkYXRhW29mZnNldCArIDFdID0gdlsxXTtgLFxuICBcInZlYzM8ZjMyPlwiOiBgXG4gICAgICAgIGRhdGFbb2Zmc2V0XSA9IHZbMF07XG4gICAgICAgIGRhdGFbb2Zmc2V0ICsgMV0gPSB2WzFdO1xuICAgICAgICBkYXRhW29mZnNldCArIDJdID0gdlsyXTtgLFxuICBcInZlYzQ8ZjMyPlwiOiBgXG4gICAgICAgIGRhdGFbb2Zmc2V0XSA9IHZbMF07XG4gICAgICAgIGRhdGFbb2Zmc2V0ICsgMV0gPSB2WzFdO1xuICAgICAgICBkYXRhW29mZnNldCArIDJdID0gdlsyXTtcbiAgICAgICAgZGF0YVtvZmZzZXQgKyAzXSA9IHZbM107YCxcbiAgXCJtYXQyeDI8ZjMyPlwiOiBgXG4gICAgICAgIGRhdGFbb2Zmc2V0XSA9IHZbMF07XG4gICAgICAgIGRhdGFbb2Zmc2V0ICsgMV0gPSB2WzFdO1xuICAgICAgICBkYXRhW29mZnNldCArIDRdID0gdlsyXTtcbiAgICAgICAgZGF0YVtvZmZzZXQgKyA1XSA9IHZbM107YCxcbiAgXCJtYXQzeDM8ZjMyPlwiOiBgXG4gICAgICAgIGRhdGFbb2Zmc2V0XSA9IHZbMF07XG4gICAgICAgIGRhdGFbb2Zmc2V0ICsgMV0gPSB2WzFdO1xuICAgICAgICBkYXRhW29mZnNldCArIDJdID0gdlsyXTtcbiAgICAgICAgZGF0YVtvZmZzZXQgKyA0XSA9IHZbM107XG4gICAgICAgIGRhdGFbb2Zmc2V0ICsgNV0gPSB2WzRdO1xuICAgICAgICBkYXRhW29mZnNldCArIDZdID0gdls1XTtcbiAgICAgICAgZGF0YVtvZmZzZXQgKyA4XSA9IHZbNl07XG4gICAgICAgIGRhdGFbb2Zmc2V0ICsgOV0gPSB2WzddO1xuICAgICAgICBkYXRhW29mZnNldCArIDEwXSA9IHZbOF07YCxcbiAgXCJtYXQ0eDQ8ZjMyPlwiOiBgXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xuICAgICAgICAgICAgZGF0YVtvZmZzZXQgKyBpXSA9IHZbaV07XG4gICAgICAgIH1gLFxuICBcIm1hdDN4MjxmMzI+XCI6IGxvb3BNYXRyaXgoMywgMiksXG4gIFwibWF0NHgyPGYzMj5cIjogbG9vcE1hdHJpeCg0LCAyKSxcbiAgXCJtYXQyeDM8ZjMyPlwiOiBsb29wTWF0cml4KDIsIDMpLFxuICBcIm1hdDR4MzxmMzI+XCI6IGxvb3BNYXRyaXgoNCwgMyksXG4gIFwibWF0Mng0PGYzMj5cIjogbG9vcE1hdHJpeCgyLCA0KSxcbiAgXCJtYXQzeDQ8ZjMyPlwiOiBsb29wTWF0cml4KDMsIDQpXG59O1xuY29uc3QgdWJvU3luY0Z1bmN0aW9uc1dHU0wgPSB7XG4gIC4uLnVib1N5bmNGdW5jdGlvbnNTVEQ0MCxcbiAgXCJtYXQyeDI8ZjMyPlwiOiBgXG4gICAgICAgIGRhdGFbb2Zmc2V0XSA9IHZbMF07XG4gICAgICAgIGRhdGFbb2Zmc2V0ICsgMV0gPSB2WzFdO1xuICAgICAgICBkYXRhW29mZnNldCArIDJdID0gdlsyXTtcbiAgICAgICAgZGF0YVtvZmZzZXQgKyAzXSA9IHZbM107XG4gICAgYFxufTtcblxuZXhwb3J0IHsgdWJvU3luY0Z1bmN0aW9uc1NURDQwLCB1Ym9TeW5jRnVuY3Rpb25zV0dTTCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dWJvU3luY0Z1bmN0aW9ucy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5746\n')},6602:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   s: () => (/* binding */ uniformParsers)\n/* harmony export */ });\n\nconst uniformParsers = [\n  // uploading pixi matrix object to mat3\n  {\n    type: "mat3x3<f32>",\n    test: (data) => {\n      const value = data.value;\n      return value.a !== void 0;\n    },\n    ubo: `\n            var matrix = uv[name].toArray(true);\n            data[offset] = matrix[0];\n            data[offset + 1] = matrix[1];\n            data[offset + 2] = matrix[2];\n            data[offset + 4] = matrix[3];\n            data[offset + 5] = matrix[4];\n            data[offset + 6] = matrix[5];\n            data[offset + 8] = matrix[6];\n            data[offset + 9] = matrix[7];\n            data[offset + 10] = matrix[8];\n        `,\n    uniform: `\n            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));\n        `\n  },\n  // uploading a pixi rectangle as a vec4\n  {\n    type: "vec4<f32>",\n    test: (data) => data.type === "vec4<f32>" && data.size === 1 && data.value.width !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.x;\n            data[offset + 1] = v.y;\n            data[offset + 2] = v.width;\n            data[offset + 3] = v.height;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {\n                cv[0] = v.x;\n                cv[1] = v.y;\n                cv[2] = v.width;\n                cv[3] = v.height;\n                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);\n            }\n        `\n  },\n  // uploading a pixi point as a vec2\n  {\n    type: "vec2<f32>",\n    test: (data) => data.type === "vec2<f32>" && data.size === 1 && data.value.x !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.x;\n            data[offset + 1] = v.y;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.x || cv[1] !== v.y) {\n                cv[0] = v.x;\n                cv[1] = v.y;\n                gl.uniform2f(ud[name].location, v.x, v.y);\n            }\n        `\n  },\n  // uploading a pixi color as a vec4\n  {\n    type: "vec4<f32>",\n    test: (data) => data.type === "vec4<f32>" && data.size === 1 && data.value.red !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.red;\n            data[offset + 1] = v.green;\n            data[offset + 2] = v.blue;\n            data[offset + 3] = v.alpha;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {\n                cv[0] = v.red;\n                cv[1] = v.green;\n                cv[2] = v.blue;\n                cv[3] = v.alpha;\n                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);\n            }\n        `\n  },\n  // uploading a pixi color as a vec3\n  {\n    type: "vec3<f32>",\n    test: (data) => data.type === "vec3<f32>" && data.size === 1 && data.value.red !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.red;\n            data[offset + 1] = v.green;\n            data[offset + 2] = v.blue;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {\n                cv[0] = v.red;\n                cv[1] = v.green;\n                cv[2] = v.blue;\n                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);\n            }\n        `\n  }\n];\n\n\n//# sourceMappingURL=uniformParsers.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjYwMi5qcyIsIm1hcHBpbmdzIjoiOzs7QUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTBCO0FBQzFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvc2hhZGVyL3V0aWxzL3VuaWZvcm1QYXJzZXJzLm1qcz9jMDNiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuY29uc3QgdW5pZm9ybVBhcnNlcnMgPSBbXG4gIC8vIHVwbG9hZGluZyBwaXhpIG1hdHJpeCBvYmplY3QgdG8gbWF0M1xuICB7XG4gICAgdHlwZTogXCJtYXQzeDM8ZjMyPlwiLFxuICAgIHRlc3Q6IChkYXRhKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGRhdGEudmFsdWU7XG4gICAgICByZXR1cm4gdmFsdWUuYSAhPT0gdm9pZCAwO1xuICAgIH0sXG4gICAgdWJvOiBgXG4gICAgICAgICAgICB2YXIgbWF0cml4ID0gdXZbbmFtZV0udG9BcnJheSh0cnVlKTtcbiAgICAgICAgICAgIGRhdGFbb2Zmc2V0XSA9IG1hdHJpeFswXTtcbiAgICAgICAgICAgIGRhdGFbb2Zmc2V0ICsgMV0gPSBtYXRyaXhbMV07XG4gICAgICAgICAgICBkYXRhW29mZnNldCArIDJdID0gbWF0cml4WzJdO1xuICAgICAgICAgICAgZGF0YVtvZmZzZXQgKyA0XSA9IG1hdHJpeFszXTtcbiAgICAgICAgICAgIGRhdGFbb2Zmc2V0ICsgNV0gPSBtYXRyaXhbNF07XG4gICAgICAgICAgICBkYXRhW29mZnNldCArIDZdID0gbWF0cml4WzVdO1xuICAgICAgICAgICAgZGF0YVtvZmZzZXQgKyA4XSA9IG1hdHJpeFs2XTtcbiAgICAgICAgICAgIGRhdGFbb2Zmc2V0ICsgOV0gPSBtYXRyaXhbN107XG4gICAgICAgICAgICBkYXRhW29mZnNldCArIDEwXSA9IG1hdHJpeFs4XTtcbiAgICAgICAgYCxcbiAgICB1bmlmb3JtOiBgXG4gICAgICAgICAgICBnbC51bmlmb3JtTWF0cml4M2Z2KHVkW25hbWVdLmxvY2F0aW9uLCBmYWxzZSwgdXZbbmFtZV0udG9BcnJheSh0cnVlKSk7XG4gICAgICAgIGBcbiAgfSxcbiAgLy8gdXBsb2FkaW5nIGEgcGl4aSByZWN0YW5nbGUgYXMgYSB2ZWM0XG4gIHtcbiAgICB0eXBlOiBcInZlYzQ8ZjMyPlwiLFxuICAgIHRlc3Q6IChkYXRhKSA9PiBkYXRhLnR5cGUgPT09IFwidmVjNDxmMzI+XCIgJiYgZGF0YS5zaXplID09PSAxICYmIGRhdGEudmFsdWUud2lkdGggIT09IHZvaWQgMCxcbiAgICB1Ym86IGBcbiAgICAgICAgICAgIHYgPSB1dltuYW1lXTtcbiAgICAgICAgICAgIGRhdGFbb2Zmc2V0XSA9IHYueDtcbiAgICAgICAgICAgIGRhdGFbb2Zmc2V0ICsgMV0gPSB2Lnk7XG4gICAgICAgICAgICBkYXRhW29mZnNldCArIDJdID0gdi53aWR0aDtcbiAgICAgICAgICAgIGRhdGFbb2Zmc2V0ICsgM10gPSB2LmhlaWdodDtcbiAgICAgICAgYCxcbiAgICB1bmlmb3JtOiBgXG4gICAgICAgICAgICBjdiA9IHVkW25hbWVdLnZhbHVlO1xuICAgICAgICAgICAgdiA9IHV2W25hbWVdO1xuICAgICAgICAgICAgaWYgKGN2WzBdICE9PSB2LnggfHwgY3ZbMV0gIT09IHYueSB8fCBjdlsyXSAhPT0gdi53aWR0aCB8fCBjdlszXSAhPT0gdi5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBjdlswXSA9IHYueDtcbiAgICAgICAgICAgICAgICBjdlsxXSA9IHYueTtcbiAgICAgICAgICAgICAgICBjdlsyXSA9IHYud2lkdGg7XG4gICAgICAgICAgICAgICAgY3ZbM10gPSB2LmhlaWdodDtcbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtNGYodWRbbmFtZV0ubG9jYXRpb24sIHYueCwgdi55LCB2LndpZHRoLCB2LmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGBcbiAgfSxcbiAgLy8gdXBsb2FkaW5nIGEgcGl4aSBwb2ludCBhcyBhIHZlYzJcbiAge1xuICAgIHR5cGU6IFwidmVjMjxmMzI+XCIsXG4gICAgdGVzdDogKGRhdGEpID0+IGRhdGEudHlwZSA9PT0gXCJ2ZWMyPGYzMj5cIiAmJiBkYXRhLnNpemUgPT09IDEgJiYgZGF0YS52YWx1ZS54ICE9PSB2b2lkIDAsXG4gICAgdWJvOiBgXG4gICAgICAgICAgICB2ID0gdXZbbmFtZV07XG4gICAgICAgICAgICBkYXRhW29mZnNldF0gPSB2Lng7XG4gICAgICAgICAgICBkYXRhW29mZnNldCArIDFdID0gdi55O1xuICAgICAgICBgLFxuICAgIHVuaWZvcm06IGBcbiAgICAgICAgICAgIGN2ID0gdWRbbmFtZV0udmFsdWU7XG4gICAgICAgICAgICB2ID0gdXZbbmFtZV07XG4gICAgICAgICAgICBpZiAoY3ZbMF0gIT09IHYueCB8fCBjdlsxXSAhPT0gdi55KSB7XG4gICAgICAgICAgICAgICAgY3ZbMF0gPSB2Lng7XG4gICAgICAgICAgICAgICAgY3ZbMV0gPSB2Lnk7XG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybTJmKHVkW25hbWVdLmxvY2F0aW9uLCB2LngsIHYueSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGBcbiAgfSxcbiAgLy8gdXBsb2FkaW5nIGEgcGl4aSBjb2xvciBhcyBhIHZlYzRcbiAge1xuICAgIHR5cGU6IFwidmVjNDxmMzI+XCIsXG4gICAgdGVzdDogKGRhdGEpID0+IGRhdGEudHlwZSA9PT0gXCJ2ZWM0PGYzMj5cIiAmJiBkYXRhLnNpemUgPT09IDEgJiYgZGF0YS52YWx1ZS5yZWQgIT09IHZvaWQgMCxcbiAgICB1Ym86IGBcbiAgICAgICAgICAgIHYgPSB1dltuYW1lXTtcbiAgICAgICAgICAgIGRhdGFbb2Zmc2V0XSA9IHYucmVkO1xuICAgICAgICAgICAgZGF0YVtvZmZzZXQgKyAxXSA9IHYuZ3JlZW47XG4gICAgICAgICAgICBkYXRhW29mZnNldCArIDJdID0gdi5ibHVlO1xuICAgICAgICAgICAgZGF0YVtvZmZzZXQgKyAzXSA9IHYuYWxwaGE7XG4gICAgICAgIGAsXG4gICAgdW5pZm9ybTogYFxuICAgICAgICAgICAgY3YgPSB1ZFtuYW1lXS52YWx1ZTtcbiAgICAgICAgICAgIHYgPSB1dltuYW1lXTtcbiAgICAgICAgICAgIGlmIChjdlswXSAhPT0gdi5yZWQgfHwgY3ZbMV0gIT09IHYuZ3JlZW4gfHwgY3ZbMl0gIT09IHYuYmx1ZSB8fCBjdlszXSAhPT0gdi5hbHBoYSkge1xuICAgICAgICAgICAgICAgIGN2WzBdID0gdi5yZWQ7XG4gICAgICAgICAgICAgICAgY3ZbMV0gPSB2LmdyZWVuO1xuICAgICAgICAgICAgICAgIGN2WzJdID0gdi5ibHVlO1xuICAgICAgICAgICAgICAgIGN2WzNdID0gdi5hbHBoYTtcbiAgICAgICAgICAgICAgICBnbC51bmlmb3JtNGYodWRbbmFtZV0ubG9jYXRpb24sIHYucmVkLCB2LmdyZWVuLCB2LmJsdWUsIHYuYWxwaGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICBgXG4gIH0sXG4gIC8vIHVwbG9hZGluZyBhIHBpeGkgY29sb3IgYXMgYSB2ZWMzXG4gIHtcbiAgICB0eXBlOiBcInZlYzM8ZjMyPlwiLFxuICAgIHRlc3Q6IChkYXRhKSA9PiBkYXRhLnR5cGUgPT09IFwidmVjMzxmMzI+XCIgJiYgZGF0YS5zaXplID09PSAxICYmIGRhdGEudmFsdWUucmVkICE9PSB2b2lkIDAsXG4gICAgdWJvOiBgXG4gICAgICAgICAgICB2ID0gdXZbbmFtZV07XG4gICAgICAgICAgICBkYXRhW29mZnNldF0gPSB2LnJlZDtcbiAgICAgICAgICAgIGRhdGFbb2Zmc2V0ICsgMV0gPSB2LmdyZWVuO1xuICAgICAgICAgICAgZGF0YVtvZmZzZXQgKyAyXSA9IHYuYmx1ZTtcbiAgICAgICAgYCxcbiAgICB1bmlmb3JtOiBgXG4gICAgICAgICAgICBjdiA9IHVkW25hbWVdLnZhbHVlO1xuICAgICAgICAgICAgdiA9IHV2W25hbWVdO1xuICAgICAgICAgICAgaWYgKGN2WzBdICE9PSB2LnJlZCB8fCBjdlsxXSAhPT0gdi5ncmVlbiB8fCBjdlsyXSAhPT0gdi5ibHVlKSB7XG4gICAgICAgICAgICAgICAgY3ZbMF0gPSB2LnJlZDtcbiAgICAgICAgICAgICAgICBjdlsxXSA9IHYuZ3JlZW47XG4gICAgICAgICAgICAgICAgY3ZbMl0gPSB2LmJsdWU7XG4gICAgICAgICAgICAgICAgZ2wudW5pZm9ybTNmKHVkW25hbWVdLmxvY2F0aW9uLCB2LnJlZCwgdi5ncmVlbiwgdi5ibHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYFxuICB9XG5dO1xuXG5leHBvcnQgeyB1bmlmb3JtUGFyc2VycyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pZm9ybVBhcnNlcnMubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6602\n')},6338:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  U: () => (/* binding */ SharedRenderPipes),\n  N: () => (/* binding */ SharedSystems)\n});\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/extensions/Extensions.mjs\nvar Extensions = __webpack_require__(3489);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/container/CustomRenderPipe.mjs\n\n\n"use strict";\nclass CustomRenderPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  addRenderable(container, instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add(container);\n  }\n  execute(container) {\n    if (!container.isRenderable)\n      return;\n    container.render(this._renderer);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\nCustomRenderPipe.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLPipes,\n    Extensions/* ExtensionType */.nw.WebGPUPipes,\n    Extensions/* ExtensionType */.nw.CanvasPipes\n  ],\n  name: "customRender"\n};\n\n\n//# sourceMappingURL=CustomRenderPipe.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/container/utils/executeInstructions.mjs\n\nfunction executeInstructions(renderGroup, renderer) {\n  const instructionSet = renderGroup.instructionSet;\n  const instructions = instructionSet.instructions;\n  for (let i = 0; i < instructionSet.instructionSize; i++) {\n    const instruction = instructions[i];\n    renderer[instruction.renderPipeId].execute(instruction);\n  }\n}\n\n\n//# sourceMappingURL=executeInstructions.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/container/RenderGroupPipe.mjs\n\n\n\n"use strict";\nclass RenderGroupPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  addRenderGroup(renderGroup, instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add(renderGroup);\n  }\n  execute(renderGroup) {\n    if (!renderGroup.isRenderable)\n      return;\n    this._renderer.globalUniforms.push({\n      worldTransformMatrix: renderGroup.worldTransform,\n      worldColor: renderGroup.worldColorAlpha\n    });\n    executeInstructions(renderGroup, this._renderer.renderPipes);\n    this._renderer.globalUniforms.pop();\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\nRenderGroupPipe.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLPipes,\n    Extensions/* ExtensionType */.nw.WebGPUPipes,\n    Extensions/* ExtensionType */.nw.CanvasPipes\n  ],\n  name: "renderGroup"\n};\n\n\n//# sourceMappingURL=RenderGroupPipe.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/maths/matrix/Matrix.mjs\nvar Matrix = __webpack_require__(5321);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/container/utils/buildInstructions.mjs\n\nfunction buildInstructions(renderGroup, renderPipes) {\n  const root = renderGroup.root;\n  const instructionSet = renderGroup.instructionSet;\n  instructionSet.reset();\n  renderPipes.batch.buildStart(instructionSet);\n  renderPipes.blendMode.buildStart();\n  renderPipes.colorMask.buildStart();\n  if (root.sortableChildren) {\n    root.sortChildren();\n  }\n  collectAllRenderablesAdvanced(root, instructionSet, renderPipes, true);\n  renderPipes.batch.buildEnd(instructionSet);\n  renderPipes.blendMode.buildEnd(instructionSet);\n}\nfunction collectAllRenderables(container, instructionSet, rendererPipes) {\n  if (container.globalDisplayStatus < 7 || !container.includeInBuild)\n    return;\n  if (container.sortableChildren) {\n    container.sortChildren();\n  }\n  if (container.isSimple) {\n    collectAllRenderablesSimple(container, instructionSet, rendererPipes);\n  } else {\n    collectAllRenderablesAdvanced(container, instructionSet, rendererPipes, false);\n  }\n}\nfunction collectAllRenderablesSimple(container, instructionSet, renderPipes) {\n  if (container.renderPipeId) {\n    renderPipes.blendMode.setBlendMode(container, container.groupBlendMode, instructionSet);\n    container.didViewUpdate = false;\n    const rp = renderPipes;\n    rp[container.renderPipeId].addRenderable(container, instructionSet);\n  }\n  if (!container.renderGroup) {\n    const children = container.children;\n    const length = children.length;\n    for (let i = 0; i < length; i++) {\n      collectAllRenderables(children[i], instructionSet, renderPipes);\n    }\n  }\n}\nfunction collectAllRenderablesAdvanced(container, instructionSet, renderPipes, isRoot) {\n  if (!isRoot && container.renderGroup) {\n    renderPipes.renderGroup.addRenderGroup(container.renderGroup, instructionSet);\n  } else {\n    for (let i = 0; i < container.effects.length; i++) {\n      const effect = container.effects[i];\n      const pipe = renderPipes[effect.pipe];\n      pipe.push(effect, container, instructionSet);\n    }\n    const renderPipeId = container.renderPipeId;\n    if (renderPipeId) {\n      renderPipes.blendMode.setBlendMode(container, container.groupBlendMode, instructionSet);\n      container.didViewUpdate = false;\n      const pipe = renderPipes[renderPipeId];\n      pipe.addRenderable(container, instructionSet);\n    }\n    const children = container.children;\n    if (children.length) {\n      for (let i = 0; i < children.length; i++) {\n        collectAllRenderables(children[i], instructionSet, renderPipes);\n      }\n    }\n    for (let i = container.effects.length - 1; i >= 0; i--) {\n      const effect = container.effects[i];\n      const pipe = renderPipes[effect.pipe];\n      pipe.pop(effect, container, instructionSet);\n    }\n  }\n}\n\n\n//# sourceMappingURL=buildInstructions.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/container/utils/clearList.mjs\n\nfunction clearList(list, index) {\n  index || (index = 0);\n  for (let j = index; j < list.length; j++) {\n    if (list[j]) {\n      list[j] = null;\n    } else {\n      break;\n    }\n  }\n}\n\n\n//# sourceMappingURL=clearList.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/container/utils/collectRenderGroups.mjs\n\nfunction collectRenderGroups(renderGroup, out = []) {\n  out.push(renderGroup);\n  for (let i = 0; i < renderGroup.renderGroupChildren.length; i++) {\n    collectRenderGroups(renderGroup.renderGroupChildren[i], out);\n  }\n  return out;\n}\n\n\n//# sourceMappingURL=collectRenderGroups.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/scene/container/Container.mjs + 12 modules\nvar Container = __webpack_require__(8400);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/container/utils/mixHexColors.mjs\n\nfunction mixHexColors_mixHexColors(color1, color2, ratio) {\n  const r1 = color1 >> 16 & 255;\n  const g1 = color1 >> 8 & 255;\n  const b1 = color1 & 255;\n  const r2 = color2 >> 16 & 255;\n  const g2 = color2 >> 8 & 255;\n  const b2 = color2 & 255;\n  const r = r1 + (r2 - r1) * ratio;\n  const g = g1 + (g2 - g1) * ratio;\n  const b = b1 + (b2 - b1) * ratio;\n  return (r << 16) + (g << 8) + b;\n}\n\n\n//# sourceMappingURL=mixHexColors.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/container/utils/mixColors.mjs\n\n\n"use strict";\nconst WHITE_BGR = 16777215;\nfunction mixColors(localBGRColor, parentBGRColor) {\n  if (localBGRColor === WHITE_BGR || parentBGRColor === WHITE_BGR) {\n    return localBGRColor + parentBGRColor - WHITE_BGR;\n  }\n  return mixHexColors_mixHexColors(localBGRColor, parentBGRColor, 0.5);\n}\nfunction mixStandardAnd32BitColors(localColorRGB, localAlpha, parentColor) {\n  const parentAlpha = (parentColor >> 24 & 255) / 255;\n  const globalAlpha = localAlpha * parentAlpha * 255;\n  const localBGRColor = ((localColorRGB & 255) << 16) + (localColorRGB & 65280) + (localColorRGB >> 16 & 255);\n  const parentBGRColor = parentColor & 16777215;\n  let sharedBGRColor;\n  if (localBGRColor === WHITE_BGR || parentBGRColor === WHITE_BGR) {\n    sharedBGRColor = localBGRColor + parentBGRColor - WHITE_BGR;\n  } else {\n    sharedBGRColor = mixHexColors(localBGRColor, parentBGRColor, 0.5);\n  }\n  return sharedBGRColor + (globalAlpha << 24);\n}\n\n\n//# sourceMappingURL=mixColors.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/container/utils/updateRenderGroupTransforms.mjs\n\n\n\n\n"use strict";\nconst tempContainer = new Container/* Container */.W2();\nconst UPDATE_BLEND_COLOR_VISIBLE = Container/* UPDATE_VISIBLE */.Jm | Container/* UPDATE_COLOR */.wO | Container/* UPDATE_BLEND */.pA;\nfunction updateRenderGroupTransforms(renderGroup, updateChildRenderGroups = false) {\n  updateRenderGroupTransform(renderGroup);\n  const childrenToUpdate = renderGroup.childrenToUpdate;\n  const updateTick = renderGroup.updateTick++;\n  for (const j in childrenToUpdate) {\n    const renderGroupDepth = Number(j);\n    const childrenAtDepth = childrenToUpdate[j];\n    const list = childrenAtDepth.list;\n    const index = childrenAtDepth.index;\n    for (let i = 0; i < index; i++) {\n      const child = list[i];\n      if (child.parentRenderGroup === renderGroup && child.relativeRenderGroupDepth === renderGroupDepth) {\n        updateTransformAndChildren(child, updateTick, 0);\n      }\n    }\n    clearList(list, index);\n    childrenAtDepth.index = 0;\n  }\n  if (updateChildRenderGroups) {\n    for (let i = 0; i < renderGroup.renderGroupChildren.length; i++) {\n      updateRenderGroupTransforms(renderGroup.renderGroupChildren[i], updateChildRenderGroups);\n    }\n  }\n}\nfunction updateRenderGroupTransform(renderGroup) {\n  const root = renderGroup.root;\n  let worldAlpha;\n  if (renderGroup.renderGroupParent) {\n    const renderGroupParent = renderGroup.renderGroupParent;\n    renderGroup.worldTransform.appendFrom(\n      root.relativeGroupTransform,\n      renderGroupParent.worldTransform\n    );\n    renderGroup.worldColor = mixColors(\n      root.groupColor,\n      renderGroupParent.worldColor\n    );\n    worldAlpha = root.groupAlpha * renderGroupParent.worldAlpha;\n  } else {\n    renderGroup.worldTransform.copyFrom(root.localTransform);\n    renderGroup.worldColor = root.localColor;\n    worldAlpha = root.localAlpha;\n  }\n  worldAlpha = worldAlpha < 0 ? 0 : worldAlpha > 1 ? 1 : worldAlpha;\n  renderGroup.worldAlpha = worldAlpha;\n  renderGroup.worldColorAlpha = renderGroup.worldColor + ((worldAlpha * 255 | 0) << 24);\n}\nfunction updateTransformAndChildren(container, updateTick, updateFlags) {\n  if (updateTick === container.updateTick)\n    return;\n  container.updateTick = updateTick;\n  container.didChange = false;\n  const localTransform = container.localTransform;\n  container.updateLocalTransform();\n  const parent = container.parent;\n  if (parent && !parent.renderGroup) {\n    updateFlags = updateFlags | container._updateFlags;\n    container.relativeGroupTransform.appendFrom(\n      localTransform,\n      parent.relativeGroupTransform\n    );\n    if (updateFlags & UPDATE_BLEND_COLOR_VISIBLE) {\n      updateColorBlendVisibility(container, parent, updateFlags);\n    }\n  } else {\n    updateFlags = container._updateFlags;\n    container.relativeGroupTransform.copyFrom(localTransform);\n    if (updateFlags & UPDATE_BLEND_COLOR_VISIBLE) {\n      updateColorBlendVisibility(container, tempContainer, updateFlags);\n    }\n  }\n  if (!container.renderGroup) {\n    const children = container.children;\n    const length = children.length;\n    for (let i = 0; i < length; i++) {\n      updateTransformAndChildren(children[i], updateTick, updateFlags);\n    }\n    const renderGroup = container.parentRenderGroup;\n    if (container.renderPipeId && !renderGroup.structureDidChange) {\n      renderGroup.updateRenderable(container);\n    }\n  }\n}\nfunction updateColorBlendVisibility(container, parent, updateFlags) {\n  if (updateFlags & Container/* UPDATE_COLOR */.wO) {\n    container.groupColor = mixColors(\n      container.localColor,\n      parent.groupColor\n    );\n    let groupAlpha = container.localAlpha * parent.groupAlpha;\n    groupAlpha = groupAlpha < 0 ? 0 : groupAlpha > 1 ? 1 : groupAlpha;\n    container.groupAlpha = groupAlpha;\n    container.groupColorAlpha = container.groupColor + ((groupAlpha * 255 | 0) << 24);\n  }\n  if (updateFlags & Container/* UPDATE_BLEND */.pA) {\n    container.groupBlendMode = container.localBlendMode === "inherit" ? parent.groupBlendMode : container.localBlendMode;\n  }\n  if (updateFlags & Container/* UPDATE_VISIBLE */.Jm) {\n    container.globalDisplayStatus = container.localDisplayStatus & parent.globalDisplayStatus;\n  }\n  container._updateFlags = 0;\n}\n\n\n//# sourceMappingURL=updateRenderGroupTransforms.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/container/utils/validateRenderables.mjs\n\nfunction validateRenderables(renderGroup, renderPipes) {\n  const { list, index } = renderGroup.childrenRenderablesToUpdate;\n  let rebuildRequired = false;\n  for (let i = 0; i < index; i++) {\n    const container = list[i];\n    const renderable = container;\n    const pipe = renderPipes[renderable.renderPipeId];\n    rebuildRequired = pipe.validateRenderable(container);\n    if (rebuildRequired) {\n      break;\n    }\n  }\n  renderGroup.structureDidChange = rebuildRequired;\n  return rebuildRequired;\n}\n\n\n//# sourceMappingURL=validateRenderables.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/container/RenderGroupSystem.mjs\n\n\n\n\n\n\n\n\n\n"use strict";\nconst tempMatrix = new Matrix/* Matrix */.y();\nclass RenderGroupSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  render({ container, transform }) {\n    container.isRenderGroup = true;\n    const parent = container.parent;\n    const renderGroupParent = container.renderGroup.renderGroupParent;\n    container.parent = null;\n    container.renderGroup.renderGroupParent = null;\n    const renderer = this._renderer;\n    const renderGroups = collectRenderGroups(container.renderGroup, []);\n    let originalLocalTransform = tempMatrix;\n    if (transform) {\n      originalLocalTransform = originalLocalTransform.copyFrom(container.renderGroup.localTransform);\n      container.renderGroup.localTransform.copyFrom(transform);\n    }\n    const renderPipes = renderer.renderPipes;\n    for (let i = 0; i < renderGroups.length; i++) {\n      const renderGroup = renderGroups[i];\n      renderGroup.runOnRender();\n      renderGroup.instructionSet.renderPipes = renderPipes;\n      if (!renderGroup.structureDidChange) {\n        validateRenderables(renderGroup, renderPipes);\n      } else {\n        clearList(renderGroup.childrenRenderablesToUpdate.list, 0);\n      }\n      updateRenderGroupTransforms(renderGroup);\n      if (renderGroup.structureDidChange) {\n        renderGroup.structureDidChange = false;\n        buildInstructions(renderGroup, renderPipes);\n      } else {\n        updateRenderables(renderGroup);\n      }\n      renderGroup.childrenRenderablesToUpdate.index = 0;\n      renderer.renderPipes.batch.upload(renderGroup.instructionSet);\n    }\n    renderer.globalUniforms.start({\n      worldTransformMatrix: transform ? container.renderGroup.localTransform : container.renderGroup.worldTransform,\n      worldColor: container.renderGroup.worldColorAlpha\n    });\n    executeInstructions(container.renderGroup, renderPipes);\n    if (renderPipes.uniformBatch) {\n      renderPipes.uniformBatch.renderEnd();\n    }\n    if (transform) {\n      container.renderGroup.localTransform.copyFrom(originalLocalTransform);\n    }\n    container.parent = parent;\n    container.renderGroup.renderGroupParent = renderGroupParent;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nRenderGroupSystem.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLSystem,\n    Extensions/* ExtensionType */.nw.WebGPUSystem,\n    Extensions/* ExtensionType */.nw.CanvasSystem\n  ],\n  name: "renderGroup"\n};\nfunction updateRenderables(renderGroup) {\n  const { list, index } = renderGroup.childrenRenderablesToUpdate;\n  for (let i = 0; i < index; i++) {\n    const container = list[i];\n    if (container.didViewUpdate) {\n      renderGroup.updateRenderable(container);\n    }\n  }\n  clearList(list, index);\n}\n\n\n//# sourceMappingURL=RenderGroupSystem.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/utils/pool/PoolGroup.mjs\nvar PoolGroup = __webpack_require__(5906);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/scene/sprite/BatchableSprite.mjs\nvar BatchableSprite = __webpack_require__(900);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/scene/sprite/SpritePipe.mjs\n\n\n\n\n"use strict";\nclass SpritePipe {\n  constructor(renderer) {\n    this._gpuSpriteHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  addRenderable(sprite, _instructionSet) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (sprite._didSpriteUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    this._renderer.renderPipes.batch.addToBatch(gpuSprite);\n  }\n  updateRenderable(sprite) {\n    const gpuSprite = this._gpuSpriteHash[sprite.uid];\n    if (sprite._didSpriteUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    gpuSprite.batcher.updateElement(gpuSprite);\n  }\n  validateRenderable(sprite) {\n    const texture = sprite._texture;\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (gpuSprite.texture._source !== texture._source) {\n      return !gpuSprite.batcher.checkAndUpdateTexture(gpuSprite, texture);\n    }\n    return false;\n  }\n  destroyRenderable(sprite) {\n    const batchableSprite = this._gpuSpriteHash[sprite.uid];\n    PoolGroup/* BigPool */.u.return(batchableSprite);\n    this._gpuSpriteHash[sprite.uid] = null;\n  }\n  _updateBatchableSprite(sprite, batchableSprite) {\n    sprite._didSpriteUpdate = false;\n    batchableSprite.bounds = sprite.bounds;\n    batchableSprite.texture = sprite._texture;\n  }\n  _getGpuSprite(sprite) {\n    return this._gpuSpriteHash[sprite.uid] || this._initGPUSprite(sprite);\n  }\n  _initGPUSprite(sprite) {\n    const batchableSprite = PoolGroup/* BigPool */.u.get(BatchableSprite/* BatchableSprite */.c);\n    batchableSprite.renderable = sprite;\n    batchableSprite.texture = sprite._texture;\n    batchableSprite.bounds = sprite.bounds;\n    batchableSprite.roundPixels = this._renderer._roundPixels | sprite._roundPixels;\n    this._gpuSpriteHash[sprite.uid] = batchableSprite;\n    sprite._didSpriteUpdate = false;\n    sprite.on("destroyed", () => {\n      this.destroyRenderable(sprite);\n    });\n    return batchableSprite;\n  }\n  destroy() {\n    for (const i in this._gpuSpriteHash) {\n      PoolGroup/* BigPool */.u.return(this._gpuSpriteHash[i]);\n    }\n    this._gpuSpriteHash = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nSpritePipe.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLPipes,\n    Extensions/* ExtensionType */.nw.WebGPUPipes,\n    Extensions/* ExtensionType */.nw.CanvasPipes\n  ],\n  name: "sprite"\n};\n\n\n//# sourceMappingURL=SpritePipe.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/utils/global/globalHooks.mjs\nvar globalHooks = __webpack_require__(6999);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/state/State.mjs\nvar State = __webpack_require__(6798);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/batcher/shared/Batcher.mjs + 2 modules\nvar Batcher = __webpack_require__(4683);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/batcher/shared/BatchGeometry.mjs\nvar BatchGeometry = __webpack_require__(37);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/batcher/shared/BatcherPipe.mjs\n\n\n\n\n\n"use strict";\nclass BatcherPipe {\n  constructor(renderer, adaptor) {\n    this.state = State/* State */.Z.for2d();\n    this._batches = /* @__PURE__ */ Object.create(null);\n    this._geometries = /* @__PURE__ */ Object.create(null);\n    this.renderer = renderer;\n    this._adaptor = adaptor;\n    this._adaptor.init(this);\n  }\n  buildStart(instructionSet) {\n    if (!this._batches[instructionSet.uid]) {\n      const batcher = new Batcher/* Batcher */.m();\n      this._batches[instructionSet.uid] = batcher;\n      this._geometries[batcher.uid] = new BatchGeometry/* BatchGeometry */.J();\n    }\n    this._activeBatch = this._batches[instructionSet.uid];\n    this._activeGeometry = this._geometries[this._activeBatch.uid];\n    this._activeBatch.begin();\n  }\n  addToBatch(batchableObject) {\n    this._activeBatch.add(batchableObject);\n  }\n  break(instructionSet) {\n    this._activeBatch.break(instructionSet);\n  }\n  buildEnd(instructionSet) {\n    const activeBatch = this._activeBatch;\n    const geometry = this._activeGeometry;\n    activeBatch.finish(instructionSet);\n    geometry.indexBuffer.setDataWithSize(activeBatch.indexBuffer, activeBatch.indexSize, true);\n    geometry.buffers[0].setDataWithSize(activeBatch.attributeBuffer.float32View, activeBatch.attributeSize, false);\n  }\n  upload(instructionSet) {\n    const batcher = this._batches[instructionSet.uid];\n    const geometry = this._geometries[batcher.uid];\n    if (batcher.dirty) {\n      batcher.dirty = false;\n      geometry.buffers[0].update(batcher.attributeSize * 4);\n    }\n  }\n  execute(batch) {\n    if (batch.action === "startBatch") {\n      const batcher = batch.batcher;\n      const geometry = this._geometries[batcher.uid];\n      this._adaptor.start(this, geometry);\n    }\n    this._adaptor.execute(this, batch);\n  }\n  destroy() {\n    this.state = null;\n    this.renderer = null;\n    this._adaptor.destroy();\n    this._adaptor = null;\n    for (const i in this._batches) {\n      this._batches[i].destroy();\n    }\n    this._batches = null;\n    for (const i in this._geometries) {\n      this._geometries[i].destroy();\n    }\n    this._geometries = null;\n  }\n}\n/** @ignore */\nBatcherPipe.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLPipes,\n    Extensions/* ExtensionType */.nw.WebGPUPipes,\n    Extensions/* ExtensionType */.nw.CanvasPipes\n  ],\n  name: "batch"\n};\n\n\n//# sourceMappingURL=BatcherPipe.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/filters/FilterEffect.mjs\nvar FilterEffect = __webpack_require__(6282);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlProgram.mjs + 6 modules\nvar GlProgram = __webpack_require__(749);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/GpuProgram.mjs + 6 modules\nvar GpuProgram = __webpack_require__(1982);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/shader/UniformGroup.mjs + 2 modules\nvar UniformGroup = __webpack_require__(4537);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureMatrix.mjs\nvar TextureMatrix = __webpack_require__(575);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/shader/Shader.mjs\nvar Shader = __webpack_require__(2267);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/filters/Filter.mjs\n\n\n\n\n\n"use strict";\nconst _Filter = class _Filter extends Shader/* Shader */.e {\n  /**\n   * @param options - The optional parameters of this filter.\n   */\n  constructor(options) {\n    options = { ..._Filter.defaultOptions, ...options };\n    super(options);\n    /** If enabled is true the filter is applied, if false it will not. */\n    this.enabled = true;\n    /**\n     * The gpu state the filter requires to render.\n     * @internal\n     * @ignore\n     */\n    this._state = State/* State */.Z.for2d();\n    this.blendMode = options.blendMode;\n    this.padding = options.padding;\n    if (typeof options.antialias === "boolean") {\n      this.antialias = options.antialias ? "on" : "off";\n    } else {\n      this.antialias = options.antialias;\n    }\n    this.resolution = options.resolution;\n    this.blendRequired = options.blendRequired;\n    this.addResource("uTexture", 0, 1);\n  }\n  /**\n   * Applies the filter\n   * @param filterManager - The renderer to retrieve the filter from\n   * @param input - The input render target.\n   * @param output - The target to output to.\n   * @param clearMode - Should the output be cleared before rendering to it\n   */\n  apply(filterManager, input, output, clearMode) {\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * Get the blend mode of the filter.\n   * @default "normal"\n   */\n  get blendMode() {\n    return this._state.blendMode;\n  }\n  /** Sets the blend mode of the filter. */\n  set blendMode(value) {\n    this._state.blendMode = value;\n  }\n  /**\n   * A short hand function to create a filter based of a vertex and fragment shader src.\n   * @param options\n   * @returns A shiny new PixiJS filter!\n   */\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram/* GpuProgram */.O.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram/* GlProgram */.J.from(gl);\n    }\n    return new _Filter({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n};\n/**\n * The default filter settings\n * @static\n */\n_Filter.defaultOptions = {\n  blendMode: "normal",\n  resolution: 1,\n  padding: 0,\n  antialias: "off",\n  blendRequired: false\n};\nlet Filter = _Filter;\n\n\n//# sourceMappingURL=Filter.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/filters/mask/mask.frag.mjs\nvar fragment = "in vec2 vMaskCoord;\\nin vec2 vTextureCoord;\\n\\nuniform sampler2D uTexture;\\nuniform sampler2D uMaskTexture;\\n\\nuniform float uAlpha;\\nuniform vec4 uMaskClamp;\\n\\nout vec4 finalColor;\\n\\nvoid main(void)\\n{\\n    float clip = step(3.5,\\n        step(uMaskClamp.x, vMaskCoord.x) +\\n        step(uMaskClamp.y, vMaskCoord.y) +\\n        step(vMaskCoord.x, uMaskClamp.z) +\\n        step(vMaskCoord.y, uMaskClamp.w));\\n\\n    // TODO look into why this is needed\\n    float npmAlpha = uAlpha; \\n    vec4 original = texture(uTexture, vTextureCoord);\\n    vec4 masky = texture(uMaskTexture, vMaskCoord);\\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\\n\\n    original *= (alphaMul * masky.r * uAlpha * clip);\\n\\n    finalColor = original;\\n}\\n";\n\n\n//# sourceMappingURL=mask.frag.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/filters/mask/mask.vert.mjs\nvar vertex = "in vec2 aPosition;\\n\\nout vec2 vTextureCoord;\\nout vec2 vMaskCoord;\\n\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\nuniform mat3 uFilterMatrix;\\n\\nvec4 filterVertexPosition(  vec2 aPosition )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n       \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord(  vec2 aPosition )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvec2 getFilterCoord( vec2 aPosition )\\n{\\n    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\\n}   \\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition(aPosition);\\n    vTextureCoord = filterTextureCoord(aPosition);\\n    vMaskCoord = getFilterCoord(aPosition);\\n}\\n";\n\n\n//# sourceMappingURL=mask.vert.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/filters/mask/mask.wgsl.mjs\nvar source = "struct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,  \\n};\\n\\nstruct MaskUniforms {\\n  uFilterMatrix:mat3x3<f32>,\\n  uMaskClamp:vec4<f32>,\\n  uAlpha:f32,\\n};\\n\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;\\n@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>,\\n    @location(1) filterUv : vec2<f32>,\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n\\n  \\n  return gfu.uGlobalFrame.zw;\\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition),\\n   getFilterCoord(aPosition)\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @location(1) filterUv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n\\n    var maskClamp = filterUniforms.uMaskClamp;\\n\\n     var clip = step(3.5,\\n        step(maskClamp.x, filterUv.x) +\\n        step(maskClamp.y, filterUv.y) +\\n        step(filterUv.x, maskClamp.z) +\\n        step(filterUv.y, maskClamp.w));\\n\\n    var mask = textureSample(uMaskTexture, uSampler, filterUv);\\n    var source = textureSample(uTexture, uSampler, uv);\\n    \\n    var npmAlpha = 0.0;\\n\\n    var alphaMul = 1.0 - npmAlpha * (1.0 - mask.a);\\n\\n    var a = (alphaMul * mask.r) * clip;\\n\\n    return vec4(source.rgb, source.a) * a;\\n}";\n\n\n//# sourceMappingURL=mask.wgsl.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/filters/mask/MaskFilter.mjs\n\n\n\n\n\n\n\n\n\n\n"use strict";\nclass MaskFilter extends Filter {\n  constructor(options) {\n    const { sprite, ...rest } = options;\n    const textureMatrix = new TextureMatrix/* TextureMatrix */.U(sprite.texture);\n    const filterUniforms = new UniformGroup/* UniformGroup */.o({\n      uFilterMatrix: { value: new Matrix/* Matrix */.y(), type: "mat3x3<f32>" },\n      uMaskClamp: { value: textureMatrix.uClampFrame, type: "vec4<f32>" },\n      uAlpha: { value: 1, type: "f32" }\n    });\n    const gpuProgram = GpuProgram/* GpuProgram */.O.from({\n      vertex: {\n        source: source,\n        entryPoint: "mainVertex"\n      },\n      fragment: {\n        source: source,\n        entryPoint: "mainFragment"\n      }\n    });\n    const glProgram = GlProgram/* GlProgram */.J.from({\n      vertex: vertex,\n      fragment: fragment,\n      name: "mask-filter"\n    });\n    super({\n      ...rest,\n      gpuProgram,\n      glProgram,\n      resources: {\n        filterUniforms,\n        uMaskTexture: sprite.texture.source\n      }\n    });\n    this.sprite = sprite;\n    this._textureMatrix = textureMatrix;\n  }\n  apply(filterManager, input, output, clearMode) {\n    this._textureMatrix.texture = this.sprite.texture;\n    filterManager.calculateSpriteMatrix(\n      this.resources.filterUniforms.uniforms.uFilterMatrix,\n      this.sprite\n    ).prepend(this._textureMatrix.mapCoord);\n    this.resources.uMaskTexture = this.sprite.texture.source;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n}\n\n\n//# sourceMappingURL=MaskFilter.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/scene/container/bounds/Bounds.mjs\nvar Bounds = __webpack_require__(535);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/scene/container/bounds/getGlobalBounds.mjs\nvar getGlobalBounds = __webpack_require__(5128);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/scene/sprite/Sprite.mjs\nvar Sprite = __webpack_require__(5263);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/texture/Texture.mjs + 2 modules\nvar Texture = __webpack_require__(9853);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/texture/TexturePool.mjs\nvar TexturePool = __webpack_require__(6669);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/types.mjs\nvar types = __webpack_require__(5765);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/mask/alpha/AlphaMaskPipe.mjs\n\n\n\n\n\n\n\n\n\n\n\n\n"use strict";\nconst tempBounds = new Bounds/* Bounds */.Y();\nclass AlphaMaskEffect extends FilterEffect/* FilterEffect */.U {\n  constructor() {\n    super();\n    this.filters = [new MaskFilter({\n      sprite: new Sprite/* Sprite */.j(Texture/* Texture */.x.EMPTY),\n      resolution: "inherit",\n      antialias: "inherit"\n    })];\n  }\n  get sprite() {\n    return this.filters[0].sprite;\n  }\n  set sprite(value) {\n    this.filters[0].sprite = value;\n  }\n}\nclass AlphaMaskPipe {\n  constructor(renderer) {\n    this._activeMaskStage = [];\n    this._renderer = renderer;\n  }\n  push(mask, maskedContainer, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: "alphaMask",\n      action: "pushMaskBegin",\n      mask,\n      canBundle: false,\n      maskedContainer\n    });\n    if (mask.renderMaskToTexture) {\n      const maskContainer = mask.mask;\n      maskContainer.includeInBuild = true;\n      collectAllRenderables(\n        maskContainer,\n        instructionSet,\n        renderer.renderPipes\n      );\n      maskContainer.includeInBuild = false;\n    }\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: "alphaMask",\n      action: "pushMaskEnd",\n      mask,\n      maskedContainer,\n      canBundle: false\n    });\n  }\n  pop(mask, _maskedContainer, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: "alphaMask",\n      action: "popMaskEnd",\n      mask,\n      canBundle: false\n    });\n  }\n  execute(instruction) {\n    const renderer = this._renderer;\n    const renderMask = instruction.mask.renderMaskToTexture;\n    if (instruction.action === "pushMaskBegin") {\n      const filterEffect = PoolGroup/* BigPool */.u.get(AlphaMaskEffect);\n      if (renderMask) {\n        instruction.mask.mask.measurable = true;\n        const bounds = (0,getGlobalBounds/* getGlobalBounds */.qW)(instruction.mask.mask, true, tempBounds);\n        instruction.mask.mask.measurable = false;\n        bounds.ceil();\n        const colorTextureSource = renderer.renderTarget.renderTarget.colorTexture.source;\n        const filterTexture = TexturePool/* TexturePool */.z.getOptimalTexture(\n          bounds.width,\n          bounds.height,\n          colorTextureSource._resolution,\n          colorTextureSource.antialias\n        );\n        renderer.renderTarget.push(filterTexture, true);\n        renderer.globalUniforms.push({\n          offset: bounds,\n          worldColor: 4294967295\n        });\n        const sprite = filterEffect.sprite;\n        sprite.texture = filterTexture;\n        sprite.worldTransform.tx = bounds.minX;\n        sprite.worldTransform.ty = bounds.minY;\n        this._activeMaskStage.push({\n          filterEffect,\n          maskedContainer: instruction.maskedContainer,\n          filterTexture\n        });\n      } else {\n        filterEffect.sprite = instruction.mask.mask;\n        this._activeMaskStage.push({\n          filterEffect,\n          maskedContainer: instruction.maskedContainer\n        });\n      }\n    } else if (instruction.action === "pushMaskEnd") {\n      const maskData = this._activeMaskStage[this._activeMaskStage.length - 1];\n      if (renderMask) {\n        if (renderer.type === types/* RendererType */.g.WEBGL) {\n          renderer.renderTarget.finishRenderPass();\n        }\n        renderer.renderTarget.pop();\n        renderer.globalUniforms.pop();\n      }\n      renderer.filter.push({\n        renderPipeId: "filter",\n        action: "pushFilter",\n        container: maskData.maskedContainer,\n        filterEffect: maskData.filterEffect,\n        canBundle: false\n      });\n    } else if (instruction.action === "popMaskEnd") {\n      renderer.filter.pop();\n      const maskData = this._activeMaskStage.pop();\n      if (renderMask) {\n        TexturePool/* TexturePool */.z.returnTexture(maskData.filterTexture);\n      }\n      PoolGroup/* BigPool */.u.return(maskData.filterEffect);\n    }\n  }\n  destroy() {\n    this._renderer = null;\n    this._activeMaskStage = null;\n  }\n}\n/** @ignore */\nAlphaMaskPipe.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLPipes,\n    Extensions/* ExtensionType */.nw.WebGPUPipes,\n    Extensions/* ExtensionType */.nw.CanvasPipes\n  ],\n  name: "alphaMask"\n};\n\n\n//# sourceMappingURL=AlphaMaskPipe.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/mask/color/ColorMaskPipe.mjs\n\n\n"use strict";\nclass ColorMaskPipe {\n  constructor(renderer) {\n    this._colorStack = [];\n    this._colorStackIndex = 0;\n    this._currentColor = 0;\n    this._renderer = renderer;\n  }\n  buildStart() {\n    this._colorStack[0] = 15;\n    this._colorStackIndex = 1;\n    this._currentColor = 15;\n  }\n  push(mask, _container, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    const colorStack = this._colorStack;\n    colorStack[this._colorStackIndex] = colorStack[this._colorStackIndex - 1] & mask.mask;\n    const currentColor = this._colorStack[this._colorStackIndex];\n    if (currentColor !== this._currentColor) {\n      this._currentColor = currentColor;\n      instructionSet.add({\n        renderPipeId: "colorMask",\n        colorMask: currentColor,\n        canBundle: false\n      });\n    }\n    this._colorStackIndex++;\n  }\n  pop(_mask, _container, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    const colorStack = this._colorStack;\n    this._colorStackIndex--;\n    const currentColor = colorStack[this._colorStackIndex - 1];\n    if (currentColor !== this._currentColor) {\n      this._currentColor = currentColor;\n      instructionSet.add({\n        renderPipeId: "colorMask",\n        colorMask: currentColor,\n        canBundle: false\n      });\n    }\n  }\n  execute(instruction) {\n    const renderer = this._renderer;\n    renderer.colorMask.setMask(instruction.colorMask);\n  }\n  destroy() {\n    this._colorStack = null;\n  }\n}\n/** @ignore */\nColorMaskPipe.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLPipes,\n    Extensions/* ExtensionType */.nw.WebGPUPipes,\n    Extensions/* ExtensionType */.nw.CanvasPipes\n  ],\n  name: "colorMask"\n};\n\n\n//# sourceMappingURL=ColorMaskPipe.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/gl/const.mjs\nvar gl_const = __webpack_require__(6582);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/state/const.mjs\nvar state_const = __webpack_require__(2475);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/mask/stencil/StencilMaskPipe.mjs\n\n\n\n\n\n"use strict";\nclass StencilMaskPipe {\n  constructor(renderer) {\n    // used when building and also when executing..\n    this._maskStackHash = {};\n    this._maskHash = /* @__PURE__ */ new WeakMap();\n    this._renderer = renderer;\n  }\n  push(mask, _container, instructionSet) {\n    var _a;\n    const effect = mask;\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    renderer.renderPipes.blendMode.setBlendMode(effect.mask, "none", instructionSet);\n    instructionSet.add({\n      renderPipeId: "stencilMask",\n      action: "pushMaskBegin",\n      mask,\n      canBundle: false\n    });\n    const maskContainer = effect.mask;\n    maskContainer.includeInBuild = true;\n    if (!this._maskHash.has(effect)) {\n      this._maskHash.set(effect, {\n        instructionsStart: 0,\n        instructionsLength: 0\n      });\n    }\n    const maskData = this._maskHash.get(effect);\n    maskData.instructionsStart = instructionSet.instructionSize;\n    collectAllRenderables(\n      maskContainer,\n      instructionSet,\n      renderer.renderPipes\n    );\n    maskContainer.includeInBuild = false;\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: "stencilMask",\n      action: "pushMaskEnd",\n      mask,\n      canBundle: false\n    });\n    const instructionsLength = instructionSet.instructionSize - maskData.instructionsStart - 1;\n    maskData.instructionsLength = instructionsLength;\n    const renderTargetUid = renderer.renderTarget.renderTarget.uid;\n    (_a = this._maskStackHash)[renderTargetUid] ?? (_a[renderTargetUid] = 0);\n  }\n  pop(mask, _container, instructionSet) {\n    const effect = mask;\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    renderer.renderPipes.blendMode.setBlendMode(effect.mask, "none", instructionSet);\n    instructionSet.add({\n      renderPipeId: "stencilMask",\n      action: "popMaskBegin",\n      canBundle: false\n    });\n    const maskData = this._maskHash.get(mask);\n    for (let i = 0; i < maskData.instructionsLength; i++) {\n      instructionSet.instructions[instructionSet.instructionSize++] = instructionSet.instructions[maskData.instructionsStart++];\n    }\n    instructionSet.add({\n      renderPipeId: "stencilMask",\n      action: "popMaskEnd",\n      canBundle: false\n    });\n  }\n  execute(instruction) {\n    var _a;\n    const renderer = this._renderer;\n    const renderTargetUid = renderer.renderTarget.renderTarget.uid;\n    let maskStackIndex = (_a = this._maskStackHash)[renderTargetUid] ?? (_a[renderTargetUid] = 0);\n    if (instruction.action === "pushMaskBegin") {\n      renderer.renderTarget.ensureDepthStencil();\n      renderer.stencil.setStencilMode(state_const/* STENCIL_MODES */.D.RENDERING_MASK_ADD, maskStackIndex);\n      maskStackIndex++;\n      renderer.colorMask.setMask(0);\n    } else if (instruction.action === "pushMaskEnd") {\n      renderer.stencil.setStencilMode(state_const/* STENCIL_MODES */.D.MASK_ACTIVE, maskStackIndex);\n      renderer.colorMask.setMask(15);\n    } else if (instruction.action === "popMaskBegin") {\n      renderer.colorMask.setMask(0);\n      if (maskStackIndex !== 0) {\n        renderer.stencil.setStencilMode(state_const/* STENCIL_MODES */.D.RENDERING_MASK_REMOVE, maskStackIndex);\n      } else {\n        renderer.renderTarget.clear(null, gl_const/* CLEAR */.E.STENCIL);\n        renderer.stencil.setStencilMode(state_const/* STENCIL_MODES */.D.DISABLED, maskStackIndex);\n      }\n      maskStackIndex--;\n    } else if (instruction.action === "popMaskEnd") {\n      renderer.stencil.setStencilMode(state_const/* STENCIL_MODES */.D.MASK_ACTIVE, maskStackIndex);\n      renderer.colorMask.setMask(15);\n    }\n    this._maskStackHash[renderTargetUid] = maskStackIndex;\n  }\n  destroy() {\n    this._renderer = null;\n    this._maskStackHash = null;\n    this._maskHash = null;\n  }\n}\nStencilMaskPipe.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLPipes,\n    Extensions/* ExtensionType */.nw.WebGPUPipes,\n    Extensions/* ExtensionType */.nw.CanvasPipes\n  ],\n  name: "stencilMask"\n};\n\n\n//# sourceMappingURL=StencilMaskPipe.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/color/Color.mjs + 2 modules\nvar Color = __webpack_require__(8409);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/background/BackgroundSystem.mjs\n\n\n\n"use strict";\nconst _BackgroundSystem = class _BackgroundSystem {\n  constructor() {\n    this.clearBeforeRender = true;\n    this._backgroundColor = new Color/* Color */.I(0);\n    this.color = this._backgroundColor;\n    this.alpha = 1;\n  }\n  /**\n   * initiates the background system\n   * @param options - the options for the background colors\n   */\n  init(options) {\n    options = { ..._BackgroundSystem.defaultOptions, ...options };\n    this.clearBeforeRender = options.clearBeforeRender;\n    this.color = options.background || options.backgroundColor || this._backgroundColor;\n    this.alpha = options.backgroundAlpha;\n    this._backgroundColor.setAlpha(options.backgroundAlpha);\n  }\n  /** The background color to fill if not transparent */\n  get color() {\n    return this._backgroundColor;\n  }\n  set color(value) {\n    this._backgroundColor.setValue(value);\n  }\n  /** The background color alpha. Setting this to 0 will make the canvas transparent. */\n  get alpha() {\n    return this._backgroundColor.alpha;\n  }\n  set alpha(value) {\n    this._backgroundColor.setAlpha(value);\n  }\n  /** The background color as an [R, G, B, A] array. */\n  get colorRgba() {\n    return this._backgroundColor.toArray();\n  }\n  /**\n   * destroys the background system\n   * @internal\n   * @ignore\n   */\n  destroy() {\n  }\n};\n/** @ignore */\n_BackgroundSystem.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLSystem,\n    Extensions/* ExtensionType */.nw.WebGPUSystem,\n    Extensions/* ExtensionType */.nw.CanvasSystem\n  ],\n  name: "background",\n  priority: 0\n};\n/** default options used by the system */\n_BackgroundSystem.defaultOptions = {\n  /**\n   * {@link WebGLOptions.backgroundAlpha}\n   * @default 1\n   */\n  backgroundAlpha: 1,\n  /**\n   * {@link WebGLOptions.backgroundColor}\n   * @default 0x000000\n   */\n  backgroundColor: 0,\n  /**\n   * {@link WebGLOptions.clearBeforeRender}\n   * @default true\n   */\n  clearBeforeRender: true\n};\nlet BackgroundSystem = _BackgroundSystem;\n\n\n//# sourceMappingURL=BackgroundSystem.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/utils/logging/warn.mjs\nvar warn = __webpack_require__(4796);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/blendModes/BlendModePipe.mjs\n\n\n\n\n"use strict";\nconst BLEND_MODE_FILTERS = {};\nExtensions/* extensions */.Rw.handle(Extensions/* ExtensionType */.nw.BlendMode, (value) => {\n  if (!value.name) {\n    throw new Error("BlendMode extension must have a name property");\n  }\n  BLEND_MODE_FILTERS[value.name] = value.ref;\n}, (value) => {\n  delete BLEND_MODE_FILTERS[value.name];\n});\nclass BlendModePipe {\n  constructor(renderer) {\n    this._isAdvanced = false;\n    this._filterHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  /**\n   * This ensures that a blendMode switch is added to the instruction set if the blend mode has changed.\n   * @param renderable - The renderable we are adding to the instruction set\n   * @param blendMode - The blend mode of the renderable\n   * @param instructionSet - The instruction set we are adding to\n   */\n  setBlendMode(renderable, blendMode, instructionSet) {\n    if (this._activeBlendMode === blendMode) {\n      if (this._isAdvanced)\n        this._renderableList.push(renderable);\n      return;\n    }\n    this._activeBlendMode = blendMode;\n    if (this._isAdvanced) {\n      this._endAdvancedBlendMode(instructionSet);\n    }\n    this._isAdvanced = !!BLEND_MODE_FILTERS[blendMode];\n    if (this._isAdvanced) {\n      this._beginAdvancedBlendMode(instructionSet);\n      this._renderableList.push(renderable);\n    }\n  }\n  _beginAdvancedBlendMode(instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    const blendMode = this._activeBlendMode;\n    if (!BLEND_MODE_FILTERS[blendMode]) {\n      (0,warn/* warn */.Z)(`Unable to assign BlendMode: \'${blendMode}\'. You may want to include: import \'pixi.js/advanced-blend-modes\'`);\n      return;\n    }\n    let filterEffect = this._filterHash[blendMode];\n    if (!filterEffect) {\n      filterEffect = this._filterHash[blendMode] = new FilterEffect/* FilterEffect */.U();\n      filterEffect.filters = [new BLEND_MODE_FILTERS[blendMode]()];\n    }\n    const instruction = {\n      renderPipeId: "filter",\n      action: "pushFilter",\n      renderables: [],\n      filterEffect,\n      canBundle: false\n    };\n    this._renderableList = instruction.renderables;\n    instructionSet.add(instruction);\n  }\n  _endAdvancedBlendMode(instructionSet) {\n    this._renderableList = null;\n    this._renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: "filter",\n      action: "popFilter",\n      canBundle: false\n    });\n  }\n  /**\n   * called when the instruction build process is starting this will reset internally to the default blend mode\n   * @internal\n   * @ignore\n   */\n  buildStart() {\n    this._isAdvanced = false;\n  }\n  /**\n   * called when the instruction build process is finished, ensuring that if there is an advanced blend mode\n   * active, we add the final render instructions added to the instruction set\n   * @param instructionSet - The instruction set we are adding to\n   * @internal\n   * @ignore\n   */\n  buildEnd(instructionSet) {\n    if (this._isAdvanced) {\n      this._endAdvancedBlendMode(instructionSet);\n    }\n  }\n  /**\n   * @internal\n   * @ignore\n   */\n  destroy() {\n    this._renderer = null;\n    this._renderableList = null;\n    for (const i in this._filterHash) {\n      this._filterHash[i].destroy();\n    }\n    this._filterHash = null;\n  }\n}\n/** @ignore */\nBlendModePipe.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLPipes,\n    Extensions/* ExtensionType */.nw.WebGPUPipes,\n    Extensions/* ExtensionType */.nw.CanvasPipes\n  ],\n  name: "blendMode"\n};\n\n\n//# sourceMappingURL=BlendModePipe.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/extract/ExtractSystem.mjs\n\n\n\n\n"use strict";\nconst imageTypes = {\n  png: "image/png",\n  jpg: "image/jpeg",\n  webp: "image/webp"\n};\nconst _ExtractSystem = class _ExtractSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  _normalizeOptions(options, defaults = {}) {\n    if (options instanceof Container/* Container */.W2 || options instanceof Texture/* Texture */.x) {\n      return {\n        target: options,\n        ...defaults\n      };\n    }\n    return {\n      ...defaults,\n      ...options\n    };\n  }\n  /**\n   * Will return a HTML Image of the target\n   * @param options - The options for creating the image, or the target to extract\n   * @returns - HTML Image of the target\n   */\n  async image(options) {\n    const image = new Image();\n    image.src = await this.base64(options);\n    return image;\n  }\n  /**\n   * Will return a base64 encoded string of this target. It works by calling\n   * `Extract.canvas` and then running toDataURL on that.\n   * @param options - The options for creating the image, or the target to extract\n   */\n  async base64(options) {\n    options = this._normalizeOptions(\n      options,\n      _ExtractSystem.defaultImageOptions\n    );\n    const { format, quality } = options;\n    const canvas = this.canvas(options);\n    if (canvas.toBlob !== void 0) {\n      return new Promise((resolve, reject) => {\n        canvas.toBlob((blob) => {\n          if (!blob) {\n            reject(new Error("ICanvas.toBlob failed!"));\n            return;\n          }\n          const reader = new FileReader();\n          reader.onload = () => resolve(reader.result);\n          reader.onerror = reject;\n          reader.readAsDataURL(blob);\n        }, imageTypes[format], quality);\n      });\n    }\n    if (canvas.toDataURL !== void 0) {\n      return canvas.toDataURL(imageTypes[format], quality);\n    }\n    if (canvas.convertToBlob !== void 0) {\n      const blob = await canvas.convertToBlob({ type: imageTypes[format], quality });\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = reject;\n        reader.readAsDataURL(blob);\n      });\n    }\n    throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented");\n  }\n  /**\n   * Creates a Canvas element, renders this target to it and then returns it.\n   * @param options - The options for creating the canvas, or the target to extract\n   * @returns - A Canvas element with the texture rendered on.\n   */\n  canvas(options) {\n    options = this._normalizeOptions(options);\n    const target = options.target;\n    const renderer = this._renderer;\n    if (target instanceof Texture/* Texture */.x) {\n      return renderer.texture.generateCanvas(target);\n    }\n    const texture = renderer.textureGenerator.generateTexture(options);\n    const canvas = renderer.texture.generateCanvas(texture);\n    texture.destroy();\n    return canvas;\n  }\n  /**\n   * Will return a one-dimensional array containing the pixel data of the entire texture in RGBA\n   * order, with integer values between 0 and 255 (included).\n   * @param options - The options for extracting the image, or the target to extract\n   * @returns - One-dimensional array containing the pixel data of the entire texture\n   */\n  pixels(options) {\n    options = this._normalizeOptions(options);\n    const target = options.target;\n    const renderer = this._renderer;\n    const texture = target instanceof Texture/* Texture */.x ? target : renderer.textureGenerator.generateTexture(options);\n    const pixelInfo = renderer.texture.getPixels(texture);\n    if (target instanceof Container/* Container */.W2) {\n      texture.destroy();\n    }\n    return pixelInfo;\n  }\n  /**\n   * Will return a texture of the target\n   * @param options - The options for creating the texture, or the target to extract\n   * @returns - A texture of the target\n   */\n  texture(options) {\n    options = this._normalizeOptions(options);\n    if (options.target instanceof Texture/* Texture */.x)\n      return options.target;\n    return this._renderer.textureGenerator.generateTexture(options);\n  }\n  /**\n   * Will extract a HTMLImage of the target and download it\n   * @param options - The options for downloading and extracting the image, or the target to extract\n   */\n  download(options) {\n    options = this._normalizeOptions(options);\n    const canvas = this.canvas(options);\n    const link = document.createElement("a");\n    link.download = options.filename ?? "image.png";\n    link.href = canvas.toDataURL("image/png");\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n  /**\n   * Logs the target to the console as an image. This is a useful way to debug what\'s happening in the renderer.\n   * @param options - The options for logging the image, or the target to log\n   */\n  log(options) {\n    const width = options.width ?? 200;\n    options = this._normalizeOptions(options);\n    const canvas = this.canvas(options);\n    const base64 = canvas.toDataURL();\n    console.log(`[Pixi Texture] ${canvas.width}px ${canvas.height}px`);\n    const style = [\n      "font-size: 1px;",\n      `padding: ${width}px ${300}px;`,\n      `background: url(${base64}) no-repeat;`,\n      "background-size: contain;"\n    ].join(" ");\n    console.log("%c ", style);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n};\n/** @ignore */\n_ExtractSystem.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLSystem,\n    Extensions/* ExtensionType */.nw.WebGPUSystem\n  ],\n  name: "extract"\n};\n/** Default options for creating an image. */\n_ExtractSystem.defaultImageOptions = {\n  /** The format of the image. */\n  format: "png",\n  /** The quality of the image. */\n  quality: 1\n};\nlet ExtractSystem = _ExtractSystem;\n\n\n//# sourceMappingURL=ExtractSystem.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/maths/shapes/Rectangle.mjs\nvar Rectangle = __webpack_require__(3904);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/scene/container/bounds/getLocalBounds.mjs\nvar getLocalBounds = __webpack_require__(3197);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/TextureSource.mjs + 2 modules\nvar TextureSource = __webpack_require__(5206);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/texture/RenderTexture.mjs\n\n\n\n"use strict";\nclass RenderTexture extends Texture/* Texture */.x {\n  static create(options) {\n    return new Texture/* Texture */.x({\n      source: new TextureSource/* TextureSource */.p(options)\n    });\n  }\n  /**\n   * Resizes the render texture.\n   * @param width - The new width of the render texture.\n   * @param height - The new height of the render texture.\n   * @param resolution - The new resolution of the render texture.\n   * @returns This texture.\n   */\n  resize(width, height, resolution) {\n    this.source.resize(width, height, resolution);\n    return this;\n  }\n}\n\n\n//# sourceMappingURL=RenderTexture.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/extract/GenerateTextureSystem.mjs\n\n\n\n\n\n\n\n\n\n"use strict";\nconst tempRect = new Rectangle/* Rectangle */.A();\nconst GenerateTextureSystem_tempBounds = new Bounds/* Bounds */.Y();\nconst noColor = [0, 0, 0, 0];\nclass GenerateTextureSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  /**\n   * A Useful function that returns a texture of the display object that can then be used to create sprites\n   * This can be quite useful if your container is complicated and needs to be reused multiple times.\n   * @param {GenerateTextureOptions | Container} options - Generate texture options.\n   * @param {Container} [options.container] - If not given, the renderer\'s resolution is used.\n   * @param {Rectangle} options.region - The region of the container, that shall be rendered,\n   * @param {number} [options.resolution] - The resolution of the texture being generated.\n   *        if no region is specified, defaults to the local bounds of the container.\n   * @param {GenerateTextureSourceOptions} [options.textureSourceOptions] - Texture options for GPU.\n   * @returns a shiny new texture of the container passed in\n   */\n  generateTexture(options) {\n    if (options instanceof Container/* Container */.W2) {\n      options = {\n        target: options,\n        frame: void 0,\n        textureSourceOptions: {},\n        resolution: void 0\n      };\n    }\n    const resolution = options.resolution || this._renderer.resolution;\n    const antialias = options.antialias || this._renderer.view.antialias;\n    const container = options.target;\n    let clearColor = options.clearColor;\n    if (clearColor) {\n      const isRGBAArray = Array.isArray(clearColor) && clearColor.length === 4;\n      clearColor = isRGBAArray ? clearColor : Color/* Color */.I.shared.setValue(clearColor).toArray();\n    } else {\n      clearColor = noColor;\n    }\n    const region = options.frame?.copyTo(tempRect) || (0,getLocalBounds/* getLocalBounds */.a)(container, GenerateTextureSystem_tempBounds).rectangle;\n    region.width = Math.max(region.width, 1 / resolution) | 0;\n    region.height = Math.max(region.height, 1 / resolution) | 0;\n    const target = RenderTexture.create({\n      ...options.textureSourceOptions,\n      width: region.width,\n      height: region.height,\n      resolution,\n      antialias\n    });\n    const transform = Matrix/* Matrix */.y.shared.translate(-region.x, -region.y);\n    this._renderer.render({\n      container,\n      transform,\n      target,\n      clearColor\n    });\n    target.source.updateMipmaps();\n    return target;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGenerateTextureSystem.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLSystem,\n    Extensions/* ExtensionType */.nw.WebGPUSystem\n  ],\n  name: "textureGenerator"\n};\n\n\n//# sourceMappingURL=GenerateTextureSystem.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/maths/point/Point.mjs\nvar Point = __webpack_require__(1134);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/scene/graphics/gpu/colorToUniform.mjs\nvar colorToUniform = __webpack_require__(9989);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/BindGroup.mjs\nvar BindGroup = __webpack_require__(9818);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/GlobalUniformSystem.mjs\n\n\n\n\n\n\n\n\n"use strict";\nclass GlobalUniformSystem {\n  constructor(renderer) {\n    this._stackIndex = 0;\n    this._globalUniformDataStack = [];\n    this._uniformsPool = [];\n    this._activeUniforms = [];\n    this._bindGroupPool = [];\n    this._activeBindGroups = [];\n    this._renderer = renderer;\n  }\n  reset() {\n    this._stackIndex = 0;\n    for (let i = 0; i < this._activeUniforms.length; i++) {\n      this._uniformsPool.push(this._activeUniforms[i]);\n    }\n    for (let i = 0; i < this._activeBindGroups.length; i++) {\n      this._bindGroupPool.push(this._activeBindGroups[i]);\n    }\n    this._activeUniforms.length = 0;\n    this._activeBindGroups.length = 0;\n  }\n  start(options) {\n    this.reset();\n    this.push(options);\n  }\n  bind({\n    size,\n    projectionMatrix,\n    worldTransformMatrix,\n    worldColor,\n    offset\n  }) {\n    const renderTarget = this._renderer.renderTarget.renderTarget;\n    const currentGlobalUniformData = this._stackIndex ? this._globalUniformDataStack[this._stackIndex - 1] : {\n      projectionData: renderTarget,\n      worldTransformMatrix: new Matrix/* Matrix */.y(),\n      worldColor: 4294967295,\n      offset: new Point/* Point */.E()\n    };\n    const globalUniformData = {\n      projectionMatrix: projectionMatrix || this._renderer.renderTarget.projectionMatrix,\n      resolution: size || renderTarget.size,\n      worldTransformMatrix: worldTransformMatrix || currentGlobalUniformData.worldTransformMatrix,\n      worldColor: worldColor || currentGlobalUniformData.worldColor,\n      offset: offset || currentGlobalUniformData.offset,\n      bindGroup: null\n    };\n    const uniformGroup = this._uniformsPool.pop() || this._createUniforms();\n    this._activeUniforms.push(uniformGroup);\n    const uniforms = uniformGroup.uniforms;\n    uniforms.uProjectionMatrix = globalUniformData.projectionMatrix;\n    uniforms.uResolution = globalUniformData.resolution;\n    uniforms.uWorldTransformMatrix.copyFrom(globalUniformData.worldTransformMatrix);\n    uniforms.uWorldTransformMatrix.tx -= globalUniformData.offset.x;\n    uniforms.uWorldTransformMatrix.ty -= globalUniformData.offset.y;\n    (0,colorToUniform/* color32BitToUniform */.V)(\n      globalUniformData.worldColor,\n      uniforms.uWorldColorAlpha,\n      0\n    );\n    uniformGroup.update();\n    let bindGroup;\n    if (this._renderer.renderPipes.uniformBatch) {\n      bindGroup = this._renderer.renderPipes.uniformBatch.getUniformBindGroup(uniformGroup, false);\n    } else {\n      bindGroup = this._bindGroupPool.pop() || new BindGroup/* BindGroup */.v();\n      this._activeBindGroups.push(bindGroup);\n      bindGroup.setResource(uniformGroup, 0);\n    }\n    globalUniformData.bindGroup = bindGroup;\n    this._currentGlobalUniformData = globalUniformData;\n  }\n  push(options) {\n    this.bind(options);\n    this._globalUniformDataStack[this._stackIndex++] = this._currentGlobalUniformData;\n  }\n  pop() {\n    this._currentGlobalUniformData = this._globalUniformDataStack[--this._stackIndex - 1];\n    if (this._renderer.type === types/* RendererType */.g.WEBGL) {\n      this._currentGlobalUniformData.bindGroup.resources[0].update();\n    }\n  }\n  get bindGroup() {\n    return this._currentGlobalUniformData.bindGroup;\n  }\n  get uniformGroup() {\n    return this._currentGlobalUniformData.bindGroup.resources[0];\n  }\n  _createUniforms() {\n    const globalUniforms = new UniformGroup/* UniformGroup */.o({\n      uProjectionMatrix: { value: new Matrix/* Matrix */.y(), type: "mat3x3<f32>" },\n      uWorldTransformMatrix: { value: new Matrix/* Matrix */.y(), type: "mat3x3<f32>" },\n      // TODO - someone smart - set this to be a unorm8x4 rather than a vec4<f32>\n      uWorldColorAlpha: { value: new Float32Array(4), type: "vec4<f32>" },\n      uResolution: { value: [0, 0], type: "vec2<f32>" }\n    }, {\n      isStatic: true\n    });\n    return globalUniforms;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGlobalUniformSystem.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLSystem,\n    Extensions/* ExtensionType */.nw.WebGPUSystem,\n    Extensions/* ExtensionType */.nw.CanvasSystem\n  ],\n  name: "globalUniforms"\n};\n\n\n//# sourceMappingURL=GlobalUniformSystem.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/utils/sayHello.mjs\nvar sayHello = __webpack_require__(3921);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/startup/HelloSystem.mjs\n\n\n\n\n"use strict";\nclass HelloSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  /**\n   * It all starts here! This initiates every system, passing in the options for any system by name.\n   * @param options - the config for the renderer and all its systems\n   */\n  init(options) {\n    if (options.hello) {\n      let name = this._renderer.name;\n      if (this._renderer.type === types/* RendererType */.g.WEBGL) {\n        name += ` ${this._renderer.context.webGLVersion}`;\n      }\n      (0,sayHello/* sayHello */.D)(name);\n    }\n  }\n}\n/** @ignore */\nHelloSystem.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLSystem,\n    Extensions/* ExtensionType */.nw.WebGPUSystem,\n    Extensions/* ExtensionType */.nw.CanvasSystem\n  ],\n  name: "hello",\n  priority: -2\n};\n/** The default options for the system. */\nHelloSystem.defaultOptions = {\n  /** {@link WebGLOptions.hello} */\n  hello: false\n};\n\n\n//# sourceMappingURL=HelloSystem.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureGCSystem.mjs\n\n\n"use strict";\nconst _TextureGCSystem = class _TextureGCSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    this._renderer = renderer;\n    this.count = 0;\n    this.checkCount = 0;\n  }\n  init(options) {\n    options = { ..._TextureGCSystem.defaultOptions, ...options };\n    this.checkCountMax = options.textureGCCheckCountMax;\n    this.maxIdle = options.textureGCAMaxIdle;\n    this.active = options.textureGCActive;\n  }\n  /**\n   * Checks to see when the last time a texture was used.\n   * If the texture has not been used for a specified amount of time, it will be removed from the GPU.\n   */\n  postrender() {\n    if (!this._renderer.renderingToScreen) {\n      return;\n    }\n    this.count++;\n    if (!this.active)\n      return;\n    this.checkCount++;\n    if (this.checkCount > this.checkCountMax) {\n      this.checkCount = 0;\n      this.run();\n    }\n  }\n  /**\n   * Checks to see when the last time a texture was used.\n   * If the texture has not been used for a specified amount of time, it will be removed from the GPU.\n   */\n  run() {\n    const managedTextures = this._renderer.texture.managedTextures;\n    for (let i = 0; i < managedTextures.length; i++) {\n      const texture = managedTextures[i];\n      if (texture.autoGarbageCollect && texture.resource && texture._touched > -1 && this.count - texture._touched > this.maxIdle) {\n        texture._touched = -1;\n        texture.unload();\n      }\n    }\n  }\n  destroy() {\n    this._renderer = null;\n  }\n};\n/** @ignore */\n_TextureGCSystem.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLSystem,\n    Extensions/* ExtensionType */.nw.WebGPUSystem\n  ],\n  name: "textureGC"\n};\n/** default options for the TextureGCSystem */\n_TextureGCSystem.defaultOptions = {\n  /**\n   * If set to true, this will enable the garbage collector on the GPU.\n   * @default true\n   */\n  textureGCActive: true,\n  /**\n   * The maximum idle frames before a texture is destroyed by garbage collection.\n   * @default 60 * 60\n   */\n  textureGCAMaxIdle: 60 * 60,\n  /**\n   * Frames between two garbage collections.\n   * @default 600\n   */\n  textureGCCheckCountMax: 600\n};\nlet TextureGCSystem = _TextureGCSystem;\nExtensions/* extensions */.Rw.add(TextureGCSystem);\n\n\n//# sourceMappingURL=TextureGCSystem.mjs.map\n\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/environment/adapter.mjs + 1 modules\nvar adapter = __webpack_require__(3646);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/utils/logging/deprecation.mjs\nvar deprecation = __webpack_require__(156);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/RenderTarget.mjs\nvar RenderTarget = __webpack_require__(1826);\n// EXTERNAL MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/texture/utils/getCanvasTexture.mjs\nvar getCanvasTexture = __webpack_require__(1604);\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/view/ViewSystem.mjs\n\n\n\n\n\n\n\n"use strict";\nconst _ViewSystem = class _ViewSystem {\n  /** The resolution / device pixel ratio of the renderer. */\n  get resolution() {\n    return this.texture.source._resolution;\n  }\n  set resolution(value) {\n    this.texture.source.resize(\n      this.texture.source.width,\n      this.texture.source.height,\n      value\n    );\n  }\n  /**\n   * initiates the view system\n   * @param options - the options for the view\n   */\n  init(options) {\n    options = {\n      ..._ViewSystem.defaultOptions,\n      ...options\n    };\n    if (options.view) {\n      (0,deprecation/* deprecation */.a)(deprecation/* v8_0_0 */.P, "ViewSystem.view has been renamed to ViewSystem.canvas");\n      options.canvas = options.view;\n    }\n    this.screen = new Rectangle/* Rectangle */.A(0, 0, options.width, options.height);\n    this.canvas = options.canvas || adapter/* DOMAdapter */.z.get().createCanvas();\n    this.antialias = !!options.antialias;\n    this.texture = (0,getCanvasTexture/* getCanvasTexture */.t)(this.canvas, options);\n    this.renderTarget = new RenderTarget/* RenderTarget */.A({\n      colorTextures: [this.texture],\n      depth: !!options.depth,\n      isRoot: true\n    });\n    this.texture.source.transparent = options.backgroundAlpha < 1;\n    this.multiView = !!options.multiView;\n    if (this.autoDensity) {\n      this.canvas.style.width = `${this.texture.width}px`;\n      this.canvas.style.height = `${this.texture.height}px`;\n    }\n    this.resolution = options.resolution;\n  }\n  /**\n   * Resizes the screen and canvas to the specified dimensions.\n   * @param desiredScreenWidth - The new width of the screen.\n   * @param desiredScreenHeight - The new height of the screen.\n   * @param resolution\n   */\n  resize(desiredScreenWidth, desiredScreenHeight, resolution) {\n    this.texture.source.resize(desiredScreenWidth, desiredScreenHeight, resolution);\n    this.screen.width = this.texture.frame.width;\n    this.screen.height = this.texture.frame.height;\n    if (this.autoDensity) {\n      this.canvas.style.width = `${desiredScreenWidth}px`;\n      this.canvas.style.height = `${desiredScreenHeight}px`;\n    }\n  }\n  /**\n   * Destroys this System and optionally removes the canvas from the dom.\n   * @param {options | false} options - The options for destroying the view, or "false".\n   * @param options.removeView - Whether to remove the view element from the DOM. Defaults to `false`.\n   */\n  destroy(options = false) {\n    const removeView = typeof options === "boolean" ? options : !!options?.removeView;\n    if (removeView && this.canvas.parentNode) {\n      this.canvas.parentNode.removeChild(this.canvas);\n    }\n  }\n};\n/** @ignore */\n_ViewSystem.extension = {\n  type: [\n    Extensions/* ExtensionType */.nw.WebGLSystem,\n    Extensions/* ExtensionType */.nw.WebGPUSystem,\n    Extensions/* ExtensionType */.nw.CanvasSystem\n  ],\n  name: "view",\n  priority: 0\n};\n/** The default options for the view system. */\n_ViewSystem.defaultOptions = {\n  /**\n   * {@link WebGLOptions.width}\n   * @default 800\n   */\n  width: 800,\n  /**\n   * {@link WebGLOptions.height}\n   * @default 600\n   */\n  height: 600,\n  /**\n   * {@link WebGLOptions.autoDensity}\n   * @default false\n   */\n  autoDensity: false,\n  /**\n   * {@link WebGLOptions.antialias}\n   * @default false\n   */\n  antialias: false\n};\nlet ViewSystem = _ViewSystem;\n\n\n//# sourceMappingURL=ViewSystem.mjs.map\n\n;// CONCATENATED MODULE: ./node_modules/pixi.js/lib/rendering/renderers/shared/system/SharedSystems.mjs\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"use strict";\nconst SharedSystems = [\n  BackgroundSystem,\n  GlobalUniformSystem,\n  HelloSystem,\n  ViewSystem,\n  RenderGroupSystem,\n  TextureGCSystem,\n  GenerateTextureSystem,\n  ExtractSystem,\n  globalHooks/* RendererInitHook */.C\n];\nconst SharedRenderPipes = [\n  BlendModePipe,\n  BatcherPipe,\n  SpritePipe,\n  RenderGroupPipe,\n  AlphaMaskPipe,\n  StencilMaskPipe,\n  ColorMaskPipe,\n  CustomRenderPipe\n];\n\n\n//# sourceMappingURL=SharedSystems.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxFQUFFLGFBQWE7QUFDZixFQUFFLFdBQVc7QUFDYixFQUFFLFVBQVU7QUFDWixFQUFFLGVBQWU7QUFDakIsRUFBRSxhQUFhO0FBQ2YsRUFBRSxlQUFlO0FBQ2pCLEVBQUUsYUFBYTtBQUNmLEVBQUUsZ0JBQWdCO0FBQ2xCOztBQUU0QztBQUM1QyIsInNvdXJjZXMiOlsid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3NjZW5lL2NvbnRhaW5lci9DdXN0b21SZW5kZXJQaXBlLm1qcz82YThmIiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3NjZW5lL2NvbnRhaW5lci91dGlscy9leGVjdXRlSW5zdHJ1Y3Rpb25zLm1qcz9kZjdmIiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3NjZW5lL2NvbnRhaW5lci9SZW5kZXJHcm91cFBpcGUubWpzPzZlZmUiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvc2NlbmUvY29udGFpbmVyL3V0aWxzL2J1aWxkSW5zdHJ1Y3Rpb25zLm1qcz8xMjEyIiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3NjZW5lL2NvbnRhaW5lci91dGlscy9jbGVhckxpc3QubWpzP2E5MjMiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvc2NlbmUvY29udGFpbmVyL3V0aWxzL2NvbGxlY3RSZW5kZXJHcm91cHMubWpzPzkzMGIiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvc2NlbmUvY29udGFpbmVyL3V0aWxzL21peEhleENvbG9ycy5tanM/NTAxOCIsIndlYnBhY2s6Ly9AbWFzYXRvbWFraW5vL3BpeGlqcy1wYXJ0aWNsZS13YXlwb2ludC8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9zY2VuZS9jb250YWluZXIvdXRpbHMvbWl4Q29sb3JzLm1qcz9kNWJjIiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3NjZW5lL2NvbnRhaW5lci91dGlscy91cGRhdGVSZW5kZXJHcm91cFRyYW5zZm9ybXMubWpzPzMyNjIiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvc2NlbmUvY29udGFpbmVyL3V0aWxzL3ZhbGlkYXRlUmVuZGVyYWJsZXMubWpzPzE3N2IiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvc2NlbmUvY29udGFpbmVyL1JlbmRlckdyb3VwU3lzdGVtLm1qcz8zZDg2Iiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3NjZW5lL3Nwcml0ZS9TcHJpdGVQaXBlLm1qcz9iMDI1Iiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3JlbmRlcmluZy9iYXRjaGVyL3NoYXJlZC9CYXRjaGVyUGlwZS5tanM/YWNkZCIsIndlYnBhY2s6Ly9AbWFzYXRvbWFraW5vL3BpeGlqcy1wYXJ0aWNsZS13YXlwb2ludC8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9maWx0ZXJzL0ZpbHRlci5tanM/YTY4NSIsIndlYnBhY2s6Ly9AbWFzYXRvbWFraW5vL3BpeGlqcy1wYXJ0aWNsZS13YXlwb2ludC8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9maWx0ZXJzL21hc2svbWFzay5mcmFnLm1qcz9iMDI2Iiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2ZpbHRlcnMvbWFzay9tYXNrLnZlcnQubWpzPzAwZDkiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvZmlsdGVycy9tYXNrL21hc2sud2dzbC5tanM/YmIyMyIsIndlYnBhY2s6Ly9AbWFzYXRvbWFraW5vL3BpeGlqcy1wYXJ0aWNsZS13YXlwb2ludC8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9maWx0ZXJzL21hc2svTWFza0ZpbHRlci5tanM/Y2FkMCIsIndlYnBhY2s6Ly9AbWFzYXRvbWFraW5vL3BpeGlqcy1wYXJ0aWNsZS13YXlwb2ludC8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9yZW5kZXJpbmcvbWFzay9hbHBoYS9BbHBoYU1hc2tQaXBlLm1qcz8wYWViIiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3JlbmRlcmluZy9tYXNrL2NvbG9yL0NvbG9yTWFza1BpcGUubWpzPzQ1OTEiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL21hc2svc3RlbmNpbC9TdGVuY2lsTWFza1BpcGUubWpzPzdjY2EiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvYmFja2dyb3VuZC9CYWNrZ3JvdW5kU3lzdGVtLm1qcz83ZDg0Iiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3JlbmRlcmluZy9yZW5kZXJlcnMvc2hhcmVkL2JsZW5kTW9kZXMvQmxlbmRNb2RlUGlwZS5tanM/Y2M3MiIsIndlYnBhY2s6Ly9AbWFzYXRvbWFraW5vL3BpeGlqcy1wYXJ0aWNsZS13YXlwb2ludC8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9yZW5kZXJpbmcvcmVuZGVyZXJzL3NoYXJlZC9leHRyYWN0L0V4dHJhY3RTeXN0ZW0ubWpzPzA1YTEiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvdGV4dHVyZS9SZW5kZXJUZXh0dXJlLm1qcz8wMjQ3Iiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3JlbmRlcmluZy9yZW5kZXJlcnMvc2hhcmVkL2V4dHJhY3QvR2VuZXJhdGVUZXh0dXJlU3lzdGVtLm1qcz82MGRhIiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3JlbmRlcmluZy9yZW5kZXJlcnMvc2hhcmVkL3JlbmRlclRhcmdldC9HbG9iYWxVbmlmb3JtU3lzdGVtLm1qcz84ZDM4Iiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3JlbmRlcmluZy9yZW5kZXJlcnMvc2hhcmVkL3N0YXJ0dXAvSGVsbG9TeXN0ZW0ubWpzP2ZkYTQiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvdGV4dHVyZS9UZXh0dXJlR0NTeXN0ZW0ubWpzP2QyOTgiLCJ3ZWJwYWNrOi8vQG1hc2F0b21ha2luby9waXhpanMtcGFydGljbGUtd2F5cG9pbnQvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvdmlldy9WaWV3U3lzdGVtLm1qcz83YTllIiwid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3JlbmRlcmluZy9yZW5kZXJlcnMvc2hhcmVkL3N5c3RlbS9TaGFyZWRTeXN0ZW1zLm1qcz9hZGI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV4dGVuc2lvblR5cGUgfSBmcm9tICcuLi8uLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jbGFzcyBDdXN0b21SZW5kZXJQaXBlIHtcbiAgY29uc3RydWN0b3IocmVuZGVyZXIpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICB9XG4gIGFkZFJlbmRlcmFibGUoY29udGFpbmVyLCBpbnN0cnVjdGlvblNldCkge1xuICAgIHRoaXMuX3JlbmRlcmVyLnJlbmRlclBpcGVzLmJhdGNoLmJyZWFrKGluc3RydWN0aW9uU2V0KTtcbiAgICBpbnN0cnVjdGlvblNldC5hZGQoY29udGFpbmVyKTtcbiAgfVxuICBleGVjdXRlKGNvbnRhaW5lcikge1xuICAgIGlmICghY29udGFpbmVyLmlzUmVuZGVyYWJsZSlcbiAgICAgIHJldHVybjtcbiAgICBjb250YWluZXIucmVuZGVyKHRoaXMuX3JlbmRlcmVyKTtcbiAgfVxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gbnVsbDtcbiAgfVxufVxuQ3VzdG9tUmVuZGVyUGlwZS5leHRlbnNpb24gPSB7XG4gIHR5cGU6IFtcbiAgICBFeHRlbnNpb25UeXBlLldlYkdMUGlwZXMsXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHUFVQaXBlcyxcbiAgICBFeHRlbnNpb25UeXBlLkNhbnZhc1BpcGVzXG4gIF0sXG4gIG5hbWU6IFwiY3VzdG9tUmVuZGVyXCJcbn07XG5cbmV4cG9ydCB7IEN1c3RvbVJlbmRlclBpcGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUN1c3RvbVJlbmRlclBpcGUubWpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBleGVjdXRlSW5zdHJ1Y3Rpb25zKHJlbmRlckdyb3VwLCByZW5kZXJlcikge1xuICBjb25zdCBpbnN0cnVjdGlvblNldCA9IHJlbmRlckdyb3VwLmluc3RydWN0aW9uU2V0O1xuICBjb25zdCBpbnN0cnVjdGlvbnMgPSBpbnN0cnVjdGlvblNldC5pbnN0cnVjdGlvbnM7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zdHJ1Y3Rpb25TZXQuaW5zdHJ1Y3Rpb25TaXplOyBpKyspIHtcbiAgICBjb25zdCBpbnN0cnVjdGlvbiA9IGluc3RydWN0aW9uc1tpXTtcbiAgICByZW5kZXJlcltpbnN0cnVjdGlvbi5yZW5kZXJQaXBlSWRdLmV4ZWN1dGUoaW5zdHJ1Y3Rpb24pO1xuICB9XG59XG5cbmV4cG9ydCB7IGV4ZWN1dGVJbnN0cnVjdGlvbnMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4ZWN1dGVJbnN0cnVjdGlvbnMubWpzLm1hcFxuIiwiaW1wb3J0IHsgRXh0ZW5zaW9uVHlwZSB9IGZyb20gJy4uLy4uL2V4dGVuc2lvbnMvRXh0ZW5zaW9ucy5tanMnO1xuaW1wb3J0IHsgZXhlY3V0ZUluc3RydWN0aW9ucyB9IGZyb20gJy4vdXRpbHMvZXhlY3V0ZUluc3RydWN0aW9ucy5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIFJlbmRlckdyb3VwUGlwZSB7XG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgfVxuICBhZGRSZW5kZXJHcm91cChyZW5kZXJHcm91cCwgaW5zdHJ1Y3Rpb25TZXQpIHtcbiAgICB0aGlzLl9yZW5kZXJlci5yZW5kZXJQaXBlcy5iYXRjaC5icmVhayhpbnN0cnVjdGlvblNldCk7XG4gICAgaW5zdHJ1Y3Rpb25TZXQuYWRkKHJlbmRlckdyb3VwKTtcbiAgfVxuICBleGVjdXRlKHJlbmRlckdyb3VwKSB7XG4gICAgaWYgKCFyZW5kZXJHcm91cC5pc1JlbmRlcmFibGUpXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5fcmVuZGVyZXIuZ2xvYmFsVW5pZm9ybXMucHVzaCh7XG4gICAgICB3b3JsZFRyYW5zZm9ybU1hdHJpeDogcmVuZGVyR3JvdXAud29ybGRUcmFuc2Zvcm0sXG4gICAgICB3b3JsZENvbG9yOiByZW5kZXJHcm91cC53b3JsZENvbG9yQWxwaGFcbiAgICB9KTtcbiAgICBleGVjdXRlSW5zdHJ1Y3Rpb25zKHJlbmRlckdyb3VwLCB0aGlzLl9yZW5kZXJlci5yZW5kZXJQaXBlcyk7XG4gICAgdGhpcy5fcmVuZGVyZXIuZ2xvYmFsVW5pZm9ybXMucG9wKCk7XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IG51bGw7XG4gIH1cbn1cblJlbmRlckdyb3VwUGlwZS5leHRlbnNpb24gPSB7XG4gIHR5cGU6IFtcbiAgICBFeHRlbnNpb25UeXBlLldlYkdMUGlwZXMsXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHUFVQaXBlcyxcbiAgICBFeHRlbnNpb25UeXBlLkNhbnZhc1BpcGVzXG4gIF0sXG4gIG5hbWU6IFwicmVuZGVyR3JvdXBcIlxufTtcblxuZXhwb3J0IHsgUmVuZGVyR3JvdXBQaXBlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZW5kZXJHcm91cFBpcGUubWpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBidWlsZEluc3RydWN0aW9ucyhyZW5kZXJHcm91cCwgcmVuZGVyUGlwZXMpIHtcbiAgY29uc3Qgcm9vdCA9IHJlbmRlckdyb3VwLnJvb3Q7XG4gIGNvbnN0IGluc3RydWN0aW9uU2V0ID0gcmVuZGVyR3JvdXAuaW5zdHJ1Y3Rpb25TZXQ7XG4gIGluc3RydWN0aW9uU2V0LnJlc2V0KCk7XG4gIHJlbmRlclBpcGVzLmJhdGNoLmJ1aWxkU3RhcnQoaW5zdHJ1Y3Rpb25TZXQpO1xuICByZW5kZXJQaXBlcy5ibGVuZE1vZGUuYnVpbGRTdGFydCgpO1xuICByZW5kZXJQaXBlcy5jb2xvck1hc2suYnVpbGRTdGFydCgpO1xuICBpZiAocm9vdC5zb3J0YWJsZUNoaWxkcmVuKSB7XG4gICAgcm9vdC5zb3J0Q2hpbGRyZW4oKTtcbiAgfVxuICBjb2xsZWN0QWxsUmVuZGVyYWJsZXNBZHZhbmNlZChyb290LCBpbnN0cnVjdGlvblNldCwgcmVuZGVyUGlwZXMsIHRydWUpO1xuICByZW5kZXJQaXBlcy5iYXRjaC5idWlsZEVuZChpbnN0cnVjdGlvblNldCk7XG4gIHJlbmRlclBpcGVzLmJsZW5kTW9kZS5idWlsZEVuZChpbnN0cnVjdGlvblNldCk7XG59XG5mdW5jdGlvbiBjb2xsZWN0QWxsUmVuZGVyYWJsZXMoY29udGFpbmVyLCBpbnN0cnVjdGlvblNldCwgcmVuZGVyZXJQaXBlcykge1xuICBpZiAoY29udGFpbmVyLmdsb2JhbERpc3BsYXlTdGF0dXMgPCA3IHx8ICFjb250YWluZXIuaW5jbHVkZUluQnVpbGQpXG4gICAgcmV0dXJuO1xuICBpZiAoY29udGFpbmVyLnNvcnRhYmxlQ2hpbGRyZW4pIHtcbiAgICBjb250YWluZXIuc29ydENoaWxkcmVuKCk7XG4gIH1cbiAgaWYgKGNvbnRhaW5lci5pc1NpbXBsZSkge1xuICAgIGNvbGxlY3RBbGxSZW5kZXJhYmxlc1NpbXBsZShjb250YWluZXIsIGluc3RydWN0aW9uU2V0LCByZW5kZXJlclBpcGVzKTtcbiAgfSBlbHNlIHtcbiAgICBjb2xsZWN0QWxsUmVuZGVyYWJsZXNBZHZhbmNlZChjb250YWluZXIsIGluc3RydWN0aW9uU2V0LCByZW5kZXJlclBpcGVzLCBmYWxzZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNvbGxlY3RBbGxSZW5kZXJhYmxlc1NpbXBsZShjb250YWluZXIsIGluc3RydWN0aW9uU2V0LCByZW5kZXJQaXBlcykge1xuICBpZiAoY29udGFpbmVyLnJlbmRlclBpcGVJZCkge1xuICAgIHJlbmRlclBpcGVzLmJsZW5kTW9kZS5zZXRCbGVuZE1vZGUoY29udGFpbmVyLCBjb250YWluZXIuZ3JvdXBCbGVuZE1vZGUsIGluc3RydWN0aW9uU2V0KTtcbiAgICBjb250YWluZXIuZGlkVmlld1VwZGF0ZSA9IGZhbHNlO1xuICAgIGNvbnN0IHJwID0gcmVuZGVyUGlwZXM7XG4gICAgcnBbY29udGFpbmVyLnJlbmRlclBpcGVJZF0uYWRkUmVuZGVyYWJsZShjb250YWluZXIsIGluc3RydWN0aW9uU2V0KTtcbiAgfVxuICBpZiAoIWNvbnRhaW5lci5yZW5kZXJHcm91cCkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gY29udGFpbmVyLmNoaWxkcmVuO1xuICAgIGNvbnN0IGxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBjb2xsZWN0QWxsUmVuZGVyYWJsZXMoY2hpbGRyZW5baV0sIGluc3RydWN0aW9uU2V0LCByZW5kZXJQaXBlcyk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBjb2xsZWN0QWxsUmVuZGVyYWJsZXNBZHZhbmNlZChjb250YWluZXIsIGluc3RydWN0aW9uU2V0LCByZW5kZXJQaXBlcywgaXNSb290KSB7XG4gIGlmICghaXNSb290ICYmIGNvbnRhaW5lci5yZW5kZXJHcm91cCkge1xuICAgIHJlbmRlclBpcGVzLnJlbmRlckdyb3VwLmFkZFJlbmRlckdyb3VwKGNvbnRhaW5lci5yZW5kZXJHcm91cCwgaW5zdHJ1Y3Rpb25TZXQpO1xuICB9IGVsc2Uge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGFpbmVyLmVmZmVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVmZmVjdCA9IGNvbnRhaW5lci5lZmZlY3RzW2ldO1xuICAgICAgY29uc3QgcGlwZSA9IHJlbmRlclBpcGVzW2VmZmVjdC5waXBlXTtcbiAgICAgIHBpcGUucHVzaChlZmZlY3QsIGNvbnRhaW5lciwgaW5zdHJ1Y3Rpb25TZXQpO1xuICAgIH1cbiAgICBjb25zdCByZW5kZXJQaXBlSWQgPSBjb250YWluZXIucmVuZGVyUGlwZUlkO1xuICAgIGlmIChyZW5kZXJQaXBlSWQpIHtcbiAgICAgIHJlbmRlclBpcGVzLmJsZW5kTW9kZS5zZXRCbGVuZE1vZGUoY29udGFpbmVyLCBjb250YWluZXIuZ3JvdXBCbGVuZE1vZGUsIGluc3RydWN0aW9uU2V0KTtcbiAgICAgIGNvbnRhaW5lci5kaWRWaWV3VXBkYXRlID0gZmFsc2U7XG4gICAgICBjb25zdCBwaXBlID0gcmVuZGVyUGlwZXNbcmVuZGVyUGlwZUlkXTtcbiAgICAgIHBpcGUuYWRkUmVuZGVyYWJsZShjb250YWluZXIsIGluc3RydWN0aW9uU2V0KTtcbiAgICB9XG4gICAgY29uc3QgY2hpbGRyZW4gPSBjb250YWluZXIuY2hpbGRyZW47XG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb2xsZWN0QWxsUmVuZGVyYWJsZXMoY2hpbGRyZW5baV0sIGluc3RydWN0aW9uU2V0LCByZW5kZXJQaXBlcyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSBjb250YWluZXIuZWZmZWN0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgZWZmZWN0ID0gY29udGFpbmVyLmVmZmVjdHNbaV07XG4gICAgICBjb25zdCBwaXBlID0gcmVuZGVyUGlwZXNbZWZmZWN0LnBpcGVdO1xuICAgICAgcGlwZS5wb3AoZWZmZWN0LCBjb250YWluZXIsIGluc3RydWN0aW9uU2V0KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgYnVpbGRJbnN0cnVjdGlvbnMsIGNvbGxlY3RBbGxSZW5kZXJhYmxlcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVpbGRJbnN0cnVjdGlvbnMubWpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBjbGVhckxpc3QobGlzdCwgaW5kZXgpIHtcbiAgaW5kZXggfHwgKGluZGV4ID0gMCk7XG4gIGZvciAobGV0IGogPSBpbmRleDsgaiA8IGxpc3QubGVuZ3RoOyBqKyspIHtcbiAgICBpZiAobGlzdFtqXSkge1xuICAgICAgbGlzdFtqXSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBjbGVhckxpc3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsZWFyTGlzdC5tanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIGNvbGxlY3RSZW5kZXJHcm91cHMocmVuZGVyR3JvdXAsIG91dCA9IFtdKSB7XG4gIG91dC5wdXNoKHJlbmRlckdyb3VwKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW5kZXJHcm91cC5yZW5kZXJHcm91cENoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgY29sbGVjdFJlbmRlckdyb3VwcyhyZW5kZXJHcm91cC5yZW5kZXJHcm91cENoaWxkcmVuW2ldLCBvdXQpO1xuICB9XG4gIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCB7IGNvbGxlY3RSZW5kZXJHcm91cHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbGxlY3RSZW5kZXJHcm91cHMubWpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBtaXhIZXhDb2xvcnMoY29sb3IxLCBjb2xvcjIsIHJhdGlvKSB7XG4gIGNvbnN0IHIxID0gY29sb3IxID4+IDE2ICYgMjU1O1xuICBjb25zdCBnMSA9IGNvbG9yMSA+PiA4ICYgMjU1O1xuICBjb25zdCBiMSA9IGNvbG9yMSAmIDI1NTtcbiAgY29uc3QgcjIgPSBjb2xvcjIgPj4gMTYgJiAyNTU7XG4gIGNvbnN0IGcyID0gY29sb3IyID4+IDggJiAyNTU7XG4gIGNvbnN0IGIyID0gY29sb3IyICYgMjU1O1xuICBjb25zdCByID0gcjEgKyAocjIgLSByMSkgKiByYXRpbztcbiAgY29uc3QgZyA9IGcxICsgKGcyIC0gZzEpICogcmF0aW87XG4gIGNvbnN0IGIgPSBiMSArIChiMiAtIGIxKSAqIHJhdGlvO1xuICByZXR1cm4gKHIgPDwgMTYpICsgKGcgPDwgOCkgKyBiO1xufVxuXG5leHBvcnQgeyBtaXhIZXhDb2xvcnMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1peEhleENvbG9ycy5tanMubWFwXG4iLCJpbXBvcnQgeyBtaXhIZXhDb2xvcnMgfSBmcm9tICcuL21peEhleENvbG9ycy5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNvbnN0IFdISVRFX0JHUiA9IDE2Nzc3MjE1O1xuZnVuY3Rpb24gbWl4Q29sb3JzKGxvY2FsQkdSQ29sb3IsIHBhcmVudEJHUkNvbG9yKSB7XG4gIGlmIChsb2NhbEJHUkNvbG9yID09PSBXSElURV9CR1IgfHwgcGFyZW50QkdSQ29sb3IgPT09IFdISVRFX0JHUikge1xuICAgIHJldHVybiBsb2NhbEJHUkNvbG9yICsgcGFyZW50QkdSQ29sb3IgLSBXSElURV9CR1I7XG4gIH1cbiAgcmV0dXJuIG1peEhleENvbG9ycyhsb2NhbEJHUkNvbG9yLCBwYXJlbnRCR1JDb2xvciwgMC41KTtcbn1cbmZ1bmN0aW9uIG1peFN0YW5kYXJkQW5kMzJCaXRDb2xvcnMobG9jYWxDb2xvclJHQiwgbG9jYWxBbHBoYSwgcGFyZW50Q29sb3IpIHtcbiAgY29uc3QgcGFyZW50QWxwaGEgPSAocGFyZW50Q29sb3IgPj4gMjQgJiAyNTUpIC8gMjU1O1xuICBjb25zdCBnbG9iYWxBbHBoYSA9IGxvY2FsQWxwaGEgKiBwYXJlbnRBbHBoYSAqIDI1NTtcbiAgY29uc3QgbG9jYWxCR1JDb2xvciA9ICgobG9jYWxDb2xvclJHQiAmIDI1NSkgPDwgMTYpICsgKGxvY2FsQ29sb3JSR0IgJiA2NTI4MCkgKyAobG9jYWxDb2xvclJHQiA+PiAxNiAmIDI1NSk7XG4gIGNvbnN0IHBhcmVudEJHUkNvbG9yID0gcGFyZW50Q29sb3IgJiAxNjc3NzIxNTtcbiAgbGV0IHNoYXJlZEJHUkNvbG9yO1xuICBpZiAobG9jYWxCR1JDb2xvciA9PT0gV0hJVEVfQkdSIHx8IHBhcmVudEJHUkNvbG9yID09PSBXSElURV9CR1IpIHtcbiAgICBzaGFyZWRCR1JDb2xvciA9IGxvY2FsQkdSQ29sb3IgKyBwYXJlbnRCR1JDb2xvciAtIFdISVRFX0JHUjtcbiAgfSBlbHNlIHtcbiAgICBzaGFyZWRCR1JDb2xvciA9IG1peEhleENvbG9ycyhsb2NhbEJHUkNvbG9yLCBwYXJlbnRCR1JDb2xvciwgMC41KTtcbiAgfVxuICByZXR1cm4gc2hhcmVkQkdSQ29sb3IgKyAoZ2xvYmFsQWxwaGEgPDwgMjQpO1xufVxuXG5leHBvcnQgeyBtaXhDb2xvcnMsIG1peFN0YW5kYXJkQW5kMzJCaXRDb2xvcnMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1peENvbG9ycy5tanMubWFwXG4iLCJpbXBvcnQgeyBDb250YWluZXIsIFVQREFURV9WSVNJQkxFLCBVUERBVEVfQ09MT1IsIFVQREFURV9CTEVORCB9IGZyb20gJy4uL0NvbnRhaW5lci5tanMnO1xuaW1wb3J0IHsgY2xlYXJMaXN0IH0gZnJvbSAnLi9jbGVhckxpc3QubWpzJztcbmltcG9ydCB7IG1peENvbG9ycyB9IGZyb20gJy4vbWl4Q29sb3JzLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgdGVtcENvbnRhaW5lciA9IG5ldyBDb250YWluZXIoKTtcbmNvbnN0IFVQREFURV9CTEVORF9DT0xPUl9WSVNJQkxFID0gVVBEQVRFX1ZJU0lCTEUgfCBVUERBVEVfQ09MT1IgfCBVUERBVEVfQkxFTkQ7XG5mdW5jdGlvbiB1cGRhdGVSZW5kZXJHcm91cFRyYW5zZm9ybXMocmVuZGVyR3JvdXAsIHVwZGF0ZUNoaWxkUmVuZGVyR3JvdXBzID0gZmFsc2UpIHtcbiAgdXBkYXRlUmVuZGVyR3JvdXBUcmFuc2Zvcm0ocmVuZGVyR3JvdXApO1xuICBjb25zdCBjaGlsZHJlblRvVXBkYXRlID0gcmVuZGVyR3JvdXAuY2hpbGRyZW5Ub1VwZGF0ZTtcbiAgY29uc3QgdXBkYXRlVGljayA9IHJlbmRlckdyb3VwLnVwZGF0ZVRpY2srKztcbiAgZm9yIChjb25zdCBqIGluIGNoaWxkcmVuVG9VcGRhdGUpIHtcbiAgICBjb25zdCByZW5kZXJHcm91cERlcHRoID0gTnVtYmVyKGopO1xuICAgIGNvbnN0IGNoaWxkcmVuQXREZXB0aCA9IGNoaWxkcmVuVG9VcGRhdGVbal07XG4gICAgY29uc3QgbGlzdCA9IGNoaWxkcmVuQXREZXB0aC5saXN0O1xuICAgIGNvbnN0IGluZGV4ID0gY2hpbGRyZW5BdERlcHRoLmluZGV4O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kZXg7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGQgPSBsaXN0W2ldO1xuICAgICAgaWYgKGNoaWxkLnBhcmVudFJlbmRlckdyb3VwID09PSByZW5kZXJHcm91cCAmJiBjaGlsZC5yZWxhdGl2ZVJlbmRlckdyb3VwRGVwdGggPT09IHJlbmRlckdyb3VwRGVwdGgpIHtcbiAgICAgICAgdXBkYXRlVHJhbnNmb3JtQW5kQ2hpbGRyZW4oY2hpbGQsIHVwZGF0ZVRpY2ssIDApO1xuICAgICAgfVxuICAgIH1cbiAgICBjbGVhckxpc3QobGlzdCwgaW5kZXgpO1xuICAgIGNoaWxkcmVuQXREZXB0aC5pbmRleCA9IDA7XG4gIH1cbiAgaWYgKHVwZGF0ZUNoaWxkUmVuZGVyR3JvdXBzKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW5kZXJHcm91cC5yZW5kZXJHcm91cENoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICB1cGRhdGVSZW5kZXJHcm91cFRyYW5zZm9ybXMocmVuZGVyR3JvdXAucmVuZGVyR3JvdXBDaGlsZHJlbltpXSwgdXBkYXRlQ2hpbGRSZW5kZXJHcm91cHMpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gdXBkYXRlUmVuZGVyR3JvdXBUcmFuc2Zvcm0ocmVuZGVyR3JvdXApIHtcbiAgY29uc3Qgcm9vdCA9IHJlbmRlckdyb3VwLnJvb3Q7XG4gIGxldCB3b3JsZEFscGhhO1xuICBpZiAocmVuZGVyR3JvdXAucmVuZGVyR3JvdXBQYXJlbnQpIHtcbiAgICBjb25zdCByZW5kZXJHcm91cFBhcmVudCA9IHJlbmRlckdyb3VwLnJlbmRlckdyb3VwUGFyZW50O1xuICAgIHJlbmRlckdyb3VwLndvcmxkVHJhbnNmb3JtLmFwcGVuZEZyb20oXG4gICAgICByb290LnJlbGF0aXZlR3JvdXBUcmFuc2Zvcm0sXG4gICAgICByZW5kZXJHcm91cFBhcmVudC53b3JsZFRyYW5zZm9ybVxuICAgICk7XG4gICAgcmVuZGVyR3JvdXAud29ybGRDb2xvciA9IG1peENvbG9ycyhcbiAgICAgIHJvb3QuZ3JvdXBDb2xvcixcbiAgICAgIHJlbmRlckdyb3VwUGFyZW50LndvcmxkQ29sb3JcbiAgICApO1xuICAgIHdvcmxkQWxwaGEgPSByb290Lmdyb3VwQWxwaGEgKiByZW5kZXJHcm91cFBhcmVudC53b3JsZEFscGhhO1xuICB9IGVsc2Uge1xuICAgIHJlbmRlckdyb3VwLndvcmxkVHJhbnNmb3JtLmNvcHlGcm9tKHJvb3QubG9jYWxUcmFuc2Zvcm0pO1xuICAgIHJlbmRlckdyb3VwLndvcmxkQ29sb3IgPSByb290LmxvY2FsQ29sb3I7XG4gICAgd29ybGRBbHBoYSA9IHJvb3QubG9jYWxBbHBoYTtcbiAgfVxuICB3b3JsZEFscGhhID0gd29ybGRBbHBoYSA8IDAgPyAwIDogd29ybGRBbHBoYSA+IDEgPyAxIDogd29ybGRBbHBoYTtcbiAgcmVuZGVyR3JvdXAud29ybGRBbHBoYSA9IHdvcmxkQWxwaGE7XG4gIHJlbmRlckdyb3VwLndvcmxkQ29sb3JBbHBoYSA9IHJlbmRlckdyb3VwLndvcmxkQ29sb3IgKyAoKHdvcmxkQWxwaGEgKiAyNTUgfCAwKSA8PCAyNCk7XG59XG5mdW5jdGlvbiB1cGRhdGVUcmFuc2Zvcm1BbmRDaGlsZHJlbihjb250YWluZXIsIHVwZGF0ZVRpY2ssIHVwZGF0ZUZsYWdzKSB7XG4gIGlmICh1cGRhdGVUaWNrID09PSBjb250YWluZXIudXBkYXRlVGljaylcbiAgICByZXR1cm47XG4gIGNvbnRhaW5lci51cGRhdGVUaWNrID0gdXBkYXRlVGljaztcbiAgY29udGFpbmVyLmRpZENoYW5nZSA9IGZhbHNlO1xuICBjb25zdCBsb2NhbFRyYW5zZm9ybSA9IGNvbnRhaW5lci5sb2NhbFRyYW5zZm9ybTtcbiAgY29udGFpbmVyLnVwZGF0ZUxvY2FsVHJhbnNmb3JtKCk7XG4gIGNvbnN0IHBhcmVudCA9IGNvbnRhaW5lci5wYXJlbnQ7XG4gIGlmIChwYXJlbnQgJiYgIXBhcmVudC5yZW5kZXJHcm91cCkge1xuICAgIHVwZGF0ZUZsYWdzID0gdXBkYXRlRmxhZ3MgfCBjb250YWluZXIuX3VwZGF0ZUZsYWdzO1xuICAgIGNvbnRhaW5lci5yZWxhdGl2ZUdyb3VwVHJhbnNmb3JtLmFwcGVuZEZyb20oXG4gICAgICBsb2NhbFRyYW5zZm9ybSxcbiAgICAgIHBhcmVudC5yZWxhdGl2ZUdyb3VwVHJhbnNmb3JtXG4gICAgKTtcbiAgICBpZiAodXBkYXRlRmxhZ3MgJiBVUERBVEVfQkxFTkRfQ09MT1JfVklTSUJMRSkge1xuICAgICAgdXBkYXRlQ29sb3JCbGVuZFZpc2liaWxpdHkoY29udGFpbmVyLCBwYXJlbnQsIHVwZGF0ZUZsYWdzKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdXBkYXRlRmxhZ3MgPSBjb250YWluZXIuX3VwZGF0ZUZsYWdzO1xuICAgIGNvbnRhaW5lci5yZWxhdGl2ZUdyb3VwVHJhbnNmb3JtLmNvcHlGcm9tKGxvY2FsVHJhbnNmb3JtKTtcbiAgICBpZiAodXBkYXRlRmxhZ3MgJiBVUERBVEVfQkxFTkRfQ09MT1JfVklTSUJMRSkge1xuICAgICAgdXBkYXRlQ29sb3JCbGVuZFZpc2liaWxpdHkoY29udGFpbmVyLCB0ZW1wQ29udGFpbmVyLCB1cGRhdGVGbGFncyk7XG4gICAgfVxuICB9XG4gIGlmICghY29udGFpbmVyLnJlbmRlckdyb3VwKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBjb250YWluZXIuY2hpbGRyZW47XG4gICAgY29uc3QgbGVuZ3RoID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHVwZGF0ZVRyYW5zZm9ybUFuZENoaWxkcmVuKGNoaWxkcmVuW2ldLCB1cGRhdGVUaWNrLCB1cGRhdGVGbGFncyk7XG4gICAgfVxuICAgIGNvbnN0IHJlbmRlckdyb3VwID0gY29udGFpbmVyLnBhcmVudFJlbmRlckdyb3VwO1xuICAgIGlmIChjb250YWluZXIucmVuZGVyUGlwZUlkICYmICFyZW5kZXJHcm91cC5zdHJ1Y3R1cmVEaWRDaGFuZ2UpIHtcbiAgICAgIHJlbmRlckdyb3VwLnVwZGF0ZVJlbmRlcmFibGUoY29udGFpbmVyKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZUNvbG9yQmxlbmRWaXNpYmlsaXR5KGNvbnRhaW5lciwgcGFyZW50LCB1cGRhdGVGbGFncykge1xuICBpZiAodXBkYXRlRmxhZ3MgJiBVUERBVEVfQ09MT1IpIHtcbiAgICBjb250YWluZXIuZ3JvdXBDb2xvciA9IG1peENvbG9ycyhcbiAgICAgIGNvbnRhaW5lci5sb2NhbENvbG9yLFxuICAgICAgcGFyZW50Lmdyb3VwQ29sb3JcbiAgICApO1xuICAgIGxldCBncm91cEFscGhhID0gY29udGFpbmVyLmxvY2FsQWxwaGEgKiBwYXJlbnQuZ3JvdXBBbHBoYTtcbiAgICBncm91cEFscGhhID0gZ3JvdXBBbHBoYSA8IDAgPyAwIDogZ3JvdXBBbHBoYSA+IDEgPyAxIDogZ3JvdXBBbHBoYTtcbiAgICBjb250YWluZXIuZ3JvdXBBbHBoYSA9IGdyb3VwQWxwaGE7XG4gICAgY29udGFpbmVyLmdyb3VwQ29sb3JBbHBoYSA9IGNvbnRhaW5lci5ncm91cENvbG9yICsgKChncm91cEFscGhhICogMjU1IHwgMCkgPDwgMjQpO1xuICB9XG4gIGlmICh1cGRhdGVGbGFncyAmIFVQREFURV9CTEVORCkge1xuICAgIGNvbnRhaW5lci5ncm91cEJsZW5kTW9kZSA9IGNvbnRhaW5lci5sb2NhbEJsZW5kTW9kZSA9PT0gXCJpbmhlcml0XCIgPyBwYXJlbnQuZ3JvdXBCbGVuZE1vZGUgOiBjb250YWluZXIubG9jYWxCbGVuZE1vZGU7XG4gIH1cbiAgaWYgKHVwZGF0ZUZsYWdzICYgVVBEQVRFX1ZJU0lCTEUpIHtcbiAgICBjb250YWluZXIuZ2xvYmFsRGlzcGxheVN0YXR1cyA9IGNvbnRhaW5lci5sb2NhbERpc3BsYXlTdGF0dXMgJiBwYXJlbnQuZ2xvYmFsRGlzcGxheVN0YXR1cztcbiAgfVxuICBjb250YWluZXIuX3VwZGF0ZUZsYWdzID0gMDtcbn1cblxuZXhwb3J0IHsgdXBkYXRlUmVuZGVyR3JvdXBUcmFuc2Zvcm0sIHVwZGF0ZVJlbmRlckdyb3VwVHJhbnNmb3JtcywgdXBkYXRlVHJhbnNmb3JtQW5kQ2hpbGRyZW4gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZVJlbmRlckdyb3VwVHJhbnNmb3Jtcy5tanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIHZhbGlkYXRlUmVuZGVyYWJsZXMocmVuZGVyR3JvdXAsIHJlbmRlclBpcGVzKSB7XG4gIGNvbnN0IHsgbGlzdCwgaW5kZXggfSA9IHJlbmRlckdyb3VwLmNoaWxkcmVuUmVuZGVyYWJsZXNUb1VwZGF0ZTtcbiAgbGV0IHJlYnVpbGRSZXF1aXJlZCA9IGZhbHNlO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGV4OyBpKyspIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBsaXN0W2ldO1xuICAgIGNvbnN0IHJlbmRlcmFibGUgPSBjb250YWluZXI7XG4gICAgY29uc3QgcGlwZSA9IHJlbmRlclBpcGVzW3JlbmRlcmFibGUucmVuZGVyUGlwZUlkXTtcbiAgICByZWJ1aWxkUmVxdWlyZWQgPSBwaXBlLnZhbGlkYXRlUmVuZGVyYWJsZShjb250YWluZXIpO1xuICAgIGlmIChyZWJ1aWxkUmVxdWlyZWQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZW5kZXJHcm91cC5zdHJ1Y3R1cmVEaWRDaGFuZ2UgPSByZWJ1aWxkUmVxdWlyZWQ7XG4gIHJldHVybiByZWJ1aWxkUmVxdWlyZWQ7XG59XG5cbmV4cG9ydCB7IHZhbGlkYXRlUmVuZGVyYWJsZXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhbGlkYXRlUmVuZGVyYWJsZXMubWpzLm1hcFxuIiwiaW1wb3J0IHsgRXh0ZW5zaW9uVHlwZSB9IGZyb20gJy4uLy4uL2V4dGVuc2lvbnMvRXh0ZW5zaW9ucy5tanMnO1xuaW1wb3J0IHsgTWF0cml4IH0gZnJvbSAnLi4vLi4vbWF0aHMvbWF0cml4L01hdHJpeC5tanMnO1xuaW1wb3J0IHsgYnVpbGRJbnN0cnVjdGlvbnMgfSBmcm9tICcuL3V0aWxzL2J1aWxkSW5zdHJ1Y3Rpb25zLm1qcyc7XG5pbXBvcnQgeyBjbGVhckxpc3QgfSBmcm9tICcuL3V0aWxzL2NsZWFyTGlzdC5tanMnO1xuaW1wb3J0IHsgY29sbGVjdFJlbmRlckdyb3VwcyB9IGZyb20gJy4vdXRpbHMvY29sbGVjdFJlbmRlckdyb3Vwcy5tanMnO1xuaW1wb3J0IHsgZXhlY3V0ZUluc3RydWN0aW9ucyB9IGZyb20gJy4vdXRpbHMvZXhlY3V0ZUluc3RydWN0aW9ucy5tanMnO1xuaW1wb3J0IHsgdXBkYXRlUmVuZGVyR3JvdXBUcmFuc2Zvcm1zIH0gZnJvbSAnLi91dGlscy91cGRhdGVSZW5kZXJHcm91cFRyYW5zZm9ybXMubWpzJztcbmltcG9ydCB7IHZhbGlkYXRlUmVuZGVyYWJsZXMgfSBmcm9tICcuL3V0aWxzL3ZhbGlkYXRlUmVuZGVyYWJsZXMubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCB0ZW1wTWF0cml4ID0gbmV3IE1hdHJpeCgpO1xuY2xhc3MgUmVuZGVyR3JvdXBTeXN0ZW0ge1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gIH1cbiAgcmVuZGVyKHsgY29udGFpbmVyLCB0cmFuc2Zvcm0gfSkge1xuICAgIGNvbnRhaW5lci5pc1JlbmRlckdyb3VwID0gdHJ1ZTtcbiAgICBjb25zdCBwYXJlbnQgPSBjb250YWluZXIucGFyZW50O1xuICAgIGNvbnN0IHJlbmRlckdyb3VwUGFyZW50ID0gY29udGFpbmVyLnJlbmRlckdyb3VwLnJlbmRlckdyb3VwUGFyZW50O1xuICAgIGNvbnRhaW5lci5wYXJlbnQgPSBudWxsO1xuICAgIGNvbnRhaW5lci5yZW5kZXJHcm91cC5yZW5kZXJHcm91cFBhcmVudCA9IG51bGw7XG4gICAgY29uc3QgcmVuZGVyZXIgPSB0aGlzLl9yZW5kZXJlcjtcbiAgICBjb25zdCByZW5kZXJHcm91cHMgPSBjb2xsZWN0UmVuZGVyR3JvdXBzKGNvbnRhaW5lci5yZW5kZXJHcm91cCwgW10pO1xuICAgIGxldCBvcmlnaW5hbExvY2FsVHJhbnNmb3JtID0gdGVtcE1hdHJpeDtcbiAgICBpZiAodHJhbnNmb3JtKSB7XG4gICAgICBvcmlnaW5hbExvY2FsVHJhbnNmb3JtID0gb3JpZ2luYWxMb2NhbFRyYW5zZm9ybS5jb3B5RnJvbShjb250YWluZXIucmVuZGVyR3JvdXAubG9jYWxUcmFuc2Zvcm0pO1xuICAgICAgY29udGFpbmVyLnJlbmRlckdyb3VwLmxvY2FsVHJhbnNmb3JtLmNvcHlGcm9tKHRyYW5zZm9ybSk7XG4gICAgfVxuICAgIGNvbnN0IHJlbmRlclBpcGVzID0gcmVuZGVyZXIucmVuZGVyUGlwZXM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW5kZXJHcm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJlbmRlckdyb3VwID0gcmVuZGVyR3JvdXBzW2ldO1xuICAgICAgcmVuZGVyR3JvdXAucnVuT25SZW5kZXIoKTtcbiAgICAgIHJlbmRlckdyb3VwLmluc3RydWN0aW9uU2V0LnJlbmRlclBpcGVzID0gcmVuZGVyUGlwZXM7XG4gICAgICBpZiAoIXJlbmRlckdyb3VwLnN0cnVjdHVyZURpZENoYW5nZSkge1xuICAgICAgICB2YWxpZGF0ZVJlbmRlcmFibGVzKHJlbmRlckdyb3VwLCByZW5kZXJQaXBlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGVhckxpc3QocmVuZGVyR3JvdXAuY2hpbGRyZW5SZW5kZXJhYmxlc1RvVXBkYXRlLmxpc3QsIDApO1xuICAgICAgfVxuICAgICAgdXBkYXRlUmVuZGVyR3JvdXBUcmFuc2Zvcm1zKHJlbmRlckdyb3VwKTtcbiAgICAgIGlmIChyZW5kZXJHcm91cC5zdHJ1Y3R1cmVEaWRDaGFuZ2UpIHtcbiAgICAgICAgcmVuZGVyR3JvdXAuc3RydWN0dXJlRGlkQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIGJ1aWxkSW5zdHJ1Y3Rpb25zKHJlbmRlckdyb3VwLCByZW5kZXJQaXBlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGVSZW5kZXJhYmxlcyhyZW5kZXJHcm91cCk7XG4gICAgICB9XG4gICAgICByZW5kZXJHcm91cC5jaGlsZHJlblJlbmRlcmFibGVzVG9VcGRhdGUuaW5kZXggPSAwO1xuICAgICAgcmVuZGVyZXIucmVuZGVyUGlwZXMuYmF0Y2gudXBsb2FkKHJlbmRlckdyb3VwLmluc3RydWN0aW9uU2V0KTtcbiAgICB9XG4gICAgcmVuZGVyZXIuZ2xvYmFsVW5pZm9ybXMuc3RhcnQoe1xuICAgICAgd29ybGRUcmFuc2Zvcm1NYXRyaXg6IHRyYW5zZm9ybSA/IGNvbnRhaW5lci5yZW5kZXJHcm91cC5sb2NhbFRyYW5zZm9ybSA6IGNvbnRhaW5lci5yZW5kZXJHcm91cC53b3JsZFRyYW5zZm9ybSxcbiAgICAgIHdvcmxkQ29sb3I6IGNvbnRhaW5lci5yZW5kZXJHcm91cC53b3JsZENvbG9yQWxwaGFcbiAgICB9KTtcbiAgICBleGVjdXRlSW5zdHJ1Y3Rpb25zKGNvbnRhaW5lci5yZW5kZXJHcm91cCwgcmVuZGVyUGlwZXMpO1xuICAgIGlmIChyZW5kZXJQaXBlcy51bmlmb3JtQmF0Y2gpIHtcbiAgICAgIHJlbmRlclBpcGVzLnVuaWZvcm1CYXRjaC5yZW5kZXJFbmQoKTtcbiAgICB9XG4gICAgaWYgKHRyYW5zZm9ybSkge1xuICAgICAgY29udGFpbmVyLnJlbmRlckdyb3VwLmxvY2FsVHJhbnNmb3JtLmNvcHlGcm9tKG9yaWdpbmFsTG9jYWxUcmFuc2Zvcm0pO1xuICAgIH1cbiAgICBjb250YWluZXIucGFyZW50ID0gcGFyZW50O1xuICAgIGNvbnRhaW5lci5yZW5kZXJHcm91cC5yZW5kZXJHcm91cFBhcmVudCA9IHJlbmRlckdyb3VwUGFyZW50O1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSBudWxsO1xuICB9XG59XG4vKiogQGlnbm9yZSAqL1xuUmVuZGVyR3JvdXBTeXN0ZW0uZXh0ZW5zaW9uID0ge1xuICB0eXBlOiBbXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHTFN5c3RlbSxcbiAgICBFeHRlbnNpb25UeXBlLldlYkdQVVN5c3RlbSxcbiAgICBFeHRlbnNpb25UeXBlLkNhbnZhc1N5c3RlbVxuICBdLFxuICBuYW1lOiBcInJlbmRlckdyb3VwXCJcbn07XG5mdW5jdGlvbiB1cGRhdGVSZW5kZXJhYmxlcyhyZW5kZXJHcm91cCkge1xuICBjb25zdCB7IGxpc3QsIGluZGV4IH0gPSByZW5kZXJHcm91cC5jaGlsZHJlblJlbmRlcmFibGVzVG9VcGRhdGU7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kZXg7IGkrKykge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGxpc3RbaV07XG4gICAgaWYgKGNvbnRhaW5lci5kaWRWaWV3VXBkYXRlKSB7XG4gICAgICByZW5kZXJHcm91cC51cGRhdGVSZW5kZXJhYmxlKGNvbnRhaW5lcik7XG4gICAgfVxuICB9XG4gIGNsZWFyTGlzdChsaXN0LCBpbmRleCk7XG59XG5cbmV4cG9ydCB7IFJlbmRlckdyb3VwU3lzdGVtIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZW5kZXJHcm91cFN5c3RlbS5tanMubWFwXG4iLCJpbXBvcnQgeyBFeHRlbnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5pbXBvcnQgeyBCaWdQb29sIH0gZnJvbSAnLi4vLi4vdXRpbHMvcG9vbC9Qb29sR3JvdXAubWpzJztcbmltcG9ydCB7IEJhdGNoYWJsZVNwcml0ZSB9IGZyb20gJy4vQmF0Y2hhYmxlU3ByaXRlLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY2xhc3MgU3ByaXRlUGlwZSB7XG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyKSB7XG4gICAgdGhpcy5fZ3B1U3ByaXRlSGFzaCA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gIH1cbiAgYWRkUmVuZGVyYWJsZShzcHJpdGUsIF9pbnN0cnVjdGlvblNldCkge1xuICAgIGNvbnN0IGdwdVNwcml0ZSA9IHRoaXMuX2dldEdwdVNwcml0ZShzcHJpdGUpO1xuICAgIGlmIChzcHJpdGUuX2RpZFNwcml0ZVVwZGF0ZSlcbiAgICAgIHRoaXMuX3VwZGF0ZUJhdGNoYWJsZVNwcml0ZShzcHJpdGUsIGdwdVNwcml0ZSk7XG4gICAgdGhpcy5fcmVuZGVyZXIucmVuZGVyUGlwZXMuYmF0Y2guYWRkVG9CYXRjaChncHVTcHJpdGUpO1xuICB9XG4gIHVwZGF0ZVJlbmRlcmFibGUoc3ByaXRlKSB7XG4gICAgY29uc3QgZ3B1U3ByaXRlID0gdGhpcy5fZ3B1U3ByaXRlSGFzaFtzcHJpdGUudWlkXTtcbiAgICBpZiAoc3ByaXRlLl9kaWRTcHJpdGVVcGRhdGUpXG4gICAgICB0aGlzLl91cGRhdGVCYXRjaGFibGVTcHJpdGUoc3ByaXRlLCBncHVTcHJpdGUpO1xuICAgIGdwdVNwcml0ZS5iYXRjaGVyLnVwZGF0ZUVsZW1lbnQoZ3B1U3ByaXRlKTtcbiAgfVxuICB2YWxpZGF0ZVJlbmRlcmFibGUoc3ByaXRlKSB7XG4gICAgY29uc3QgdGV4dHVyZSA9IHNwcml0ZS5fdGV4dHVyZTtcbiAgICBjb25zdCBncHVTcHJpdGUgPSB0aGlzLl9nZXRHcHVTcHJpdGUoc3ByaXRlKTtcbiAgICBpZiAoZ3B1U3ByaXRlLnRleHR1cmUuX3NvdXJjZSAhPT0gdGV4dHVyZS5fc291cmNlKSB7XG4gICAgICByZXR1cm4gIWdwdVNwcml0ZS5iYXRjaGVyLmNoZWNrQW5kVXBkYXRlVGV4dHVyZShncHVTcHJpdGUsIHRleHR1cmUpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZGVzdHJveVJlbmRlcmFibGUoc3ByaXRlKSB7XG4gICAgY29uc3QgYmF0Y2hhYmxlU3ByaXRlID0gdGhpcy5fZ3B1U3ByaXRlSGFzaFtzcHJpdGUudWlkXTtcbiAgICBCaWdQb29sLnJldHVybihiYXRjaGFibGVTcHJpdGUpO1xuICAgIHRoaXMuX2dwdVNwcml0ZUhhc2hbc3ByaXRlLnVpZF0gPSBudWxsO1xuICB9XG4gIF91cGRhdGVCYXRjaGFibGVTcHJpdGUoc3ByaXRlLCBiYXRjaGFibGVTcHJpdGUpIHtcbiAgICBzcHJpdGUuX2RpZFNwcml0ZVVwZGF0ZSA9IGZhbHNlO1xuICAgIGJhdGNoYWJsZVNwcml0ZS5ib3VuZHMgPSBzcHJpdGUuYm91bmRzO1xuICAgIGJhdGNoYWJsZVNwcml0ZS50ZXh0dXJlID0gc3ByaXRlLl90ZXh0dXJlO1xuICB9XG4gIF9nZXRHcHVTcHJpdGUoc3ByaXRlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dwdVNwcml0ZUhhc2hbc3ByaXRlLnVpZF0gfHwgdGhpcy5faW5pdEdQVVNwcml0ZShzcHJpdGUpO1xuICB9XG4gIF9pbml0R1BVU3ByaXRlKHNwcml0ZSkge1xuICAgIGNvbnN0IGJhdGNoYWJsZVNwcml0ZSA9IEJpZ1Bvb2wuZ2V0KEJhdGNoYWJsZVNwcml0ZSk7XG4gICAgYmF0Y2hhYmxlU3ByaXRlLnJlbmRlcmFibGUgPSBzcHJpdGU7XG4gICAgYmF0Y2hhYmxlU3ByaXRlLnRleHR1cmUgPSBzcHJpdGUuX3RleHR1cmU7XG4gICAgYmF0Y2hhYmxlU3ByaXRlLmJvdW5kcyA9IHNwcml0ZS5ib3VuZHM7XG4gICAgYmF0Y2hhYmxlU3ByaXRlLnJvdW5kUGl4ZWxzID0gdGhpcy5fcmVuZGVyZXIuX3JvdW5kUGl4ZWxzIHwgc3ByaXRlLl9yb3VuZFBpeGVscztcbiAgICB0aGlzLl9ncHVTcHJpdGVIYXNoW3Nwcml0ZS51aWRdID0gYmF0Y2hhYmxlU3ByaXRlO1xuICAgIHNwcml0ZS5fZGlkU3ByaXRlVXBkYXRlID0gZmFsc2U7XG4gICAgc3ByaXRlLm9uKFwiZGVzdHJveWVkXCIsICgpID0+IHtcbiAgICAgIHRoaXMuZGVzdHJveVJlbmRlcmFibGUoc3ByaXRlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYmF0Y2hhYmxlU3ByaXRlO1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgZm9yIChjb25zdCBpIGluIHRoaXMuX2dwdVNwcml0ZUhhc2gpIHtcbiAgICAgIEJpZ1Bvb2wucmV0dXJuKHRoaXMuX2dwdVNwcml0ZUhhc2hbaV0pO1xuICAgIH1cbiAgICB0aGlzLl9ncHVTcHJpdGVIYXNoID0gbnVsbDtcbiAgICB0aGlzLl9yZW5kZXJlciA9IG51bGw7XG4gIH1cbn1cbi8qKiBAaWdub3JlICovXG5TcHJpdGVQaXBlLmV4dGVuc2lvbiA9IHtcbiAgdHlwZTogW1xuICAgIEV4dGVuc2lvblR5cGUuV2ViR0xQaXBlcyxcbiAgICBFeHRlbnNpb25UeXBlLldlYkdQVVBpcGVzLFxuICAgIEV4dGVuc2lvblR5cGUuQ2FudmFzUGlwZXNcbiAgXSxcbiAgbmFtZTogXCJzcHJpdGVcIlxufTtcblxuZXhwb3J0IHsgU3ByaXRlUGlwZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ByaXRlUGlwZS5tanMubWFwXG4iLCJpbXBvcnQgeyBFeHRlbnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uLy4uL3JlbmRlcmVycy9zaGFyZWQvc3RhdGUvU3RhdGUubWpzJztcbmltcG9ydCB7IEJhdGNoZXIgfSBmcm9tICcuL0JhdGNoZXIubWpzJztcbmltcG9ydCB7IEJhdGNoR2VvbWV0cnkgfSBmcm9tICcuL0JhdGNoR2VvbWV0cnkubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jbGFzcyBCYXRjaGVyUGlwZSB7XG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBhZGFwdG9yKSB7XG4gICAgdGhpcy5zdGF0ZSA9IFN0YXRlLmZvcjJkKCk7XG4gICAgdGhpcy5fYmF0Y2hlcyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2dlb21ldHJpZXMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fYWRhcHRvciA9IGFkYXB0b3I7XG4gICAgdGhpcy5fYWRhcHRvci5pbml0KHRoaXMpO1xuICB9XG4gIGJ1aWxkU3RhcnQoaW5zdHJ1Y3Rpb25TZXQpIHtcbiAgICBpZiAoIXRoaXMuX2JhdGNoZXNbaW5zdHJ1Y3Rpb25TZXQudWlkXSkge1xuICAgICAgY29uc3QgYmF0Y2hlciA9IG5ldyBCYXRjaGVyKCk7XG4gICAgICB0aGlzLl9iYXRjaGVzW2luc3RydWN0aW9uU2V0LnVpZF0gPSBiYXRjaGVyO1xuICAgICAgdGhpcy5fZ2VvbWV0cmllc1tiYXRjaGVyLnVpZF0gPSBuZXcgQmF0Y2hHZW9tZXRyeSgpO1xuICAgIH1cbiAgICB0aGlzLl9hY3RpdmVCYXRjaCA9IHRoaXMuX2JhdGNoZXNbaW5zdHJ1Y3Rpb25TZXQudWlkXTtcbiAgICB0aGlzLl9hY3RpdmVHZW9tZXRyeSA9IHRoaXMuX2dlb21ldHJpZXNbdGhpcy5fYWN0aXZlQmF0Y2gudWlkXTtcbiAgICB0aGlzLl9hY3RpdmVCYXRjaC5iZWdpbigpO1xuICB9XG4gIGFkZFRvQmF0Y2goYmF0Y2hhYmxlT2JqZWN0KSB7XG4gICAgdGhpcy5fYWN0aXZlQmF0Y2guYWRkKGJhdGNoYWJsZU9iamVjdCk7XG4gIH1cbiAgYnJlYWsoaW5zdHJ1Y3Rpb25TZXQpIHtcbiAgICB0aGlzLl9hY3RpdmVCYXRjaC5icmVhayhpbnN0cnVjdGlvblNldCk7XG4gIH1cbiAgYnVpbGRFbmQoaW5zdHJ1Y3Rpb25TZXQpIHtcbiAgICBjb25zdCBhY3RpdmVCYXRjaCA9IHRoaXMuX2FjdGl2ZUJhdGNoO1xuICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5fYWN0aXZlR2VvbWV0cnk7XG4gICAgYWN0aXZlQmF0Y2guZmluaXNoKGluc3RydWN0aW9uU2V0KTtcbiAgICBnZW9tZXRyeS5pbmRleEJ1ZmZlci5zZXREYXRhV2l0aFNpemUoYWN0aXZlQmF0Y2guaW5kZXhCdWZmZXIsIGFjdGl2ZUJhdGNoLmluZGV4U2l6ZSwgdHJ1ZSk7XG4gICAgZ2VvbWV0cnkuYnVmZmVyc1swXS5zZXREYXRhV2l0aFNpemUoYWN0aXZlQmF0Y2guYXR0cmlidXRlQnVmZmVyLmZsb2F0MzJWaWV3LCBhY3RpdmVCYXRjaC5hdHRyaWJ1dGVTaXplLCBmYWxzZSk7XG4gIH1cbiAgdXBsb2FkKGluc3RydWN0aW9uU2V0KSB7XG4gICAgY29uc3QgYmF0Y2hlciA9IHRoaXMuX2JhdGNoZXNbaW5zdHJ1Y3Rpb25TZXQudWlkXTtcbiAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuX2dlb21ldHJpZXNbYmF0Y2hlci51aWRdO1xuICAgIGlmIChiYXRjaGVyLmRpcnR5KSB7XG4gICAgICBiYXRjaGVyLmRpcnR5ID0gZmFsc2U7XG4gICAgICBnZW9tZXRyeS5idWZmZXJzWzBdLnVwZGF0ZShiYXRjaGVyLmF0dHJpYnV0ZVNpemUgKiA0KTtcbiAgICB9XG4gIH1cbiAgZXhlY3V0ZShiYXRjaCkge1xuICAgIGlmIChiYXRjaC5hY3Rpb24gPT09IFwic3RhcnRCYXRjaFwiKSB7XG4gICAgICBjb25zdCBiYXRjaGVyID0gYmF0Y2guYmF0Y2hlcjtcbiAgICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5fZ2VvbWV0cmllc1tiYXRjaGVyLnVpZF07XG4gICAgICB0aGlzLl9hZGFwdG9yLnN0YXJ0KHRoaXMsIGdlb21ldHJ5KTtcbiAgICB9XG4gICAgdGhpcy5fYWRhcHRvci5leGVjdXRlKHRoaXMsIGJhdGNoKTtcbiAgfVxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuc3RhdGUgPSBudWxsO1xuICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgIHRoaXMuX2FkYXB0b3IuZGVzdHJveSgpO1xuICAgIHRoaXMuX2FkYXB0b3IgPSBudWxsO1xuICAgIGZvciAoY29uc3QgaSBpbiB0aGlzLl9iYXRjaGVzKSB7XG4gICAgICB0aGlzLl9iYXRjaGVzW2ldLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgdGhpcy5fYmF0Y2hlcyA9IG51bGw7XG4gICAgZm9yIChjb25zdCBpIGluIHRoaXMuX2dlb21ldHJpZXMpIHtcbiAgICAgIHRoaXMuX2dlb21ldHJpZXNbaV0uZGVzdHJveSgpO1xuICAgIH1cbiAgICB0aGlzLl9nZW9tZXRyaWVzID0gbnVsbDtcbiAgfVxufVxuLyoqIEBpZ25vcmUgKi9cbkJhdGNoZXJQaXBlLmV4dGVuc2lvbiA9IHtcbiAgdHlwZTogW1xuICAgIEV4dGVuc2lvblR5cGUuV2ViR0xQaXBlcyxcbiAgICBFeHRlbnNpb25UeXBlLldlYkdQVVBpcGVzLFxuICAgIEV4dGVuc2lvblR5cGUuQ2FudmFzUGlwZXNcbiAgXSxcbiAgbmFtZTogXCJiYXRjaFwiXG59O1xuXG5leHBvcnQgeyBCYXRjaGVyUGlwZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmF0Y2hlclBpcGUubWpzLm1hcFxuIiwiaW1wb3J0IHsgR2xQcm9ncmFtIH0gZnJvbSAnLi4vcmVuZGVyaW5nL3JlbmRlcmVycy9nbC9zaGFkZXIvR2xQcm9ncmFtLm1qcyc7XG5pbXBvcnQgeyBHcHVQcm9ncmFtIH0gZnJvbSAnLi4vcmVuZGVyaW5nL3JlbmRlcmVycy9ncHUvc2hhZGVyL0dwdVByb2dyYW0ubWpzJztcbmltcG9ydCB7IFNoYWRlciB9IGZyb20gJy4uL3JlbmRlcmluZy9yZW5kZXJlcnMvc2hhcmVkL3NoYWRlci9TaGFkZXIubWpzJztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi4vcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvc3RhdGUvU3RhdGUubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBfRmlsdGVyID0gY2xhc3MgX0ZpbHRlciBleHRlbmRzIFNoYWRlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25hbCBwYXJhbWV0ZXJzIG9mIHRoaXMgZmlsdGVyLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7IC4uLl9GaWx0ZXIuZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcbiAgICBzdXBlcihvcHRpb25zKTtcbiAgICAvKiogSWYgZW5hYmxlZCBpcyB0cnVlIHRoZSBmaWx0ZXIgaXMgYXBwbGllZCwgaWYgZmFsc2UgaXQgd2lsbCBub3QuICovXG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBUaGUgZ3B1IHN0YXRlIHRoZSBmaWx0ZXIgcmVxdWlyZXMgdG8gcmVuZGVyLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICB0aGlzLl9zdGF0ZSA9IFN0YXRlLmZvcjJkKCk7XG4gICAgdGhpcy5ibGVuZE1vZGUgPSBvcHRpb25zLmJsZW5kTW9kZTtcbiAgICB0aGlzLnBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmc7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmFudGlhbGlhcyA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHRoaXMuYW50aWFsaWFzID0gb3B0aW9ucy5hbnRpYWxpYXMgPyBcIm9uXCIgOiBcIm9mZlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFudGlhbGlhcyA9IG9wdGlvbnMuYW50aWFsaWFzO1xuICAgIH1cbiAgICB0aGlzLnJlc29sdXRpb24gPSBvcHRpb25zLnJlc29sdXRpb247XG4gICAgdGhpcy5ibGVuZFJlcXVpcmVkID0gb3B0aW9ucy5ibGVuZFJlcXVpcmVkO1xuICAgIHRoaXMuYWRkUmVzb3VyY2UoXCJ1VGV4dHVyZVwiLCAwLCAxKTtcbiAgfVxuICAvKipcbiAgICogQXBwbGllcyB0aGUgZmlsdGVyXG4gICAqIEBwYXJhbSBmaWx0ZXJNYW5hZ2VyIC0gVGhlIHJlbmRlcmVyIHRvIHJldHJpZXZlIHRoZSBmaWx0ZXIgZnJvbVxuICAgKiBAcGFyYW0gaW5wdXQgLSBUaGUgaW5wdXQgcmVuZGVyIHRhcmdldC5cbiAgICogQHBhcmFtIG91dHB1dCAtIFRoZSB0YXJnZXQgdG8gb3V0cHV0IHRvLlxuICAgKiBAcGFyYW0gY2xlYXJNb2RlIC0gU2hvdWxkIHRoZSBvdXRwdXQgYmUgY2xlYXJlZCBiZWZvcmUgcmVuZGVyaW5nIHRvIGl0XG4gICAqL1xuICBhcHBseShmaWx0ZXJNYW5hZ2VyLCBpbnB1dCwgb3V0cHV0LCBjbGVhck1vZGUpIHtcbiAgICBmaWx0ZXJNYW5hZ2VyLmFwcGx5RmlsdGVyKHRoaXMsIGlucHV0LCBvdXRwdXQsIGNsZWFyTW9kZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgYmxlbmQgbW9kZSBvZiB0aGUgZmlsdGVyLlxuICAgKiBAZGVmYXVsdCBcIm5vcm1hbFwiXG4gICAqL1xuICBnZXQgYmxlbmRNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLl9zdGF0ZS5ibGVuZE1vZGU7XG4gIH1cbiAgLyoqIFNldHMgdGhlIGJsZW5kIG1vZGUgb2YgdGhlIGZpbHRlci4gKi9cbiAgc2V0IGJsZW5kTW9kZSh2YWx1ZSkge1xuICAgIHRoaXMuX3N0YXRlLmJsZW5kTW9kZSA9IHZhbHVlO1xuICB9XG4gIC8qKlxuICAgKiBBIHNob3J0IGhhbmQgZnVuY3Rpb24gdG8gY3JlYXRlIGEgZmlsdGVyIGJhc2VkIG9mIGEgdmVydGV4IGFuZCBmcmFnbWVudCBzaGFkZXIgc3JjLlxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKiBAcmV0dXJucyBBIHNoaW55IG5ldyBQaXhpSlMgZmlsdGVyIVxuICAgKi9cbiAgc3RhdGljIGZyb20ob3B0aW9ucykge1xuICAgIGNvbnN0IHsgZ3B1LCBnbCwgLi4ucmVzdCB9ID0gb3B0aW9ucztcbiAgICBsZXQgZ3B1UHJvZ3JhbTtcbiAgICBsZXQgZ2xQcm9ncmFtO1xuICAgIGlmIChncHUpIHtcbiAgICAgIGdwdVByb2dyYW0gPSBHcHVQcm9ncmFtLmZyb20oZ3B1KTtcbiAgICB9XG4gICAgaWYgKGdsKSB7XG4gICAgICBnbFByb2dyYW0gPSBHbFByb2dyYW0uZnJvbShnbCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgX0ZpbHRlcih7XG4gICAgICBncHVQcm9ncmFtLFxuICAgICAgZ2xQcm9ncmFtLFxuICAgICAgLi4ucmVzdFxuICAgIH0pO1xuICB9XG59O1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBmaWx0ZXIgc2V0dGluZ3NcbiAqIEBzdGF0aWNcbiAqL1xuX0ZpbHRlci5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgYmxlbmRNb2RlOiBcIm5vcm1hbFwiLFxuICByZXNvbHV0aW9uOiAxLFxuICBwYWRkaW5nOiAwLFxuICBhbnRpYWxpYXM6IFwib2ZmXCIsXG4gIGJsZW5kUmVxdWlyZWQ6IGZhbHNlXG59O1xubGV0IEZpbHRlciA9IF9GaWx0ZXI7XG5cbmV4cG9ydCB7IEZpbHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmlsdGVyLm1qcy5tYXBcbiIsInZhciBmcmFnbWVudCA9IFwiaW4gdmVjMiB2TWFza0Nvb3JkO1xcbmluIHZlYzIgdlRleHR1cmVDb29yZDtcXG5cXG51bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcXG51bmlmb3JtIHNhbXBsZXIyRCB1TWFza1RleHR1cmU7XFxuXFxudW5pZm9ybSBmbG9hdCB1QWxwaGE7XFxudW5pZm9ybSB2ZWM0IHVNYXNrQ2xhbXA7XFxuXFxub3V0IHZlYzQgZmluYWxDb2xvcjtcXG5cXG52b2lkIG1haW4odm9pZClcXG57XFxuICAgIGZsb2F0IGNsaXAgPSBzdGVwKDMuNSxcXG4gICAgICAgIHN0ZXAodU1hc2tDbGFtcC54LCB2TWFza0Nvb3JkLngpICtcXG4gICAgICAgIHN0ZXAodU1hc2tDbGFtcC55LCB2TWFza0Nvb3JkLnkpICtcXG4gICAgICAgIHN0ZXAodk1hc2tDb29yZC54LCB1TWFza0NsYW1wLnopICtcXG4gICAgICAgIHN0ZXAodk1hc2tDb29yZC55LCB1TWFza0NsYW1wLncpKTtcXG5cXG4gICAgLy8gVE9ETyBsb29rIGludG8gd2h5IHRoaXMgaXMgbmVlZGVkXFxuICAgIGZsb2F0IG5wbUFscGhhID0gdUFscGhhOyBcXG4gICAgdmVjNCBvcmlnaW5hbCA9IHRleHR1cmUodVRleHR1cmUsIHZUZXh0dXJlQ29vcmQpO1xcbiAgICB2ZWM0IG1hc2t5ID0gdGV4dHVyZSh1TWFza1RleHR1cmUsIHZNYXNrQ29vcmQpO1xcbiAgICBmbG9hdCBhbHBoYU11bCA9IDEuMCAtIG5wbUFscGhhICogKDEuMCAtIG1hc2t5LmEpO1xcblxcbiAgICBvcmlnaW5hbCAqPSAoYWxwaGFNdWwgKiBtYXNreS5yICogdUFscGhhICogY2xpcCk7XFxuXFxuICAgIGZpbmFsQ29sb3IgPSBvcmlnaW5hbDtcXG59XFxuXCI7XG5cbmV4cG9ydCB7IGZyYWdtZW50IGFzIGRlZmF1bHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hc2suZnJhZy5tanMubWFwXG4iLCJ2YXIgdmVydGV4ID0gXCJpbiB2ZWMyIGFQb3NpdGlvbjtcXG5cXG5vdXQgdmVjMiB2VGV4dHVyZUNvb3JkO1xcbm91dCB2ZWMyIHZNYXNrQ29vcmQ7XFxuXFxuXFxudW5pZm9ybSB2ZWM0IHVJbnB1dFNpemU7XFxudW5pZm9ybSB2ZWM0IHVPdXRwdXRGcmFtZTtcXG51bmlmb3JtIHZlYzQgdU91dHB1dFRleHR1cmU7XFxudW5pZm9ybSBtYXQzIHVGaWx0ZXJNYXRyaXg7XFxuXFxudmVjNCBmaWx0ZXJWZXJ0ZXhQb3NpdGlvbiggIHZlYzIgYVBvc2l0aW9uIClcXG57XFxuICAgIHZlYzIgcG9zaXRpb24gPSBhUG9zaXRpb24gKiB1T3V0cHV0RnJhbWUuencgKyB1T3V0cHV0RnJhbWUueHk7XFxuICAgICAgIFxcbiAgICBwb3NpdGlvbi54ID0gcG9zaXRpb24ueCAqICgyLjAgLyB1T3V0cHV0VGV4dHVyZS54KSAtIDEuMDtcXG4gICAgcG9zaXRpb24ueSA9IHBvc2l0aW9uLnkgKiAoMi4wKnVPdXRwdXRUZXh0dXJlLnogLyB1T3V0cHV0VGV4dHVyZS55KSAtIHVPdXRwdXRUZXh0dXJlLno7XFxuXFxuICAgIHJldHVybiB2ZWM0KHBvc2l0aW9uLCAwLjAsIDEuMCk7XFxufVxcblxcbnZlYzIgZmlsdGVyVGV4dHVyZUNvb3JkKCAgdmVjMiBhUG9zaXRpb24gKVxcbntcXG4gICAgcmV0dXJuIGFQb3NpdGlvbiAqICh1T3V0cHV0RnJhbWUuencgKiB1SW5wdXRTaXplLnp3KTtcXG59XFxuXFxudmVjMiBnZXRGaWx0ZXJDb29yZCggdmVjMiBhUG9zaXRpb24gKVxcbntcXG4gICAgcmV0dXJuICAoIHVGaWx0ZXJNYXRyaXggKiB2ZWMzKCBmaWx0ZXJUZXh0dXJlQ29vcmQoYVBvc2l0aW9uKSwgMS4wKSAgKS54eTtcXG59ICAgXFxuXFxudm9pZCBtYWluKHZvaWQpXFxue1xcbiAgICBnbF9Qb3NpdGlvbiA9IGZpbHRlclZlcnRleFBvc2l0aW9uKGFQb3NpdGlvbik7XFxuICAgIHZUZXh0dXJlQ29vcmQgPSBmaWx0ZXJUZXh0dXJlQ29vcmQoYVBvc2l0aW9uKTtcXG4gICAgdk1hc2tDb29yZCA9IGdldEZpbHRlckNvb3JkKGFQb3NpdGlvbik7XFxufVxcblwiO1xuXG5leHBvcnQgeyB2ZXJ0ZXggYXMgZGVmYXVsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFzay52ZXJ0Lm1qcy5tYXBcbiIsInZhciBzb3VyY2UgPSBcInN0cnVjdCBHbG9iYWxGaWx0ZXJVbmlmb3JtcyB7XFxuICB1SW5wdXRTaXplOnZlYzQ8ZjMyPixcXG4gIHVJbnB1dFBpeGVsOnZlYzQ8ZjMyPixcXG4gIHVJbnB1dENsYW1wOnZlYzQ8ZjMyPixcXG4gIHVPdXRwdXRGcmFtZTp2ZWM0PGYzMj4sXFxuICB1R2xvYmFsRnJhbWU6dmVjNDxmMzI+LFxcbiAgdU91dHB1dFRleHR1cmU6dmVjNDxmMzI+LCAgXFxufTtcXG5cXG5zdHJ1Y3QgTWFza1VuaWZvcm1zIHtcXG4gIHVGaWx0ZXJNYXRyaXg6bWF0M3gzPGYzMj4sXFxuICB1TWFza0NsYW1wOnZlYzQ8ZjMyPixcXG4gIHVBbHBoYTpmMzIsXFxufTtcXG5cXG5cXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMCkgdmFyPHVuaWZvcm0+IGdmdTogR2xvYmFsRmlsdGVyVW5pZm9ybXM7XFxuQGdyb3VwKDApIEBiaW5kaW5nKDEpIHZhciB1VGV4dHVyZTogdGV4dHVyZV8yZDxmMzI+O1xcbkBncm91cCgwKSBAYmluZGluZygyKSB2YXIgdVNhbXBsZXIgOiBzYW1wbGVyO1xcblxcbkBncm91cCgxKSBAYmluZGluZygwKSB2YXI8dW5pZm9ybT4gZmlsdGVyVW5pZm9ybXMgOiBNYXNrVW5pZm9ybXM7XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDEpIHZhciB1TWFza1RleHR1cmU6IHRleHR1cmVfMmQ8ZjMyPjtcXG5cXG5zdHJ1Y3QgVlNPdXRwdXQge1xcbiAgICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb246IHZlYzQ8ZjMyPixcXG4gICAgQGxvY2F0aW9uKDApIHV2IDogdmVjMjxmMzI+LFxcbiAgICBAbG9jYXRpb24oMSkgZmlsdGVyVXYgOiB2ZWMyPGYzMj4sXFxuICB9O1xcblxcbmZuIGZpbHRlclZlcnRleFBvc2l0aW9uKGFQb3NpdGlvbjp2ZWMyPGYzMj4pIC0+IHZlYzQ8ZjMyPlxcbntcXG4gICAgdmFyIHBvc2l0aW9uID0gYVBvc2l0aW9uICogZ2Z1LnVPdXRwdXRGcmFtZS56dyArIGdmdS51T3V0cHV0RnJhbWUueHk7XFxuXFxuICAgIHBvc2l0aW9uLnggPSBwb3NpdGlvbi54ICogKDIuMCAvIGdmdS51T3V0cHV0VGV4dHVyZS54KSAtIDEuMDtcXG4gICAgcG9zaXRpb24ueSA9IHBvc2l0aW9uLnkgKiAoMi4wKmdmdS51T3V0cHV0VGV4dHVyZS56IC8gZ2Z1LnVPdXRwdXRUZXh0dXJlLnkpIC0gZ2Z1LnVPdXRwdXRUZXh0dXJlLno7XFxuXFxuICAgIHJldHVybiB2ZWM0KHBvc2l0aW9uLCAwLjAsIDEuMCk7XFxufVxcblxcbmZuIGZpbHRlclRleHR1cmVDb29yZCggYVBvc2l0aW9uOnZlYzI8ZjMyPiApIC0+IHZlYzI8ZjMyPlxcbntcXG4gICAgcmV0dXJuIGFQb3NpdGlvbiAqIChnZnUudU91dHB1dEZyYW1lLnp3ICogZ2Z1LnVJbnB1dFNpemUuencpO1xcbn1cXG5cXG5mbiBnbG9iYWxUZXh0dXJlQ29vcmQoIGFQb3NpdGlvbjp2ZWMyPGYzMj4gKSAtPiB2ZWMyPGYzMj5cXG57XFxuICByZXR1cm4gIChhUG9zaXRpb24ueHkgLyBnZnUudUdsb2JhbEZyYW1lLnp3KSArIChnZnUudUdsb2JhbEZyYW1lLnh5IC8gZ2Z1LnVHbG9iYWxGcmFtZS56dyk7ICBcXG59XFxuXFxuZm4gZ2V0RmlsdGVyQ29vcmQoYVBvc2l0aW9uOnZlYzI8ZjMyPiApIC0+IHZlYzI8ZjMyPlxcbntcXG4gIHJldHVybiAoIGZpbHRlclVuaWZvcm1zLnVGaWx0ZXJNYXRyaXggKiB2ZWMzKCBmaWx0ZXJUZXh0dXJlQ29vcmQoYVBvc2l0aW9uKSwgMS4wKSAgKS54eTtcXG59XFxuXFxuZm4gZ2V0U2l6ZSgpIC0+IHZlYzI8ZjMyPlxcbntcXG5cXG4gIFxcbiAgcmV0dXJuIGdmdS51R2xvYmFsRnJhbWUuenc7XFxufVxcbiAgXFxuQHZlcnRleFxcbmZuIG1haW5WZXJ0ZXgoXFxuICBAbG9jYXRpb24oMCkgYVBvc2l0aW9uIDogdmVjMjxmMzI+LCBcXG4pIC0+IFZTT3V0cHV0IHtcXG4gIHJldHVybiBWU091dHB1dChcXG4gICBmaWx0ZXJWZXJ0ZXhQb3NpdGlvbihhUG9zaXRpb24pLFxcbiAgIGZpbHRlclRleHR1cmVDb29yZChhUG9zaXRpb24pLFxcbiAgIGdldEZpbHRlckNvb3JkKGFQb3NpdGlvbilcXG4gICk7XFxufVxcblxcbkBmcmFnbWVudFxcbmZuIG1haW5GcmFnbWVudChcXG4gIEBsb2NhdGlvbigwKSB1djogdmVjMjxmMzI+LFxcbiAgQGxvY2F0aW9uKDEpIGZpbHRlclV2OiB2ZWMyPGYzMj4sXFxuICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb246IHZlYzQ8ZjMyPlxcbikgLT4gQGxvY2F0aW9uKDApIHZlYzQ8ZjMyPiB7XFxuXFxuICAgIHZhciBtYXNrQ2xhbXAgPSBmaWx0ZXJVbmlmb3Jtcy51TWFza0NsYW1wO1xcblxcbiAgICAgdmFyIGNsaXAgPSBzdGVwKDMuNSxcXG4gICAgICAgIHN0ZXAobWFza0NsYW1wLngsIGZpbHRlclV2LngpICtcXG4gICAgICAgIHN0ZXAobWFza0NsYW1wLnksIGZpbHRlclV2LnkpICtcXG4gICAgICAgIHN0ZXAoZmlsdGVyVXYueCwgbWFza0NsYW1wLnopICtcXG4gICAgICAgIHN0ZXAoZmlsdGVyVXYueSwgbWFza0NsYW1wLncpKTtcXG5cXG4gICAgdmFyIG1hc2sgPSB0ZXh0dXJlU2FtcGxlKHVNYXNrVGV4dHVyZSwgdVNhbXBsZXIsIGZpbHRlclV2KTtcXG4gICAgdmFyIHNvdXJjZSA9IHRleHR1cmVTYW1wbGUodVRleHR1cmUsIHVTYW1wbGVyLCB1dik7XFxuICAgIFxcbiAgICB2YXIgbnBtQWxwaGEgPSAwLjA7XFxuXFxuICAgIHZhciBhbHBoYU11bCA9IDEuMCAtIG5wbUFscGhhICogKDEuMCAtIG1hc2suYSk7XFxuXFxuICAgIHZhciBhID0gKGFscGhhTXVsICogbWFzay5yKSAqIGNsaXA7XFxuXFxuICAgIHJldHVybiB2ZWM0KHNvdXJjZS5yZ2IsIHNvdXJjZS5hKSAqIGE7XFxufVwiO1xuXG5leHBvcnQgeyBzb3VyY2UgYXMgZGVmYXVsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFzay53Z3NsLm1qcy5tYXBcbiIsImltcG9ydCB7IE1hdHJpeCB9IGZyb20gJy4uLy4uL21hdGhzL21hdHJpeC9NYXRyaXgubWpzJztcbmltcG9ydCB7IEdsUHJvZ3JhbSB9IGZyb20gJy4uLy4uL3JlbmRlcmluZy9yZW5kZXJlcnMvZ2wvc2hhZGVyL0dsUHJvZ3JhbS5tanMnO1xuaW1wb3J0IHsgR3B1UHJvZ3JhbSB9IGZyb20gJy4uLy4uL3JlbmRlcmluZy9yZW5kZXJlcnMvZ3B1L3NoYWRlci9HcHVQcm9ncmFtLm1qcyc7XG5pbXBvcnQgeyBVbmlmb3JtR3JvdXAgfSBmcm9tICcuLi8uLi9yZW5kZXJpbmcvcmVuZGVyZXJzL3NoYXJlZC9zaGFkZXIvVW5pZm9ybUdyb3VwLm1qcyc7XG5pbXBvcnQgeyBUZXh0dXJlTWF0cml4IH0gZnJvbSAnLi4vLi4vcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvdGV4dHVyZS9UZXh0dXJlTWF0cml4Lm1qcyc7XG5pbXBvcnQgeyBGaWx0ZXIgfSBmcm9tICcuLi9GaWx0ZXIubWpzJztcbmltcG9ydCBmcmFnbWVudCBmcm9tICcuL21hc2suZnJhZy5tanMnO1xuaW1wb3J0IHZlcnRleCBmcm9tICcuL21hc2sudmVydC5tanMnO1xuaW1wb3J0IHNvdXJjZSBmcm9tICcuL21hc2sud2dzbC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIE1hc2tGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgY29uc3QgeyBzcHJpdGUsIC4uLnJlc3QgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgdGV4dHVyZU1hdHJpeCA9IG5ldyBUZXh0dXJlTWF0cml4KHNwcml0ZS50ZXh0dXJlKTtcbiAgICBjb25zdCBmaWx0ZXJVbmlmb3JtcyA9IG5ldyBVbmlmb3JtR3JvdXAoe1xuICAgICAgdUZpbHRlck1hdHJpeDogeyB2YWx1ZTogbmV3IE1hdHJpeCgpLCB0eXBlOiBcIm1hdDN4MzxmMzI+XCIgfSxcbiAgICAgIHVNYXNrQ2xhbXA6IHsgdmFsdWU6IHRleHR1cmVNYXRyaXgudUNsYW1wRnJhbWUsIHR5cGU6IFwidmVjNDxmMzI+XCIgfSxcbiAgICAgIHVBbHBoYTogeyB2YWx1ZTogMSwgdHlwZTogXCJmMzJcIiB9XG4gICAgfSk7XG4gICAgY29uc3QgZ3B1UHJvZ3JhbSA9IEdwdVByb2dyYW0uZnJvbSh7XG4gICAgICB2ZXJ0ZXg6IHtcbiAgICAgICAgc291cmNlLFxuICAgICAgICBlbnRyeVBvaW50OiBcIm1haW5WZXJ0ZXhcIlxuICAgICAgfSxcbiAgICAgIGZyYWdtZW50OiB7XG4gICAgICAgIHNvdXJjZSxcbiAgICAgICAgZW50cnlQb2ludDogXCJtYWluRnJhZ21lbnRcIlxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGdsUHJvZ3JhbSA9IEdsUHJvZ3JhbS5mcm9tKHtcbiAgICAgIHZlcnRleCxcbiAgICAgIGZyYWdtZW50LFxuICAgICAgbmFtZTogXCJtYXNrLWZpbHRlclwiXG4gICAgfSk7XG4gICAgc3VwZXIoe1xuICAgICAgLi4ucmVzdCxcbiAgICAgIGdwdVByb2dyYW0sXG4gICAgICBnbFByb2dyYW0sXG4gICAgICByZXNvdXJjZXM6IHtcbiAgICAgICAgZmlsdGVyVW5pZm9ybXMsXG4gICAgICAgIHVNYXNrVGV4dHVyZTogc3ByaXRlLnRleHR1cmUuc291cmNlXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5zcHJpdGUgPSBzcHJpdGU7XG4gICAgdGhpcy5fdGV4dHVyZU1hdHJpeCA9IHRleHR1cmVNYXRyaXg7XG4gIH1cbiAgYXBwbHkoZmlsdGVyTWFuYWdlciwgaW5wdXQsIG91dHB1dCwgY2xlYXJNb2RlKSB7XG4gICAgdGhpcy5fdGV4dHVyZU1hdHJpeC50ZXh0dXJlID0gdGhpcy5zcHJpdGUudGV4dHVyZTtcbiAgICBmaWx0ZXJNYW5hZ2VyLmNhbGN1bGF0ZVNwcml0ZU1hdHJpeChcbiAgICAgIHRoaXMucmVzb3VyY2VzLmZpbHRlclVuaWZvcm1zLnVuaWZvcm1zLnVGaWx0ZXJNYXRyaXgsXG4gICAgICB0aGlzLnNwcml0ZVxuICAgICkucHJlcGVuZCh0aGlzLl90ZXh0dXJlTWF0cml4Lm1hcENvb3JkKTtcbiAgICB0aGlzLnJlc291cmNlcy51TWFza1RleHR1cmUgPSB0aGlzLnNwcml0ZS50ZXh0dXJlLnNvdXJjZTtcbiAgICBmaWx0ZXJNYW5hZ2VyLmFwcGx5RmlsdGVyKHRoaXMsIGlucHV0LCBvdXRwdXQsIGNsZWFyTW9kZSk7XG4gIH1cbn1cblxuZXhwb3J0IHsgTWFza0ZpbHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFza0ZpbHRlci5tanMubWFwXG4iLCJpbXBvcnQgeyBFeHRlbnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5pbXBvcnQgeyBGaWx0ZXJFZmZlY3QgfSBmcm9tICcuLi8uLi8uLi9maWx0ZXJzL0ZpbHRlckVmZmVjdC5tanMnO1xuaW1wb3J0IHsgTWFza0ZpbHRlciB9IGZyb20gJy4uLy4uLy4uL2ZpbHRlcnMvbWFzay9NYXNrRmlsdGVyLm1qcyc7XG5pbXBvcnQgeyBCb3VuZHMgfSBmcm9tICcuLi8uLi8uLi9zY2VuZS9jb250YWluZXIvYm91bmRzL0JvdW5kcy5tanMnO1xuaW1wb3J0IHsgZ2V0R2xvYmFsQm91bmRzIH0gZnJvbSAnLi4vLi4vLi4vc2NlbmUvY29udGFpbmVyL2JvdW5kcy9nZXRHbG9iYWxCb3VuZHMubWpzJztcbmltcG9ydCB7IGNvbGxlY3RBbGxSZW5kZXJhYmxlcyB9IGZyb20gJy4uLy4uLy4uL3NjZW5lL2NvbnRhaW5lci91dGlscy9idWlsZEluc3RydWN0aW9ucy5tanMnO1xuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnLi4vLi4vLi4vc2NlbmUvc3ByaXRlL1Nwcml0ZS5tanMnO1xuaW1wb3J0IHsgQmlnUG9vbCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3Bvb2wvUG9vbEdyb3VwLm1qcyc7XG5pbXBvcnQgeyBUZXh0dXJlIH0gZnJvbSAnLi4vLi4vcmVuZGVyZXJzL3NoYXJlZC90ZXh0dXJlL1RleHR1cmUubWpzJztcbmltcG9ydCB7IFRleHR1cmVQb29sIH0gZnJvbSAnLi4vLi4vcmVuZGVyZXJzL3NoYXJlZC90ZXh0dXJlL1RleHR1cmVQb29sLm1qcyc7XG5pbXBvcnQgeyBSZW5kZXJlclR5cGUgfSBmcm9tICcuLi8uLi9yZW5kZXJlcnMvdHlwZXMubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCB0ZW1wQm91bmRzID0gbmV3IEJvdW5kcygpO1xuY2xhc3MgQWxwaGFNYXNrRWZmZWN0IGV4dGVuZHMgRmlsdGVyRWZmZWN0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZpbHRlcnMgPSBbbmV3IE1hc2tGaWx0ZXIoe1xuICAgICAgc3ByaXRlOiBuZXcgU3ByaXRlKFRleHR1cmUuRU1QVFkpLFxuICAgICAgcmVzb2x1dGlvbjogXCJpbmhlcml0XCIsXG4gICAgICBhbnRpYWxpYXM6IFwiaW5oZXJpdFwiXG4gICAgfSldO1xuICB9XG4gIGdldCBzcHJpdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmlsdGVyc1swXS5zcHJpdGU7XG4gIH1cbiAgc2V0IHNwcml0ZSh2YWx1ZSkge1xuICAgIHRoaXMuZmlsdGVyc1swXS5zcHJpdGUgPSB2YWx1ZTtcbiAgfVxufVxuY2xhc3MgQWxwaGFNYXNrUGlwZSB7XG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyKSB7XG4gICAgdGhpcy5fYWN0aXZlTWFza1N0YWdlID0gW107XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgfVxuICBwdXNoKG1hc2ssIG1hc2tlZENvbnRhaW5lciwgaW5zdHJ1Y3Rpb25TZXQpIHtcbiAgICBjb25zdCByZW5kZXJlciA9IHRoaXMuX3JlbmRlcmVyO1xuICAgIHJlbmRlcmVyLnJlbmRlclBpcGVzLmJhdGNoLmJyZWFrKGluc3RydWN0aW9uU2V0KTtcbiAgICBpbnN0cnVjdGlvblNldC5hZGQoe1xuICAgICAgcmVuZGVyUGlwZUlkOiBcImFscGhhTWFza1wiLFxuICAgICAgYWN0aW9uOiBcInB1c2hNYXNrQmVnaW5cIixcbiAgICAgIG1hc2ssXG4gICAgICBjYW5CdW5kbGU6IGZhbHNlLFxuICAgICAgbWFza2VkQ29udGFpbmVyXG4gICAgfSk7XG4gICAgaWYgKG1hc2sucmVuZGVyTWFza1RvVGV4dHVyZSkge1xuICAgICAgY29uc3QgbWFza0NvbnRhaW5lciA9IG1hc2subWFzaztcbiAgICAgIG1hc2tDb250YWluZXIuaW5jbHVkZUluQnVpbGQgPSB0cnVlO1xuICAgICAgY29sbGVjdEFsbFJlbmRlcmFibGVzKFxuICAgICAgICBtYXNrQ29udGFpbmVyLFxuICAgICAgICBpbnN0cnVjdGlvblNldCxcbiAgICAgICAgcmVuZGVyZXIucmVuZGVyUGlwZXNcbiAgICAgICk7XG4gICAgICBtYXNrQ29udGFpbmVyLmluY2x1ZGVJbkJ1aWxkID0gZmFsc2U7XG4gICAgfVxuICAgIHJlbmRlcmVyLnJlbmRlclBpcGVzLmJhdGNoLmJyZWFrKGluc3RydWN0aW9uU2V0KTtcbiAgICBpbnN0cnVjdGlvblNldC5hZGQoe1xuICAgICAgcmVuZGVyUGlwZUlkOiBcImFscGhhTWFza1wiLFxuICAgICAgYWN0aW9uOiBcInB1c2hNYXNrRW5kXCIsXG4gICAgICBtYXNrLFxuICAgICAgbWFza2VkQ29udGFpbmVyLFxuICAgICAgY2FuQnVuZGxlOiBmYWxzZVxuICAgIH0pO1xuICB9XG4gIHBvcChtYXNrLCBfbWFza2VkQ29udGFpbmVyLCBpbnN0cnVjdGlvblNldCkge1xuICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5fcmVuZGVyZXI7XG4gICAgcmVuZGVyZXIucmVuZGVyUGlwZXMuYmF0Y2guYnJlYWsoaW5zdHJ1Y3Rpb25TZXQpO1xuICAgIGluc3RydWN0aW9uU2V0LmFkZCh7XG4gICAgICByZW5kZXJQaXBlSWQ6IFwiYWxwaGFNYXNrXCIsXG4gICAgICBhY3Rpb246IFwicG9wTWFza0VuZFwiLFxuICAgICAgbWFzayxcbiAgICAgIGNhbkJ1bmRsZTogZmFsc2VcbiAgICB9KTtcbiAgfVxuICBleGVjdXRlKGluc3RydWN0aW9uKSB7XG4gICAgY29uc3QgcmVuZGVyZXIgPSB0aGlzLl9yZW5kZXJlcjtcbiAgICBjb25zdCByZW5kZXJNYXNrID0gaW5zdHJ1Y3Rpb24ubWFzay5yZW5kZXJNYXNrVG9UZXh0dXJlO1xuICAgIGlmIChpbnN0cnVjdGlvbi5hY3Rpb24gPT09IFwicHVzaE1hc2tCZWdpblwiKSB7XG4gICAgICBjb25zdCBmaWx0ZXJFZmZlY3QgPSBCaWdQb29sLmdldChBbHBoYU1hc2tFZmZlY3QpO1xuICAgICAgaWYgKHJlbmRlck1hc2spIHtcbiAgICAgICAgaW5zdHJ1Y3Rpb24ubWFzay5tYXNrLm1lYXN1cmFibGUgPSB0cnVlO1xuICAgICAgICBjb25zdCBib3VuZHMgPSBnZXRHbG9iYWxCb3VuZHMoaW5zdHJ1Y3Rpb24ubWFzay5tYXNrLCB0cnVlLCB0ZW1wQm91bmRzKTtcbiAgICAgICAgaW5zdHJ1Y3Rpb24ubWFzay5tYXNrLm1lYXN1cmFibGUgPSBmYWxzZTtcbiAgICAgICAgYm91bmRzLmNlaWwoKTtcbiAgICAgICAgY29uc3QgY29sb3JUZXh0dXJlU291cmNlID0gcmVuZGVyZXIucmVuZGVyVGFyZ2V0LnJlbmRlclRhcmdldC5jb2xvclRleHR1cmUuc291cmNlO1xuICAgICAgICBjb25zdCBmaWx0ZXJUZXh0dXJlID0gVGV4dHVyZVBvb2wuZ2V0T3B0aW1hbFRleHR1cmUoXG4gICAgICAgICAgYm91bmRzLndpZHRoLFxuICAgICAgICAgIGJvdW5kcy5oZWlnaHQsXG4gICAgICAgICAgY29sb3JUZXh0dXJlU291cmNlLl9yZXNvbHV0aW9uLFxuICAgICAgICAgIGNvbG9yVGV4dHVyZVNvdXJjZS5hbnRpYWxpYXNcbiAgICAgICAgKTtcbiAgICAgICAgcmVuZGVyZXIucmVuZGVyVGFyZ2V0LnB1c2goZmlsdGVyVGV4dHVyZSwgdHJ1ZSk7XG4gICAgICAgIHJlbmRlcmVyLmdsb2JhbFVuaWZvcm1zLnB1c2goe1xuICAgICAgICAgIG9mZnNldDogYm91bmRzLFxuICAgICAgICAgIHdvcmxkQ29sb3I6IDQyOTQ5NjcyOTVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNwcml0ZSA9IGZpbHRlckVmZmVjdC5zcHJpdGU7XG4gICAgICAgIHNwcml0ZS50ZXh0dXJlID0gZmlsdGVyVGV4dHVyZTtcbiAgICAgICAgc3ByaXRlLndvcmxkVHJhbnNmb3JtLnR4ID0gYm91bmRzLm1pblg7XG4gICAgICAgIHNwcml0ZS53b3JsZFRyYW5zZm9ybS50eSA9IGJvdW5kcy5taW5ZO1xuICAgICAgICB0aGlzLl9hY3RpdmVNYXNrU3RhZ2UucHVzaCh7XG4gICAgICAgICAgZmlsdGVyRWZmZWN0LFxuICAgICAgICAgIG1hc2tlZENvbnRhaW5lcjogaW5zdHJ1Y3Rpb24ubWFza2VkQ29udGFpbmVyLFxuICAgICAgICAgIGZpbHRlclRleHR1cmVcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaWx0ZXJFZmZlY3Quc3ByaXRlID0gaW5zdHJ1Y3Rpb24ubWFzay5tYXNrO1xuICAgICAgICB0aGlzLl9hY3RpdmVNYXNrU3RhZ2UucHVzaCh7XG4gICAgICAgICAgZmlsdGVyRWZmZWN0LFxuICAgICAgICAgIG1hc2tlZENvbnRhaW5lcjogaW5zdHJ1Y3Rpb24ubWFza2VkQ29udGFpbmVyXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaW5zdHJ1Y3Rpb24uYWN0aW9uID09PSBcInB1c2hNYXNrRW5kXCIpIHtcbiAgICAgIGNvbnN0IG1hc2tEYXRhID0gdGhpcy5fYWN0aXZlTWFza1N0YWdlW3RoaXMuX2FjdGl2ZU1hc2tTdGFnZS5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChyZW5kZXJNYXNrKSB7XG4gICAgICAgIGlmIChyZW5kZXJlci50eXBlID09PSBSZW5kZXJlclR5cGUuV0VCR0wpIHtcbiAgICAgICAgICByZW5kZXJlci5yZW5kZXJUYXJnZXQuZmluaXNoUmVuZGVyUGFzcygpO1xuICAgICAgICB9XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlclRhcmdldC5wb3AoKTtcbiAgICAgICAgcmVuZGVyZXIuZ2xvYmFsVW5pZm9ybXMucG9wKCk7XG4gICAgICB9XG4gICAgICByZW5kZXJlci5maWx0ZXIucHVzaCh7XG4gICAgICAgIHJlbmRlclBpcGVJZDogXCJmaWx0ZXJcIixcbiAgICAgICAgYWN0aW9uOiBcInB1c2hGaWx0ZXJcIixcbiAgICAgICAgY29udGFpbmVyOiBtYXNrRGF0YS5tYXNrZWRDb250YWluZXIsXG4gICAgICAgIGZpbHRlckVmZmVjdDogbWFza0RhdGEuZmlsdGVyRWZmZWN0LFxuICAgICAgICBjYW5CdW5kbGU6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGluc3RydWN0aW9uLmFjdGlvbiA9PT0gXCJwb3BNYXNrRW5kXCIpIHtcbiAgICAgIHJlbmRlcmVyLmZpbHRlci5wb3AoKTtcbiAgICAgIGNvbnN0IG1hc2tEYXRhID0gdGhpcy5fYWN0aXZlTWFza1N0YWdlLnBvcCgpO1xuICAgICAgaWYgKHJlbmRlck1hc2spIHtcbiAgICAgICAgVGV4dHVyZVBvb2wucmV0dXJuVGV4dHVyZShtYXNrRGF0YS5maWx0ZXJUZXh0dXJlKTtcbiAgICAgIH1cbiAgICAgIEJpZ1Bvb2wucmV0dXJuKG1hc2tEYXRhLmZpbHRlckVmZmVjdCk7XG4gICAgfVxuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSBudWxsO1xuICAgIHRoaXMuX2FjdGl2ZU1hc2tTdGFnZSA9IG51bGw7XG4gIH1cbn1cbi8qKiBAaWdub3JlICovXG5BbHBoYU1hc2tQaXBlLmV4dGVuc2lvbiA9IHtcbiAgdHlwZTogW1xuICAgIEV4dGVuc2lvblR5cGUuV2ViR0xQaXBlcyxcbiAgICBFeHRlbnNpb25UeXBlLldlYkdQVVBpcGVzLFxuICAgIEV4dGVuc2lvblR5cGUuQ2FudmFzUGlwZXNcbiAgXSxcbiAgbmFtZTogXCJhbHBoYU1hc2tcIlxufTtcblxuZXhwb3J0IHsgQWxwaGFNYXNrUGlwZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWxwaGFNYXNrUGlwZS5tanMubWFwXG4iLCJpbXBvcnQgeyBFeHRlbnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY2xhc3MgQ29sb3JNYXNrUGlwZSB7XG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyKSB7XG4gICAgdGhpcy5fY29sb3JTdGFjayA9IFtdO1xuICAgIHRoaXMuX2NvbG9yU3RhY2tJbmRleCA9IDA7XG4gICAgdGhpcy5fY3VycmVudENvbG9yID0gMDtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICB9XG4gIGJ1aWxkU3RhcnQoKSB7XG4gICAgdGhpcy5fY29sb3JTdGFja1swXSA9IDE1O1xuICAgIHRoaXMuX2NvbG9yU3RhY2tJbmRleCA9IDE7XG4gICAgdGhpcy5fY3VycmVudENvbG9yID0gMTU7XG4gIH1cbiAgcHVzaChtYXNrLCBfY29udGFpbmVyLCBpbnN0cnVjdGlvblNldCkge1xuICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5fcmVuZGVyZXI7XG4gICAgcmVuZGVyZXIucmVuZGVyUGlwZXMuYmF0Y2guYnJlYWsoaW5zdHJ1Y3Rpb25TZXQpO1xuICAgIGNvbnN0IGNvbG9yU3RhY2sgPSB0aGlzLl9jb2xvclN0YWNrO1xuICAgIGNvbG9yU3RhY2tbdGhpcy5fY29sb3JTdGFja0luZGV4XSA9IGNvbG9yU3RhY2tbdGhpcy5fY29sb3JTdGFja0luZGV4IC0gMV0gJiBtYXNrLm1hc2s7XG4gICAgY29uc3QgY3VycmVudENvbG9yID0gdGhpcy5fY29sb3JTdGFja1t0aGlzLl9jb2xvclN0YWNrSW5kZXhdO1xuICAgIGlmIChjdXJyZW50Q29sb3IgIT09IHRoaXMuX2N1cnJlbnRDb2xvcikge1xuICAgICAgdGhpcy5fY3VycmVudENvbG9yID0gY3VycmVudENvbG9yO1xuICAgICAgaW5zdHJ1Y3Rpb25TZXQuYWRkKHtcbiAgICAgICAgcmVuZGVyUGlwZUlkOiBcImNvbG9yTWFza1wiLFxuICAgICAgICBjb2xvck1hc2s6IGN1cnJlbnRDb2xvcixcbiAgICAgICAgY2FuQnVuZGxlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuX2NvbG9yU3RhY2tJbmRleCsrO1xuICB9XG4gIHBvcChfbWFzaywgX2NvbnRhaW5lciwgaW5zdHJ1Y3Rpb25TZXQpIHtcbiAgICBjb25zdCByZW5kZXJlciA9IHRoaXMuX3JlbmRlcmVyO1xuICAgIHJlbmRlcmVyLnJlbmRlclBpcGVzLmJhdGNoLmJyZWFrKGluc3RydWN0aW9uU2V0KTtcbiAgICBjb25zdCBjb2xvclN0YWNrID0gdGhpcy5fY29sb3JTdGFjaztcbiAgICB0aGlzLl9jb2xvclN0YWNrSW5kZXgtLTtcbiAgICBjb25zdCBjdXJyZW50Q29sb3IgPSBjb2xvclN0YWNrW3RoaXMuX2NvbG9yU3RhY2tJbmRleCAtIDFdO1xuICAgIGlmIChjdXJyZW50Q29sb3IgIT09IHRoaXMuX2N1cnJlbnRDb2xvcikge1xuICAgICAgdGhpcy5fY3VycmVudENvbG9yID0gY3VycmVudENvbG9yO1xuICAgICAgaW5zdHJ1Y3Rpb25TZXQuYWRkKHtcbiAgICAgICAgcmVuZGVyUGlwZUlkOiBcImNvbG9yTWFza1wiLFxuICAgICAgICBjb2xvck1hc2s6IGN1cnJlbnRDb2xvcixcbiAgICAgICAgY2FuQnVuZGxlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGV4ZWN1dGUoaW5zdHJ1Y3Rpb24pIHtcbiAgICBjb25zdCByZW5kZXJlciA9IHRoaXMuX3JlbmRlcmVyO1xuICAgIHJlbmRlcmVyLmNvbG9yTWFzay5zZXRNYXNrKGluc3RydWN0aW9uLmNvbG9yTWFzayk7XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLl9jb2xvclN0YWNrID0gbnVsbDtcbiAgfVxufVxuLyoqIEBpZ25vcmUgKi9cbkNvbG9yTWFza1BpcGUuZXh0ZW5zaW9uID0ge1xuICB0eXBlOiBbXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHTFBpcGVzLFxuICAgIEV4dGVuc2lvblR5cGUuV2ViR1BVUGlwZXMsXG4gICAgRXh0ZW5zaW9uVHlwZS5DYW52YXNQaXBlc1xuICBdLFxuICBuYW1lOiBcImNvbG9yTWFza1wiXG59O1xuXG5leHBvcnQgeyBDb2xvck1hc2tQaXBlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2xvck1hc2tQaXBlLm1qcy5tYXBcbiIsImltcG9ydCB7IEV4dGVuc2lvblR5cGUgfSBmcm9tICcuLi8uLi8uLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IGNvbGxlY3RBbGxSZW5kZXJhYmxlcyB9IGZyb20gJy4uLy4uLy4uL3NjZW5lL2NvbnRhaW5lci91dGlscy9idWlsZEluc3RydWN0aW9ucy5tanMnO1xuaW1wb3J0IHsgQ0xFQVIgfSBmcm9tICcuLi8uLi9yZW5kZXJlcnMvZ2wvY29uc3QubWpzJztcbmltcG9ydCB7IFNURU5DSUxfTU9ERVMgfSBmcm9tICcuLi8uLi9yZW5kZXJlcnMvc2hhcmVkL3N0YXRlL2NvbnN0Lm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY2xhc3MgU3RlbmNpbE1hc2tQaXBlIHtcbiAgY29uc3RydWN0b3IocmVuZGVyZXIpIHtcbiAgICAvLyB1c2VkIHdoZW4gYnVpbGRpbmcgYW5kIGFsc28gd2hlbiBleGVjdXRpbmcuLlxuICAgIHRoaXMuX21hc2tTdGFja0hhc2ggPSB7fTtcbiAgICB0aGlzLl9tYXNrSGFzaCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gIH1cbiAgcHVzaChtYXNrLCBfY29udGFpbmVyLCBpbnN0cnVjdGlvblNldCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBlZmZlY3QgPSBtYXNrO1xuICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5fcmVuZGVyZXI7XG4gICAgcmVuZGVyZXIucmVuZGVyUGlwZXMuYmF0Y2guYnJlYWsoaW5zdHJ1Y3Rpb25TZXQpO1xuICAgIHJlbmRlcmVyLnJlbmRlclBpcGVzLmJsZW5kTW9kZS5zZXRCbGVuZE1vZGUoZWZmZWN0Lm1hc2ssIFwibm9uZVwiLCBpbnN0cnVjdGlvblNldCk7XG4gICAgaW5zdHJ1Y3Rpb25TZXQuYWRkKHtcbiAgICAgIHJlbmRlclBpcGVJZDogXCJzdGVuY2lsTWFza1wiLFxuICAgICAgYWN0aW9uOiBcInB1c2hNYXNrQmVnaW5cIixcbiAgICAgIG1hc2ssXG4gICAgICBjYW5CdW5kbGU6IGZhbHNlXG4gICAgfSk7XG4gICAgY29uc3QgbWFza0NvbnRhaW5lciA9IGVmZmVjdC5tYXNrO1xuICAgIG1hc2tDb250YWluZXIuaW5jbHVkZUluQnVpbGQgPSB0cnVlO1xuICAgIGlmICghdGhpcy5fbWFza0hhc2guaGFzKGVmZmVjdCkpIHtcbiAgICAgIHRoaXMuX21hc2tIYXNoLnNldChlZmZlY3QsIHtcbiAgICAgICAgaW5zdHJ1Y3Rpb25zU3RhcnQ6IDAsXG4gICAgICAgIGluc3RydWN0aW9uc0xlbmd0aDogMFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG1hc2tEYXRhID0gdGhpcy5fbWFza0hhc2guZ2V0KGVmZmVjdCk7XG4gICAgbWFza0RhdGEuaW5zdHJ1Y3Rpb25zU3RhcnQgPSBpbnN0cnVjdGlvblNldC5pbnN0cnVjdGlvblNpemU7XG4gICAgY29sbGVjdEFsbFJlbmRlcmFibGVzKFxuICAgICAgbWFza0NvbnRhaW5lcixcbiAgICAgIGluc3RydWN0aW9uU2V0LFxuICAgICAgcmVuZGVyZXIucmVuZGVyUGlwZXNcbiAgICApO1xuICAgIG1hc2tDb250YWluZXIuaW5jbHVkZUluQnVpbGQgPSBmYWxzZTtcbiAgICByZW5kZXJlci5yZW5kZXJQaXBlcy5iYXRjaC5icmVhayhpbnN0cnVjdGlvblNldCk7XG4gICAgaW5zdHJ1Y3Rpb25TZXQuYWRkKHtcbiAgICAgIHJlbmRlclBpcGVJZDogXCJzdGVuY2lsTWFza1wiLFxuICAgICAgYWN0aW9uOiBcInB1c2hNYXNrRW5kXCIsXG4gICAgICBtYXNrLFxuICAgICAgY2FuQnVuZGxlOiBmYWxzZVxuICAgIH0pO1xuICAgIGNvbnN0IGluc3RydWN0aW9uc0xlbmd0aCA9IGluc3RydWN0aW9uU2V0Lmluc3RydWN0aW9uU2l6ZSAtIG1hc2tEYXRhLmluc3RydWN0aW9uc1N0YXJ0IC0gMTtcbiAgICBtYXNrRGF0YS5pbnN0cnVjdGlvbnNMZW5ndGggPSBpbnN0cnVjdGlvbnNMZW5ndGg7XG4gICAgY29uc3QgcmVuZGVyVGFyZ2V0VWlkID0gcmVuZGVyZXIucmVuZGVyVGFyZ2V0LnJlbmRlclRhcmdldC51aWQ7XG4gICAgKF9hID0gdGhpcy5fbWFza1N0YWNrSGFzaClbcmVuZGVyVGFyZ2V0VWlkXSA/PyAoX2FbcmVuZGVyVGFyZ2V0VWlkXSA9IDApO1xuICB9XG4gIHBvcChtYXNrLCBfY29udGFpbmVyLCBpbnN0cnVjdGlvblNldCkge1xuICAgIGNvbnN0IGVmZmVjdCA9IG1hc2s7XG4gICAgY29uc3QgcmVuZGVyZXIgPSB0aGlzLl9yZW5kZXJlcjtcbiAgICByZW5kZXJlci5yZW5kZXJQaXBlcy5iYXRjaC5icmVhayhpbnN0cnVjdGlvblNldCk7XG4gICAgcmVuZGVyZXIucmVuZGVyUGlwZXMuYmxlbmRNb2RlLnNldEJsZW5kTW9kZShlZmZlY3QubWFzaywgXCJub25lXCIsIGluc3RydWN0aW9uU2V0KTtcbiAgICBpbnN0cnVjdGlvblNldC5hZGQoe1xuICAgICAgcmVuZGVyUGlwZUlkOiBcInN0ZW5jaWxNYXNrXCIsXG4gICAgICBhY3Rpb246IFwicG9wTWFza0JlZ2luXCIsXG4gICAgICBjYW5CdW5kbGU6IGZhbHNlXG4gICAgfSk7XG4gICAgY29uc3QgbWFza0RhdGEgPSB0aGlzLl9tYXNrSGFzaC5nZXQobWFzayk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXNrRGF0YS5pbnN0cnVjdGlvbnNMZW5ndGg7IGkrKykge1xuICAgICAgaW5zdHJ1Y3Rpb25TZXQuaW5zdHJ1Y3Rpb25zW2luc3RydWN0aW9uU2V0Lmluc3RydWN0aW9uU2l6ZSsrXSA9IGluc3RydWN0aW9uU2V0Lmluc3RydWN0aW9uc1ttYXNrRGF0YS5pbnN0cnVjdGlvbnNTdGFydCsrXTtcbiAgICB9XG4gICAgaW5zdHJ1Y3Rpb25TZXQuYWRkKHtcbiAgICAgIHJlbmRlclBpcGVJZDogXCJzdGVuY2lsTWFza1wiLFxuICAgICAgYWN0aW9uOiBcInBvcE1hc2tFbmRcIixcbiAgICAgIGNhbkJ1bmRsZTogZmFsc2VcbiAgICB9KTtcbiAgfVxuICBleGVjdXRlKGluc3RydWN0aW9uKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5fcmVuZGVyZXI7XG4gICAgY29uc3QgcmVuZGVyVGFyZ2V0VWlkID0gcmVuZGVyZXIucmVuZGVyVGFyZ2V0LnJlbmRlclRhcmdldC51aWQ7XG4gICAgbGV0IG1hc2tTdGFja0luZGV4ID0gKF9hID0gdGhpcy5fbWFza1N0YWNrSGFzaClbcmVuZGVyVGFyZ2V0VWlkXSA/PyAoX2FbcmVuZGVyVGFyZ2V0VWlkXSA9IDApO1xuICAgIGlmIChpbnN0cnVjdGlvbi5hY3Rpb24gPT09IFwicHVzaE1hc2tCZWdpblwiKSB7XG4gICAgICByZW5kZXJlci5yZW5kZXJUYXJnZXQuZW5zdXJlRGVwdGhTdGVuY2lsKCk7XG4gICAgICByZW5kZXJlci5zdGVuY2lsLnNldFN0ZW5jaWxNb2RlKFNURU5DSUxfTU9ERVMuUkVOREVSSU5HX01BU0tfQURELCBtYXNrU3RhY2tJbmRleCk7XG4gICAgICBtYXNrU3RhY2tJbmRleCsrO1xuICAgICAgcmVuZGVyZXIuY29sb3JNYXNrLnNldE1hc2soMCk7XG4gICAgfSBlbHNlIGlmIChpbnN0cnVjdGlvbi5hY3Rpb24gPT09IFwicHVzaE1hc2tFbmRcIikge1xuICAgICAgcmVuZGVyZXIuc3RlbmNpbC5zZXRTdGVuY2lsTW9kZShTVEVOQ0lMX01PREVTLk1BU0tfQUNUSVZFLCBtYXNrU3RhY2tJbmRleCk7XG4gICAgICByZW5kZXJlci5jb2xvck1hc2suc2V0TWFzaygxNSk7XG4gICAgfSBlbHNlIGlmIChpbnN0cnVjdGlvbi5hY3Rpb24gPT09IFwicG9wTWFza0JlZ2luXCIpIHtcbiAgICAgIHJlbmRlcmVyLmNvbG9yTWFzay5zZXRNYXNrKDApO1xuICAgICAgaWYgKG1hc2tTdGFja0luZGV4ICE9PSAwKSB7XG4gICAgICAgIHJlbmRlcmVyLnN0ZW5jaWwuc2V0U3RlbmNpbE1vZGUoU1RFTkNJTF9NT0RFUy5SRU5ERVJJTkdfTUFTS19SRU1PVkUsIG1hc2tTdGFja0luZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlclRhcmdldC5jbGVhcihudWxsLCBDTEVBUi5TVEVOQ0lMKTtcbiAgICAgICAgcmVuZGVyZXIuc3RlbmNpbC5zZXRTdGVuY2lsTW9kZShTVEVOQ0lMX01PREVTLkRJU0FCTEVELCBtYXNrU3RhY2tJbmRleCk7XG4gICAgICB9XG4gICAgICBtYXNrU3RhY2tJbmRleC0tO1xuICAgIH0gZWxzZSBpZiAoaW5zdHJ1Y3Rpb24uYWN0aW9uID09PSBcInBvcE1hc2tFbmRcIikge1xuICAgICAgcmVuZGVyZXIuc3RlbmNpbC5zZXRTdGVuY2lsTW9kZShTVEVOQ0lMX01PREVTLk1BU0tfQUNUSVZFLCBtYXNrU3RhY2tJbmRleCk7XG4gICAgICByZW5kZXJlci5jb2xvck1hc2suc2V0TWFzaygxNSk7XG4gICAgfVxuICAgIHRoaXMuX21hc2tTdGFja0hhc2hbcmVuZGVyVGFyZ2V0VWlkXSA9IG1hc2tTdGFja0luZGV4O1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSBudWxsO1xuICAgIHRoaXMuX21hc2tTdGFja0hhc2ggPSBudWxsO1xuICAgIHRoaXMuX21hc2tIYXNoID0gbnVsbDtcbiAgfVxufVxuU3RlbmNpbE1hc2tQaXBlLmV4dGVuc2lvbiA9IHtcbiAgdHlwZTogW1xuICAgIEV4dGVuc2lvblR5cGUuV2ViR0xQaXBlcyxcbiAgICBFeHRlbnNpb25UeXBlLldlYkdQVVBpcGVzLFxuICAgIEV4dGVuc2lvblR5cGUuQ2FudmFzUGlwZXNcbiAgXSxcbiAgbmFtZTogXCJzdGVuY2lsTWFza1wiXG59O1xuXG5leHBvcnQgeyBTdGVuY2lsTWFza1BpcGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0ZW5jaWxNYXNrUGlwZS5tanMubWFwXG4iLCJpbXBvcnQgeyBDb2xvciB9IGZyb20gJy4uLy4uLy4uLy4uL2NvbG9yL0NvbG9yLm1qcyc7XG5pbXBvcnQgeyBFeHRlbnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgX0JhY2tncm91bmRTeXN0ZW0gPSBjbGFzcyBfQmFja2dyb3VuZFN5c3RlbSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2xlYXJCZWZvcmVSZW5kZXIgPSB0cnVlO1xuICAgIHRoaXMuX2JhY2tncm91bmRDb2xvciA9IG5ldyBDb2xvcigwKTtcbiAgICB0aGlzLmNvbG9yID0gdGhpcy5fYmFja2dyb3VuZENvbG9yO1xuICAgIHRoaXMuYWxwaGEgPSAxO1xuICB9XG4gIC8qKlxuICAgKiBpbml0aWF0ZXMgdGhlIGJhY2tncm91bmQgc3lzdGVtXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gdGhlIG9wdGlvbnMgZm9yIHRoZSBiYWNrZ3JvdW5kIGNvbG9yc1xuICAgKi9cbiAgaW5pdChvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHsgLi4uX0JhY2tncm91bmRTeXN0ZW0uZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcbiAgICB0aGlzLmNsZWFyQmVmb3JlUmVuZGVyID0gb3B0aW9ucy5jbGVhckJlZm9yZVJlbmRlcjtcbiAgICB0aGlzLmNvbG9yID0gb3B0aW9ucy5iYWNrZ3JvdW5kIHx8IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yIHx8IHRoaXMuX2JhY2tncm91bmRDb2xvcjtcbiAgICB0aGlzLmFscGhhID0gb3B0aW9ucy5iYWNrZ3JvdW5kQWxwaGE7XG4gICAgdGhpcy5fYmFja2dyb3VuZENvbG9yLnNldEFscGhhKG9wdGlvbnMuYmFja2dyb3VuZEFscGhhKTtcbiAgfVxuICAvKiogVGhlIGJhY2tncm91bmQgY29sb3IgdG8gZmlsbCBpZiBub3QgdHJhbnNwYXJlbnQgKi9cbiAgZ2V0IGNvbG9yKCkge1xuICAgIHJldHVybiB0aGlzLl9iYWNrZ3JvdW5kQ29sb3I7XG4gIH1cbiAgc2V0IGNvbG9yKHZhbHVlKSB7XG4gICAgdGhpcy5fYmFja2dyb3VuZENvbG9yLnNldFZhbHVlKHZhbHVlKTtcbiAgfVxuICAvKiogVGhlIGJhY2tncm91bmQgY29sb3IgYWxwaGEuIFNldHRpbmcgdGhpcyB0byAwIHdpbGwgbWFrZSB0aGUgY2FudmFzIHRyYW5zcGFyZW50LiAqL1xuICBnZXQgYWxwaGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2JhY2tncm91bmRDb2xvci5hbHBoYTtcbiAgfVxuICBzZXQgYWxwaGEodmFsdWUpIHtcbiAgICB0aGlzLl9iYWNrZ3JvdW5kQ29sb3Iuc2V0QWxwaGEodmFsdWUpO1xuICB9XG4gIC8qKiBUaGUgYmFja2dyb3VuZCBjb2xvciBhcyBhbiBbUiwgRywgQiwgQV0gYXJyYXkuICovXG4gIGdldCBjb2xvclJnYmEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2JhY2tncm91bmRDb2xvci50b0FycmF5KCk7XG4gIH1cbiAgLyoqXG4gICAqIGRlc3Ryb3lzIHRoZSBiYWNrZ3JvdW5kIHN5c3RlbVxuICAgKiBAaW50ZXJuYWxcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgZGVzdHJveSgpIHtcbiAgfVxufTtcbi8qKiBAaWdub3JlICovXG5fQmFja2dyb3VuZFN5c3RlbS5leHRlbnNpb24gPSB7XG4gIHR5cGU6IFtcbiAgICBFeHRlbnNpb25UeXBlLldlYkdMU3lzdGVtLFxuICAgIEV4dGVuc2lvblR5cGUuV2ViR1BVU3lzdGVtLFxuICAgIEV4dGVuc2lvblR5cGUuQ2FudmFzU3lzdGVtXG4gIF0sXG4gIG5hbWU6IFwiYmFja2dyb3VuZFwiLFxuICBwcmlvcml0eTogMFxufTtcbi8qKiBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgc3lzdGVtICovXG5fQmFja2dyb3VuZFN5c3RlbS5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgLyoqXG4gICAqIHtAbGluayBXZWJHTE9wdGlvbnMuYmFja2dyb3VuZEFscGhhfVxuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuICBiYWNrZ3JvdW5kQWxwaGE6IDEsXG4gIC8qKlxuICAgKiB7QGxpbmsgV2ViR0xPcHRpb25zLmJhY2tncm91bmRDb2xvcn1cbiAgICogQGRlZmF1bHQgMHgwMDAwMDBcbiAgICovXG4gIGJhY2tncm91bmRDb2xvcjogMCxcbiAgLyoqXG4gICAqIHtAbGluayBXZWJHTE9wdGlvbnMuY2xlYXJCZWZvcmVSZW5kZXJ9XG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIGNsZWFyQmVmb3JlUmVuZGVyOiB0cnVlXG59O1xubGV0IEJhY2tncm91bmRTeXN0ZW0gPSBfQmFja2dyb3VuZFN5c3RlbTtcblxuZXhwb3J0IHsgQmFja2dyb3VuZFN5c3RlbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFja2dyb3VuZFN5c3RlbS5tanMubWFwXG4iLCJpbXBvcnQgeyBleHRlbnNpb25zLCBFeHRlbnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5pbXBvcnQgeyBGaWx0ZXJFZmZlY3QgfSBmcm9tICcuLi8uLi8uLi8uLi9maWx0ZXJzL0ZpbHRlckVmZmVjdC5tanMnO1xuaW1wb3J0IHsgd2FybiB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL2xvZ2dpbmcvd2Fybi5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNvbnN0IEJMRU5EX01PREVfRklMVEVSUyA9IHt9O1xuZXh0ZW5zaW9ucy5oYW5kbGUoRXh0ZW5zaW9uVHlwZS5CbGVuZE1vZGUsICh2YWx1ZSkgPT4ge1xuICBpZiAoIXZhbHVlLm5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJCbGVuZE1vZGUgZXh0ZW5zaW9uIG11c3QgaGF2ZSBhIG5hbWUgcHJvcGVydHlcIik7XG4gIH1cbiAgQkxFTkRfTU9ERV9GSUxURVJTW3ZhbHVlLm5hbWVdID0gdmFsdWUucmVmO1xufSwgKHZhbHVlKSA9PiB7XG4gIGRlbGV0ZSBCTEVORF9NT0RFX0ZJTFRFUlNbdmFsdWUubmFtZV07XG59KTtcbmNsYXNzIEJsZW5kTW9kZVBpcGUge1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlcikge1xuICAgIHRoaXMuX2lzQWR2YW5jZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9maWx0ZXJIYXNoID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgfVxuICAvKipcbiAgICogVGhpcyBlbnN1cmVzIHRoYXQgYSBibGVuZE1vZGUgc3dpdGNoIGlzIGFkZGVkIHRvIHRoZSBpbnN0cnVjdGlvbiBzZXQgaWYgdGhlIGJsZW5kIG1vZGUgaGFzIGNoYW5nZWQuXG4gICAqIEBwYXJhbSByZW5kZXJhYmxlIC0gVGhlIHJlbmRlcmFibGUgd2UgYXJlIGFkZGluZyB0byB0aGUgaW5zdHJ1Y3Rpb24gc2V0XG4gICAqIEBwYXJhbSBibGVuZE1vZGUgLSBUaGUgYmxlbmQgbW9kZSBvZiB0aGUgcmVuZGVyYWJsZVxuICAgKiBAcGFyYW0gaW5zdHJ1Y3Rpb25TZXQgLSBUaGUgaW5zdHJ1Y3Rpb24gc2V0IHdlIGFyZSBhZGRpbmcgdG9cbiAgICovXG4gIHNldEJsZW5kTW9kZShyZW5kZXJhYmxlLCBibGVuZE1vZGUsIGluc3RydWN0aW9uU2V0KSB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJsZW5kTW9kZSA9PT0gYmxlbmRNb2RlKSB7XG4gICAgICBpZiAodGhpcy5faXNBZHZhbmNlZClcbiAgICAgICAgdGhpcy5fcmVuZGVyYWJsZUxpc3QucHVzaChyZW5kZXJhYmxlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fYWN0aXZlQmxlbmRNb2RlID0gYmxlbmRNb2RlO1xuICAgIGlmICh0aGlzLl9pc0FkdmFuY2VkKSB7XG4gICAgICB0aGlzLl9lbmRBZHZhbmNlZEJsZW5kTW9kZShpbnN0cnVjdGlvblNldCk7XG4gICAgfVxuICAgIHRoaXMuX2lzQWR2YW5jZWQgPSAhIUJMRU5EX01PREVfRklMVEVSU1tibGVuZE1vZGVdO1xuICAgIGlmICh0aGlzLl9pc0FkdmFuY2VkKSB7XG4gICAgICB0aGlzLl9iZWdpbkFkdmFuY2VkQmxlbmRNb2RlKGluc3RydWN0aW9uU2V0KTtcbiAgICAgIHRoaXMuX3JlbmRlcmFibGVMaXN0LnB1c2gocmVuZGVyYWJsZSk7XG4gICAgfVxuICB9XG4gIF9iZWdpbkFkdmFuY2VkQmxlbmRNb2RlKGluc3RydWN0aW9uU2V0KSB7XG4gICAgdGhpcy5fcmVuZGVyZXIucmVuZGVyUGlwZXMuYmF0Y2guYnJlYWsoaW5zdHJ1Y3Rpb25TZXQpO1xuICAgIGNvbnN0IGJsZW5kTW9kZSA9IHRoaXMuX2FjdGl2ZUJsZW5kTW9kZTtcbiAgICBpZiAoIUJMRU5EX01PREVfRklMVEVSU1tibGVuZE1vZGVdKSB7XG4gICAgICB3YXJuKGBVbmFibGUgdG8gYXNzaWduIEJsZW5kTW9kZTogJyR7YmxlbmRNb2RlfScuIFlvdSBtYXkgd2FudCB0byBpbmNsdWRlOiBpbXBvcnQgJ3BpeGkuanMvYWR2YW5jZWQtYmxlbmQtbW9kZXMnYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBmaWx0ZXJFZmZlY3QgPSB0aGlzLl9maWx0ZXJIYXNoW2JsZW5kTW9kZV07XG4gICAgaWYgKCFmaWx0ZXJFZmZlY3QpIHtcbiAgICAgIGZpbHRlckVmZmVjdCA9IHRoaXMuX2ZpbHRlckhhc2hbYmxlbmRNb2RlXSA9IG5ldyBGaWx0ZXJFZmZlY3QoKTtcbiAgICAgIGZpbHRlckVmZmVjdC5maWx0ZXJzID0gW25ldyBCTEVORF9NT0RFX0ZJTFRFUlNbYmxlbmRNb2RlXSgpXTtcbiAgICB9XG4gICAgY29uc3QgaW5zdHJ1Y3Rpb24gPSB7XG4gICAgICByZW5kZXJQaXBlSWQ6IFwiZmlsdGVyXCIsXG4gICAgICBhY3Rpb246IFwicHVzaEZpbHRlclwiLFxuICAgICAgcmVuZGVyYWJsZXM6IFtdLFxuICAgICAgZmlsdGVyRWZmZWN0LFxuICAgICAgY2FuQnVuZGxlOiBmYWxzZVxuICAgIH07XG4gICAgdGhpcy5fcmVuZGVyYWJsZUxpc3QgPSBpbnN0cnVjdGlvbi5yZW5kZXJhYmxlcztcbiAgICBpbnN0cnVjdGlvblNldC5hZGQoaW5zdHJ1Y3Rpb24pO1xuICB9XG4gIF9lbmRBZHZhbmNlZEJsZW5kTW9kZShpbnN0cnVjdGlvblNldCkge1xuICAgIHRoaXMuX3JlbmRlcmFibGVMaXN0ID0gbnVsbDtcbiAgICB0aGlzLl9yZW5kZXJlci5yZW5kZXJQaXBlcy5iYXRjaC5icmVhayhpbnN0cnVjdGlvblNldCk7XG4gICAgaW5zdHJ1Y3Rpb25TZXQuYWRkKHtcbiAgICAgIHJlbmRlclBpcGVJZDogXCJmaWx0ZXJcIixcbiAgICAgIGFjdGlvbjogXCJwb3BGaWx0ZXJcIixcbiAgICAgIGNhbkJ1bmRsZTogZmFsc2VcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogY2FsbGVkIHdoZW4gdGhlIGluc3RydWN0aW9uIGJ1aWxkIHByb2Nlc3MgaXMgc3RhcnRpbmcgdGhpcyB3aWxsIHJlc2V0IGludGVybmFsbHkgdG8gdGhlIGRlZmF1bHQgYmxlbmQgbW9kZVxuICAgKiBAaW50ZXJuYWxcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgYnVpbGRTdGFydCgpIHtcbiAgICB0aGlzLl9pc0FkdmFuY2VkID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIGNhbGxlZCB3aGVuIHRoZSBpbnN0cnVjdGlvbiBidWlsZCBwcm9jZXNzIGlzIGZpbmlzaGVkLCBlbnN1cmluZyB0aGF0IGlmIHRoZXJlIGlzIGFuIGFkdmFuY2VkIGJsZW5kIG1vZGVcbiAgICogYWN0aXZlLCB3ZSBhZGQgdGhlIGZpbmFsIHJlbmRlciBpbnN0cnVjdGlvbnMgYWRkZWQgdG8gdGhlIGluc3RydWN0aW9uIHNldFxuICAgKiBAcGFyYW0gaW5zdHJ1Y3Rpb25TZXQgLSBUaGUgaW5zdHJ1Y3Rpb24gc2V0IHdlIGFyZSBhZGRpbmcgdG9cbiAgICogQGludGVybmFsXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGJ1aWxkRW5kKGluc3RydWN0aW9uU2V0KSB7XG4gICAgaWYgKHRoaXMuX2lzQWR2YW5jZWQpIHtcbiAgICAgIHRoaXMuX2VuZEFkdmFuY2VkQmxlbmRNb2RlKGluc3RydWN0aW9uU2V0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAaWdub3JlXG4gICAqL1xuICBkZXN0cm95KCkge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gbnVsbDtcbiAgICB0aGlzLl9yZW5kZXJhYmxlTGlzdCA9IG51bGw7XG4gICAgZm9yIChjb25zdCBpIGluIHRoaXMuX2ZpbHRlckhhc2gpIHtcbiAgICAgIHRoaXMuX2ZpbHRlckhhc2hbaV0uZGVzdHJveSgpO1xuICAgIH1cbiAgICB0aGlzLl9maWx0ZXJIYXNoID0gbnVsbDtcbiAgfVxufVxuLyoqIEBpZ25vcmUgKi9cbkJsZW5kTW9kZVBpcGUuZXh0ZW5zaW9uID0ge1xuICB0eXBlOiBbXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHTFBpcGVzLFxuICAgIEV4dGVuc2lvblR5cGUuV2ViR1BVUGlwZXMsXG4gICAgRXh0ZW5zaW9uVHlwZS5DYW52YXNQaXBlc1xuICBdLFxuICBuYW1lOiBcImJsZW5kTW9kZVwiXG59O1xuXG5leHBvcnQgeyBCbGVuZE1vZGVQaXBlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CbGVuZE1vZGVQaXBlLm1qcy5tYXBcbiIsImltcG9ydCB7IEV4dGVuc2lvblR5cGUgfSBmcm9tICcuLi8uLi8uLi8uLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lL2NvbnRhaW5lci9Db250YWluZXIubWpzJztcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tICcuLi90ZXh0dXJlL1RleHR1cmUubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBpbWFnZVR5cGVzID0ge1xuICBwbmc6IFwiaW1hZ2UvcG5nXCIsXG4gIGpwZzogXCJpbWFnZS9qcGVnXCIsXG4gIHdlYnA6IFwiaW1hZ2Uvd2VicFwiXG59O1xuY29uc3QgX0V4dHJhY3RTeXN0ZW0gPSBjbGFzcyBfRXh0cmFjdFN5c3RlbSB7XG4gIC8qKiBAcGFyYW0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgdGhpcyBTeXN0ZW0gd29ya3MgZm9yLiAqL1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gIH1cbiAgX25vcm1hbGl6ZU9wdGlvbnMob3B0aW9ucywgZGVmYXVsdHMgPSB7fSkge1xuICAgIGlmIChvcHRpb25zIGluc3RhbmNlb2YgQ29udGFpbmVyIHx8IG9wdGlvbnMgaW5zdGFuY2VvZiBUZXh0dXJlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0YXJnZXQ6IG9wdGlvbnMsXG4gICAgICAgIC4uLmRlZmF1bHRzXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4uZGVmYXVsdHMsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogV2lsbCByZXR1cm4gYSBIVE1MIEltYWdlIG9mIHRoZSB0YXJnZXRcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgY3JlYXRpbmcgdGhlIGltYWdlLCBvciB0aGUgdGFyZ2V0IHRvIGV4dHJhY3RcbiAgICogQHJldHVybnMgLSBIVE1MIEltYWdlIG9mIHRoZSB0YXJnZXRcbiAgICovXG4gIGFzeW5jIGltYWdlKG9wdGlvbnMpIHtcbiAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIGltYWdlLnNyYyA9IGF3YWl0IHRoaXMuYmFzZTY0KG9wdGlvbnMpO1xuICAgIHJldHVybiBpbWFnZTtcbiAgfVxuICAvKipcbiAgICogV2lsbCByZXR1cm4gYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcgb2YgdGhpcyB0YXJnZXQuIEl0IHdvcmtzIGJ5IGNhbGxpbmdcbiAgICogYEV4dHJhY3QuY2FudmFzYCBhbmQgdGhlbiBydW5uaW5nIHRvRGF0YVVSTCBvbiB0aGF0LlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciBjcmVhdGluZyB0aGUgaW1hZ2UsIG9yIHRoZSB0YXJnZXQgdG8gZXh0cmFjdFxuICAgKi9cbiAgYXN5bmMgYmFzZTY0KG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gdGhpcy5fbm9ybWFsaXplT3B0aW9ucyhcbiAgICAgIG9wdGlvbnMsXG4gICAgICBfRXh0cmFjdFN5c3RlbS5kZWZhdWx0SW1hZ2VPcHRpb25zXG4gICAgKTtcbiAgICBjb25zdCB7IGZvcm1hdCwgcXVhbGl0eSB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLmNhbnZhcyhvcHRpb25zKTtcbiAgICBpZiAoY2FudmFzLnRvQmxvYiAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjYW52YXMudG9CbG9iKChibG9iKSA9PiB7XG4gICAgICAgICAgaWYgKCFibG9iKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiSUNhbnZhcy50b0Jsb2IgZmFpbGVkIVwiKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gICAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XG4gICAgICAgIH0sIGltYWdlVHlwZXNbZm9ybWF0XSwgcXVhbGl0eSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGNhbnZhcy50b0RhdGFVUkwgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoaW1hZ2VUeXBlc1tmb3JtYXRdLCBxdWFsaXR5KTtcbiAgICB9XG4gICAgaWYgKGNhbnZhcy5jb252ZXJ0VG9CbG9iICE9PSB2b2lkIDApIHtcbiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBjYW52YXMuY29udmVydFRvQmxvYih7IHR5cGU6IGltYWdlVHlwZXNbZm9ybWF0XSwgcXVhbGl0eSB9KTtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKHJlYWRlci5yZXN1bHQpO1xuICAgICAgICByZWFkZXIub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXh0cmFjdC5iYXNlNjQoKSByZXF1aXJlcyBJQ2FudmFzLnRvRGF0YVVSTCwgSUNhbnZhcy50b0Jsb2IsIG9yIElDYW52YXMuY29udmVydFRvQmxvYiB0byBiZSBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIENhbnZhcyBlbGVtZW50LCByZW5kZXJzIHRoaXMgdGFyZ2V0IHRvIGl0IGFuZCB0aGVuIHJldHVybnMgaXQuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIGNyZWF0aW5nIHRoZSBjYW52YXMsIG9yIHRoZSB0YXJnZXQgdG8gZXh0cmFjdFxuICAgKiBAcmV0dXJucyAtIEEgQ2FudmFzIGVsZW1lbnQgd2l0aCB0aGUgdGV4dHVyZSByZW5kZXJlZCBvbi5cbiAgICovXG4gIGNhbnZhcyhvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHRoaXMuX25vcm1hbGl6ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQ7XG4gICAgY29uc3QgcmVuZGVyZXIgPSB0aGlzLl9yZW5kZXJlcjtcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgVGV4dHVyZSkge1xuICAgICAgcmV0dXJuIHJlbmRlcmVyLnRleHR1cmUuZ2VuZXJhdGVDYW52YXModGFyZ2V0KTtcbiAgICB9XG4gICAgY29uc3QgdGV4dHVyZSA9IHJlbmRlcmVyLnRleHR1cmVHZW5lcmF0b3IuZ2VuZXJhdGVUZXh0dXJlKG9wdGlvbnMpO1xuICAgIGNvbnN0IGNhbnZhcyA9IHJlbmRlcmVyLnRleHR1cmUuZ2VuZXJhdGVDYW52YXModGV4dHVyZSk7XG4gICAgdGV4dHVyZS5kZXN0cm95KCk7XG4gICAgcmV0dXJuIGNhbnZhcztcbiAgfVxuICAvKipcbiAgICogV2lsbCByZXR1cm4gYSBvbmUtZGltZW5zaW9uYWwgYXJyYXkgY29udGFpbmluZyB0aGUgcGl4ZWwgZGF0YSBvZiB0aGUgZW50aXJlIHRleHR1cmUgaW4gUkdCQVxuICAgKiBvcmRlciwgd2l0aCBpbnRlZ2VyIHZhbHVlcyBiZXR3ZWVuIDAgYW5kIDI1NSAoaW5jbHVkZWQpLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciBleHRyYWN0aW5nIHRoZSBpbWFnZSwgb3IgdGhlIHRhcmdldCB0byBleHRyYWN0XG4gICAqIEByZXR1cm5zIC0gT25lLWRpbWVuc2lvbmFsIGFycmF5IGNvbnRhaW5pbmcgdGhlIHBpeGVsIGRhdGEgb2YgdGhlIGVudGlyZSB0ZXh0dXJlXG4gICAqL1xuICBwaXhlbHMob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB0aGlzLl9ub3JtYWxpemVPcHRpb25zKG9wdGlvbnMpO1xuICAgIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0O1xuICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5fcmVuZGVyZXI7XG4gICAgY29uc3QgdGV4dHVyZSA9IHRhcmdldCBpbnN0YW5jZW9mIFRleHR1cmUgPyB0YXJnZXQgOiByZW5kZXJlci50ZXh0dXJlR2VuZXJhdG9yLmdlbmVyYXRlVGV4dHVyZShvcHRpb25zKTtcbiAgICBjb25zdCBwaXhlbEluZm8gPSByZW5kZXJlci50ZXh0dXJlLmdldFBpeGVscyh0ZXh0dXJlKTtcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgQ29udGFpbmVyKSB7XG4gICAgICB0ZXh0dXJlLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgcmV0dXJuIHBpeGVsSW5mbztcbiAgfVxuICAvKipcbiAgICogV2lsbCByZXR1cm4gYSB0ZXh0dXJlIG9mIHRoZSB0YXJnZXRcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgY3JlYXRpbmcgdGhlIHRleHR1cmUsIG9yIHRoZSB0YXJnZXQgdG8gZXh0cmFjdFxuICAgKiBAcmV0dXJucyAtIEEgdGV4dHVyZSBvZiB0aGUgdGFyZ2V0XG4gICAqL1xuICB0ZXh0dXJlKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gdGhpcy5fbm9ybWFsaXplT3B0aW9ucyhvcHRpb25zKTtcbiAgICBpZiAob3B0aW9ucy50YXJnZXQgaW5zdGFuY2VvZiBUZXh0dXJlKVxuICAgICAgcmV0dXJuIG9wdGlvbnMudGFyZ2V0O1xuICAgIHJldHVybiB0aGlzLl9yZW5kZXJlci50ZXh0dXJlR2VuZXJhdG9yLmdlbmVyYXRlVGV4dHVyZShvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogV2lsbCBleHRyYWN0IGEgSFRNTEltYWdlIG9mIHRoZSB0YXJnZXQgYW5kIGRvd25sb2FkIGl0XG4gICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIGRvd25sb2FkaW5nIGFuZCBleHRyYWN0aW5nIHRoZSBpbWFnZSwgb3IgdGhlIHRhcmdldCB0byBleHRyYWN0XG4gICAqL1xuICBkb3dubG9hZChvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHRoaXMuX25vcm1hbGl6ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgY29uc3QgY2FudmFzID0gdGhpcy5jYW52YXMob3B0aW9ucyk7XG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgIGxpbmsuZG93bmxvYWQgPSBvcHRpb25zLmZpbGVuYW1lID8/IFwiaW1hZ2UucG5nXCI7XG4gICAgbGluay5ocmVmID0gY2FudmFzLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspO1xuICAgIGxpbmsuY2xpY2soKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xuICB9XG4gIC8qKlxuICAgKiBMb2dzIHRoZSB0YXJnZXQgdG8gdGhlIGNvbnNvbGUgYXMgYW4gaW1hZ2UuIFRoaXMgaXMgYSB1c2VmdWwgd2F5IHRvIGRlYnVnIHdoYXQncyBoYXBwZW5pbmcgaW4gdGhlIHJlbmRlcmVyLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciBsb2dnaW5nIHRoZSBpbWFnZSwgb3IgdGhlIHRhcmdldCB0byBsb2dcbiAgICovXG4gIGxvZyhvcHRpb25zKSB7XG4gICAgY29uc3Qgd2lkdGggPSBvcHRpb25zLndpZHRoID8/IDIwMDtcbiAgICBvcHRpb25zID0gdGhpcy5fbm9ybWFsaXplT3B0aW9ucyhvcHRpb25zKTtcbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLmNhbnZhcyhvcHRpb25zKTtcbiAgICBjb25zdCBiYXNlNjQgPSBjYW52YXMudG9EYXRhVVJMKCk7XG4gICAgY29uc29sZS5sb2coYFtQaXhpIFRleHR1cmVdICR7Y2FudmFzLndpZHRofXB4ICR7Y2FudmFzLmhlaWdodH1weGApO1xuICAgIGNvbnN0IHN0eWxlID0gW1xuICAgICAgXCJmb250LXNpemU6IDFweDtcIixcbiAgICAgIGBwYWRkaW5nOiAke3dpZHRofXB4ICR7MzAwfXB4O2AsXG4gICAgICBgYmFja2dyb3VuZDogdXJsKCR7YmFzZTY0fSkgbm8tcmVwZWF0O2AsXG4gICAgICBcImJhY2tncm91bmQtc2l6ZTogY29udGFpbjtcIlxuICAgIF0uam9pbihcIiBcIik7XG4gICAgY29uc29sZS5sb2coXCIlYyBcIiwgc3R5bGUpO1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSBudWxsO1xuICB9XG59O1xuLyoqIEBpZ25vcmUgKi9cbl9FeHRyYWN0U3lzdGVtLmV4dGVuc2lvbiA9IHtcbiAgdHlwZTogW1xuICAgIEV4dGVuc2lvblR5cGUuV2ViR0xTeXN0ZW0sXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHUFVTeXN0ZW1cbiAgXSxcbiAgbmFtZTogXCJleHRyYWN0XCJcbn07XG4vKiogRGVmYXVsdCBvcHRpb25zIGZvciBjcmVhdGluZyBhbiBpbWFnZS4gKi9cbl9FeHRyYWN0U3lzdGVtLmRlZmF1bHRJbWFnZU9wdGlvbnMgPSB7XG4gIC8qKiBUaGUgZm9ybWF0IG9mIHRoZSBpbWFnZS4gKi9cbiAgZm9ybWF0OiBcInBuZ1wiLFxuICAvKiogVGhlIHF1YWxpdHkgb2YgdGhlIGltYWdlLiAqL1xuICBxdWFsaXR5OiAxXG59O1xubGV0IEV4dHJhY3RTeXN0ZW0gPSBfRXh0cmFjdFN5c3RlbTtcblxuZXhwb3J0IHsgRXh0cmFjdFN5c3RlbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXh0cmFjdFN5c3RlbS5tanMubWFwXG4iLCJpbXBvcnQgeyBUZXh0dXJlU291cmNlIH0gZnJvbSAnLi9zb3VyY2VzL1RleHR1cmVTb3VyY2UubWpzJztcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tICcuL1RleHR1cmUubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jbGFzcyBSZW5kZXJUZXh0dXJlIGV4dGVuZHMgVGV4dHVyZSB7XG4gIHN0YXRpYyBjcmVhdGUob3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgVGV4dHVyZSh7XG4gICAgICBzb3VyY2U6IG5ldyBUZXh0dXJlU291cmNlKG9wdGlvbnMpXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFJlc2l6ZXMgdGhlIHJlbmRlciB0ZXh0dXJlLlxuICAgKiBAcGFyYW0gd2lkdGggLSBUaGUgbmV3IHdpZHRoIG9mIHRoZSByZW5kZXIgdGV4dHVyZS5cbiAgICogQHBhcmFtIGhlaWdodCAtIFRoZSBuZXcgaGVpZ2h0IG9mIHRoZSByZW5kZXIgdGV4dHVyZS5cbiAgICogQHBhcmFtIHJlc29sdXRpb24gLSBUaGUgbmV3IHJlc29sdXRpb24gb2YgdGhlIHJlbmRlciB0ZXh0dXJlLlxuICAgKiBAcmV0dXJucyBUaGlzIHRleHR1cmUuXG4gICAqL1xuICByZXNpemUod2lkdGgsIGhlaWdodCwgcmVzb2x1dGlvbikge1xuICAgIHRoaXMuc291cmNlLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0LCByZXNvbHV0aW9uKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5leHBvcnQgeyBSZW5kZXJUZXh0dXJlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZW5kZXJUZXh0dXJlLm1qcy5tYXBcbiIsImltcG9ydCB7IENvbG9yIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29sb3IvQ29sb3IubWpzJztcbmltcG9ydCB7IEV4dGVuc2lvblR5cGUgfSBmcm9tICcuLi8uLi8uLi8uLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IE1hdHJpeCB9IGZyb20gJy4uLy4uLy4uLy4uL21hdGhzL21hdHJpeC9NYXRyaXgubWpzJztcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gJy4uLy4uLy4uLy4uL21hdGhzL3NoYXBlcy9SZWN0YW5nbGUubWpzJztcbmltcG9ydCB7IEJvdW5kcyB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lL2NvbnRhaW5lci9ib3VuZHMvQm91bmRzLm1qcyc7XG5pbXBvcnQgeyBnZXRMb2NhbEJvdW5kcyB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lL2NvbnRhaW5lci9ib3VuZHMvZ2V0TG9jYWxCb3VuZHMubWpzJztcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lL2NvbnRhaW5lci9Db250YWluZXIubWpzJztcbmltcG9ydCB7IFJlbmRlclRleHR1cmUgfSBmcm9tICcuLi90ZXh0dXJlL1JlbmRlclRleHR1cmUubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCB0ZW1wUmVjdCA9IG5ldyBSZWN0YW5nbGUoKTtcbmNvbnN0IHRlbXBCb3VuZHMgPSBuZXcgQm91bmRzKCk7XG5jb25zdCBub0NvbG9yID0gWzAsIDAsIDAsIDBdO1xuY2xhc3MgR2VuZXJhdGVUZXh0dXJlU3lzdGVtIHtcbiAgY29uc3RydWN0b3IocmVuZGVyZXIpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICB9XG4gIC8qKlxuICAgKiBBIFVzZWZ1bCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0ZXh0dXJlIG9mIHRoZSBkaXNwbGF5IG9iamVjdCB0aGF0IGNhbiB0aGVuIGJlIHVzZWQgdG8gY3JlYXRlIHNwcml0ZXNcbiAgICogVGhpcyBjYW4gYmUgcXVpdGUgdXNlZnVsIGlmIHlvdXIgY29udGFpbmVyIGlzIGNvbXBsaWNhdGVkIGFuZCBuZWVkcyB0byBiZSByZXVzZWQgbXVsdGlwbGUgdGltZXMuXG4gICAqIEBwYXJhbSB7R2VuZXJhdGVUZXh0dXJlT3B0aW9ucyB8IENvbnRhaW5lcn0gb3B0aW9ucyAtIEdlbmVyYXRlIHRleHR1cmUgb3B0aW9ucy5cbiAgICogQHBhcmFtIHtDb250YWluZXJ9IFtvcHRpb25zLmNvbnRhaW5lcl0gLSBJZiBub3QgZ2l2ZW4sIHRoZSByZW5kZXJlcidzIHJlc29sdXRpb24gaXMgdXNlZC5cbiAgICogQHBhcmFtIHtSZWN0YW5nbGV9IG9wdGlvbnMucmVnaW9uIC0gVGhlIHJlZ2lvbiBvZiB0aGUgY29udGFpbmVyLCB0aGF0IHNoYWxsIGJlIHJlbmRlcmVkLFxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucmVzb2x1dGlvbl0gLSBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdGV4dHVyZSBiZWluZyBnZW5lcmF0ZWQuXG4gICAqICAgICAgICBpZiBubyByZWdpb24gaXMgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byB0aGUgbG9jYWwgYm91bmRzIG9mIHRoZSBjb250YWluZXIuXG4gICAqIEBwYXJhbSB7R2VuZXJhdGVUZXh0dXJlU291cmNlT3B0aW9uc30gW29wdGlvbnMudGV4dHVyZVNvdXJjZU9wdGlvbnNdIC0gVGV4dHVyZSBvcHRpb25zIGZvciBHUFUuXG4gICAqIEByZXR1cm5zIGEgc2hpbnkgbmV3IHRleHR1cmUgb2YgdGhlIGNvbnRhaW5lciBwYXNzZWQgaW5cbiAgICovXG4gIGdlbmVyYXRlVGV4dHVyZShvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBDb250YWluZXIpIHtcbiAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgIHRhcmdldDogb3B0aW9ucyxcbiAgICAgICAgZnJhbWU6IHZvaWQgMCxcbiAgICAgICAgdGV4dHVyZVNvdXJjZU9wdGlvbnM6IHt9LFxuICAgICAgICByZXNvbHV0aW9uOiB2b2lkIDBcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHJlc29sdXRpb24gPSBvcHRpb25zLnJlc29sdXRpb24gfHwgdGhpcy5fcmVuZGVyZXIucmVzb2x1dGlvbjtcbiAgICBjb25zdCBhbnRpYWxpYXMgPSBvcHRpb25zLmFudGlhbGlhcyB8fCB0aGlzLl9yZW5kZXJlci52aWV3LmFudGlhbGlhcztcbiAgICBjb25zdCBjb250YWluZXIgPSBvcHRpb25zLnRhcmdldDtcbiAgICBsZXQgY2xlYXJDb2xvciA9IG9wdGlvbnMuY2xlYXJDb2xvcjtcbiAgICBpZiAoY2xlYXJDb2xvcikge1xuICAgICAgY29uc3QgaXNSR0JBQXJyYXkgPSBBcnJheS5pc0FycmF5KGNsZWFyQ29sb3IpICYmIGNsZWFyQ29sb3IubGVuZ3RoID09PSA0O1xuICAgICAgY2xlYXJDb2xvciA9IGlzUkdCQUFycmF5ID8gY2xlYXJDb2xvciA6IENvbG9yLnNoYXJlZC5zZXRWYWx1ZShjbGVhckNvbG9yKS50b0FycmF5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsZWFyQ29sb3IgPSBub0NvbG9yO1xuICAgIH1cbiAgICBjb25zdCByZWdpb24gPSBvcHRpb25zLmZyYW1lPy5jb3B5VG8odGVtcFJlY3QpIHx8IGdldExvY2FsQm91bmRzKGNvbnRhaW5lciwgdGVtcEJvdW5kcykucmVjdGFuZ2xlO1xuICAgIHJlZ2lvbi53aWR0aCA9IE1hdGgubWF4KHJlZ2lvbi53aWR0aCwgMSAvIHJlc29sdXRpb24pIHwgMDtcbiAgICByZWdpb24uaGVpZ2h0ID0gTWF0aC5tYXgocmVnaW9uLmhlaWdodCwgMSAvIHJlc29sdXRpb24pIHwgMDtcbiAgICBjb25zdCB0YXJnZXQgPSBSZW5kZXJUZXh0dXJlLmNyZWF0ZSh7XG4gICAgICAuLi5vcHRpb25zLnRleHR1cmVTb3VyY2VPcHRpb25zLFxuICAgICAgd2lkdGg6IHJlZ2lvbi53aWR0aCxcbiAgICAgIGhlaWdodDogcmVnaW9uLmhlaWdodCxcbiAgICAgIHJlc29sdXRpb24sXG4gICAgICBhbnRpYWxpYXNcbiAgICB9KTtcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSBNYXRyaXguc2hhcmVkLnRyYW5zbGF0ZSgtcmVnaW9uLngsIC1yZWdpb24ueSk7XG4gICAgdGhpcy5fcmVuZGVyZXIucmVuZGVyKHtcbiAgICAgIGNvbnRhaW5lcixcbiAgICAgIHRyYW5zZm9ybSxcbiAgICAgIHRhcmdldCxcbiAgICAgIGNsZWFyQ29sb3JcbiAgICB9KTtcbiAgICB0YXJnZXQuc291cmNlLnVwZGF0ZU1pcG1hcHMoKTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSBudWxsO1xuICB9XG59XG4vKiogQGlnbm9yZSAqL1xuR2VuZXJhdGVUZXh0dXJlU3lzdGVtLmV4dGVuc2lvbiA9IHtcbiAgdHlwZTogW1xuICAgIEV4dGVuc2lvblR5cGUuV2ViR0xTeXN0ZW0sXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHUFVTeXN0ZW1cbiAgXSxcbiAgbmFtZTogXCJ0ZXh0dXJlR2VuZXJhdG9yXCJcbn07XG5cbmV4cG9ydCB7IEdlbmVyYXRlVGV4dHVyZVN5c3RlbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VuZXJhdGVUZXh0dXJlU3lzdGVtLm1qcy5tYXBcbiIsImltcG9ydCB7IEV4dGVuc2lvblR5cGUgfSBmcm9tICcuLi8uLi8uLi8uLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IE1hdHJpeCB9IGZyb20gJy4uLy4uLy4uLy4uL21hdGhzL21hdHJpeC9NYXRyaXgubWpzJztcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vLi4vLi4vLi4vbWF0aHMvcG9pbnQvUG9pbnQubWpzJztcbmltcG9ydCB7IGNvbG9yMzJCaXRUb1VuaWZvcm0gfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZS9ncmFwaGljcy9ncHUvY29sb3JUb1VuaWZvcm0ubWpzJztcbmltcG9ydCB7IEJpbmRHcm91cCB9IGZyb20gJy4uLy4uL2dwdS9zaGFkZXIvQmluZEdyb3VwLm1qcyc7XG5pbXBvcnQgeyBSZW5kZXJlclR5cGUgfSBmcm9tICcuLi8uLi90eXBlcy5tanMnO1xuaW1wb3J0IHsgVW5pZm9ybUdyb3VwIH0gZnJvbSAnLi4vc2hhZGVyL1VuaWZvcm1Hcm91cC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIEdsb2JhbFVuaWZvcm1TeXN0ZW0ge1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlcikge1xuICAgIHRoaXMuX3N0YWNrSW5kZXggPSAwO1xuICAgIHRoaXMuX2dsb2JhbFVuaWZvcm1EYXRhU3RhY2sgPSBbXTtcbiAgICB0aGlzLl91bmlmb3Jtc1Bvb2wgPSBbXTtcbiAgICB0aGlzLl9hY3RpdmVVbmlmb3JtcyA9IFtdO1xuICAgIHRoaXMuX2JpbmRHcm91cFBvb2wgPSBbXTtcbiAgICB0aGlzLl9hY3RpdmVCaW5kR3JvdXBzID0gW107XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgfVxuICByZXNldCgpIHtcbiAgICB0aGlzLl9zdGFja0luZGV4ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2FjdGl2ZVVuaWZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLl91bmlmb3Jtc1Bvb2wucHVzaCh0aGlzLl9hY3RpdmVVbmlmb3Jtc1tpXSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fYWN0aXZlQmluZEdyb3Vwcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5fYmluZEdyb3VwUG9vbC5wdXNoKHRoaXMuX2FjdGl2ZUJpbmRHcm91cHNbaV0pO1xuICAgIH1cbiAgICB0aGlzLl9hY3RpdmVVbmlmb3Jtcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuX2FjdGl2ZUJpbmRHcm91cHMubGVuZ3RoID0gMDtcbiAgfVxuICBzdGFydChvcHRpb25zKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMucHVzaChvcHRpb25zKTtcbiAgfVxuICBiaW5kKHtcbiAgICBzaXplLFxuICAgIHByb2plY3Rpb25NYXRyaXgsXG4gICAgd29ybGRUcmFuc2Zvcm1NYXRyaXgsXG4gICAgd29ybGRDb2xvcixcbiAgICBvZmZzZXRcbiAgfSkge1xuICAgIGNvbnN0IHJlbmRlclRhcmdldCA9IHRoaXMuX3JlbmRlcmVyLnJlbmRlclRhcmdldC5yZW5kZXJUYXJnZXQ7XG4gICAgY29uc3QgY3VycmVudEdsb2JhbFVuaWZvcm1EYXRhID0gdGhpcy5fc3RhY2tJbmRleCA/IHRoaXMuX2dsb2JhbFVuaWZvcm1EYXRhU3RhY2tbdGhpcy5fc3RhY2tJbmRleCAtIDFdIDoge1xuICAgICAgcHJvamVjdGlvbkRhdGE6IHJlbmRlclRhcmdldCxcbiAgICAgIHdvcmxkVHJhbnNmb3JtTWF0cml4OiBuZXcgTWF0cml4KCksXG4gICAgICB3b3JsZENvbG9yOiA0Mjk0OTY3Mjk1LFxuICAgICAgb2Zmc2V0OiBuZXcgUG9pbnQoKVxuICAgIH07XG4gICAgY29uc3QgZ2xvYmFsVW5pZm9ybURhdGEgPSB7XG4gICAgICBwcm9qZWN0aW9uTWF0cml4OiBwcm9qZWN0aW9uTWF0cml4IHx8IHRoaXMuX3JlbmRlcmVyLnJlbmRlclRhcmdldC5wcm9qZWN0aW9uTWF0cml4LFxuICAgICAgcmVzb2x1dGlvbjogc2l6ZSB8fCByZW5kZXJUYXJnZXQuc2l6ZSxcbiAgICAgIHdvcmxkVHJhbnNmb3JtTWF0cml4OiB3b3JsZFRyYW5zZm9ybU1hdHJpeCB8fCBjdXJyZW50R2xvYmFsVW5pZm9ybURhdGEud29ybGRUcmFuc2Zvcm1NYXRyaXgsXG4gICAgICB3b3JsZENvbG9yOiB3b3JsZENvbG9yIHx8IGN1cnJlbnRHbG9iYWxVbmlmb3JtRGF0YS53b3JsZENvbG9yLFxuICAgICAgb2Zmc2V0OiBvZmZzZXQgfHwgY3VycmVudEdsb2JhbFVuaWZvcm1EYXRhLm9mZnNldCxcbiAgICAgIGJpbmRHcm91cDogbnVsbFxuICAgIH07XG4gICAgY29uc3QgdW5pZm9ybUdyb3VwID0gdGhpcy5fdW5pZm9ybXNQb29sLnBvcCgpIHx8IHRoaXMuX2NyZWF0ZVVuaWZvcm1zKCk7XG4gICAgdGhpcy5fYWN0aXZlVW5pZm9ybXMucHVzaCh1bmlmb3JtR3JvdXApO1xuICAgIGNvbnN0IHVuaWZvcm1zID0gdW5pZm9ybUdyb3VwLnVuaWZvcm1zO1xuICAgIHVuaWZvcm1zLnVQcm9qZWN0aW9uTWF0cml4ID0gZ2xvYmFsVW5pZm9ybURhdGEucHJvamVjdGlvbk1hdHJpeDtcbiAgICB1bmlmb3Jtcy51UmVzb2x1dGlvbiA9IGdsb2JhbFVuaWZvcm1EYXRhLnJlc29sdXRpb247XG4gICAgdW5pZm9ybXMudVdvcmxkVHJhbnNmb3JtTWF0cml4LmNvcHlGcm9tKGdsb2JhbFVuaWZvcm1EYXRhLndvcmxkVHJhbnNmb3JtTWF0cml4KTtcbiAgICB1bmlmb3Jtcy51V29ybGRUcmFuc2Zvcm1NYXRyaXgudHggLT0gZ2xvYmFsVW5pZm9ybURhdGEub2Zmc2V0Lng7XG4gICAgdW5pZm9ybXMudVdvcmxkVHJhbnNmb3JtTWF0cml4LnR5IC09IGdsb2JhbFVuaWZvcm1EYXRhLm9mZnNldC55O1xuICAgIGNvbG9yMzJCaXRUb1VuaWZvcm0oXG4gICAgICBnbG9iYWxVbmlmb3JtRGF0YS53b3JsZENvbG9yLFxuICAgICAgdW5pZm9ybXMudVdvcmxkQ29sb3JBbHBoYSxcbiAgICAgIDBcbiAgICApO1xuICAgIHVuaWZvcm1Hcm91cC51cGRhdGUoKTtcbiAgICBsZXQgYmluZEdyb3VwO1xuICAgIGlmICh0aGlzLl9yZW5kZXJlci5yZW5kZXJQaXBlcy51bmlmb3JtQmF0Y2gpIHtcbiAgICAgIGJpbmRHcm91cCA9IHRoaXMuX3JlbmRlcmVyLnJlbmRlclBpcGVzLnVuaWZvcm1CYXRjaC5nZXRVbmlmb3JtQmluZEdyb3VwKHVuaWZvcm1Hcm91cCwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBiaW5kR3JvdXAgPSB0aGlzLl9iaW5kR3JvdXBQb29sLnBvcCgpIHx8IG5ldyBCaW5kR3JvdXAoKTtcbiAgICAgIHRoaXMuX2FjdGl2ZUJpbmRHcm91cHMucHVzaChiaW5kR3JvdXApO1xuICAgICAgYmluZEdyb3VwLnNldFJlc291cmNlKHVuaWZvcm1Hcm91cCwgMCk7XG4gICAgfVxuICAgIGdsb2JhbFVuaWZvcm1EYXRhLmJpbmRHcm91cCA9IGJpbmRHcm91cDtcbiAgICB0aGlzLl9jdXJyZW50R2xvYmFsVW5pZm9ybURhdGEgPSBnbG9iYWxVbmlmb3JtRGF0YTtcbiAgfVxuICBwdXNoKG9wdGlvbnMpIHtcbiAgICB0aGlzLmJpbmQob3B0aW9ucyk7XG4gICAgdGhpcy5fZ2xvYmFsVW5pZm9ybURhdGFTdGFja1t0aGlzLl9zdGFja0luZGV4KytdID0gdGhpcy5fY3VycmVudEdsb2JhbFVuaWZvcm1EYXRhO1xuICB9XG4gIHBvcCgpIHtcbiAgICB0aGlzLl9jdXJyZW50R2xvYmFsVW5pZm9ybURhdGEgPSB0aGlzLl9nbG9iYWxVbmlmb3JtRGF0YVN0YWNrWy0tdGhpcy5fc3RhY2tJbmRleCAtIDFdO1xuICAgIGlmICh0aGlzLl9yZW5kZXJlci50eXBlID09PSBSZW5kZXJlclR5cGUuV0VCR0wpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRHbG9iYWxVbmlmb3JtRGF0YS5iaW5kR3JvdXAucmVzb3VyY2VzWzBdLnVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBnZXQgYmluZEdyb3VwKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50R2xvYmFsVW5pZm9ybURhdGEuYmluZEdyb3VwO1xuICB9XG4gIGdldCB1bmlmb3JtR3JvdXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRHbG9iYWxVbmlmb3JtRGF0YS5iaW5kR3JvdXAucmVzb3VyY2VzWzBdO1xuICB9XG4gIF9jcmVhdGVVbmlmb3JtcygpIHtcbiAgICBjb25zdCBnbG9iYWxVbmlmb3JtcyA9IG5ldyBVbmlmb3JtR3JvdXAoe1xuICAgICAgdVByb2plY3Rpb25NYXRyaXg6IHsgdmFsdWU6IG5ldyBNYXRyaXgoKSwgdHlwZTogXCJtYXQzeDM8ZjMyPlwiIH0sXG4gICAgICB1V29ybGRUcmFuc2Zvcm1NYXRyaXg6IHsgdmFsdWU6IG5ldyBNYXRyaXgoKSwgdHlwZTogXCJtYXQzeDM8ZjMyPlwiIH0sXG4gICAgICAvLyBUT0RPIC0gc29tZW9uZSBzbWFydCAtIHNldCB0aGlzIHRvIGJlIGEgdW5vcm04eDQgcmF0aGVyIHRoYW4gYSB2ZWM0PGYzMj5cbiAgICAgIHVXb3JsZENvbG9yQWxwaGE6IHsgdmFsdWU6IG5ldyBGbG9hdDMyQXJyYXkoNCksIHR5cGU6IFwidmVjNDxmMzI+XCIgfSxcbiAgICAgIHVSZXNvbHV0aW9uOiB7IHZhbHVlOiBbMCwgMF0sIHR5cGU6IFwidmVjMjxmMzI+XCIgfVxuICAgIH0sIHtcbiAgICAgIGlzU3RhdGljOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIGdsb2JhbFVuaWZvcm1zO1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSBudWxsO1xuICB9XG59XG4vKiogQGlnbm9yZSAqL1xuR2xvYmFsVW5pZm9ybVN5c3RlbS5leHRlbnNpb24gPSB7XG4gIHR5cGU6IFtcbiAgICBFeHRlbnNpb25UeXBlLldlYkdMU3lzdGVtLFxuICAgIEV4dGVuc2lvblR5cGUuV2ViR1BVU3lzdGVtLFxuICAgIEV4dGVuc2lvblR5cGUuQ2FudmFzU3lzdGVtXG4gIF0sXG4gIG5hbWU6IFwiZ2xvYmFsVW5pZm9ybXNcIlxufTtcblxuZXhwb3J0IHsgR2xvYmFsVW5pZm9ybVN5c3RlbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2xvYmFsVW5pZm9ybVN5c3RlbS5tanMubWFwXG4iLCJpbXBvcnQgeyBFeHRlbnNpb25UeXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5pbXBvcnQgeyBzYXlIZWxsbyB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3NheUhlbGxvLm1qcyc7XG5pbXBvcnQgeyBSZW5kZXJlclR5cGUgfSBmcm9tICcuLi8uLi90eXBlcy5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIEhlbGxvU3lzdGVtIHtcbiAgY29uc3RydWN0b3IocmVuZGVyZXIpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICB9XG4gIC8qKlxuICAgKiBJdCBhbGwgc3RhcnRzIGhlcmUhIFRoaXMgaW5pdGlhdGVzIGV2ZXJ5IHN5c3RlbSwgcGFzc2luZyBpbiB0aGUgb3B0aW9ucyBmb3IgYW55IHN5c3RlbSBieSBuYW1lLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIHRoZSBjb25maWcgZm9yIHRoZSByZW5kZXJlciBhbmQgYWxsIGl0cyBzeXN0ZW1zXG4gICAqL1xuICBpbml0KG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5oZWxsbykge1xuICAgICAgbGV0IG5hbWUgPSB0aGlzLl9yZW5kZXJlci5uYW1lO1xuICAgICAgaWYgKHRoaXMuX3JlbmRlcmVyLnR5cGUgPT09IFJlbmRlcmVyVHlwZS5XRUJHTCkge1xuICAgICAgICBuYW1lICs9IGAgJHt0aGlzLl9yZW5kZXJlci5jb250ZXh0LndlYkdMVmVyc2lvbn1gO1xuICAgICAgfVxuICAgICAgc2F5SGVsbG8obmFtZSk7XG4gICAgfVxuICB9XG59XG4vKiogQGlnbm9yZSAqL1xuSGVsbG9TeXN0ZW0uZXh0ZW5zaW9uID0ge1xuICB0eXBlOiBbXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHTFN5c3RlbSxcbiAgICBFeHRlbnNpb25UeXBlLldlYkdQVVN5c3RlbSxcbiAgICBFeHRlbnNpb25UeXBlLkNhbnZhc1N5c3RlbVxuICBdLFxuICBuYW1lOiBcImhlbGxvXCIsXG4gIHByaW9yaXR5OiAtMlxufTtcbi8qKiBUaGUgZGVmYXVsdCBvcHRpb25zIGZvciB0aGUgc3lzdGVtLiAqL1xuSGVsbG9TeXN0ZW0uZGVmYXVsdE9wdGlvbnMgPSB7XG4gIC8qKiB7QGxpbmsgV2ViR0xPcHRpb25zLmhlbGxvfSAqL1xuICBoZWxsbzogZmFsc2Vcbn07XG5cbmV4cG9ydCB7IEhlbGxvU3lzdGVtIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1IZWxsb1N5c3RlbS5tanMubWFwXG4iLCJpbXBvcnQgeyBFeHRlbnNpb25UeXBlLCBleHRlbnNpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgX1RleHR1cmVHQ1N5c3RlbSA9IGNsYXNzIF9UZXh0dXJlR0NTeXN0ZW0ge1xuICAvKiogQHBhcmFtIHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIHRoaXMgU3lzdGVtIHdvcmtzIGZvci4gKi9cbiAgY29uc3RydWN0b3IocmVuZGVyZXIpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuY291bnQgPSAwO1xuICAgIHRoaXMuY2hlY2tDb3VudCA9IDA7XG4gIH1cbiAgaW5pdChvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHsgLi4uX1RleHR1cmVHQ1N5c3RlbS5kZWZhdWx0T3B0aW9ucywgLi4ub3B0aW9ucyB9O1xuICAgIHRoaXMuY2hlY2tDb3VudE1heCA9IG9wdGlvbnMudGV4dHVyZUdDQ2hlY2tDb3VudE1heDtcbiAgICB0aGlzLm1heElkbGUgPSBvcHRpb25zLnRleHR1cmVHQ0FNYXhJZGxlO1xuICAgIHRoaXMuYWN0aXZlID0gb3B0aW9ucy50ZXh0dXJlR0NBY3RpdmU7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyB0byBzZWUgd2hlbiB0aGUgbGFzdCB0aW1lIGEgdGV4dHVyZSB3YXMgdXNlZC5cbiAgICogSWYgdGhlIHRleHR1cmUgaGFzIG5vdCBiZWVuIHVzZWQgZm9yIGEgc3BlY2lmaWVkIGFtb3VudCBvZiB0aW1lLCBpdCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgR1BVLlxuICAgKi9cbiAgcG9zdHJlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMuX3JlbmRlcmVyLnJlbmRlcmluZ1RvU2NyZWVuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY291bnQrKztcbiAgICBpZiAoIXRoaXMuYWN0aXZlKVxuICAgICAgcmV0dXJuO1xuICAgIHRoaXMuY2hlY2tDb3VudCsrO1xuICAgIGlmICh0aGlzLmNoZWNrQ291bnQgPiB0aGlzLmNoZWNrQ291bnRNYXgpIHtcbiAgICAgIHRoaXMuY2hlY2tDb3VudCA9IDA7XG4gICAgICB0aGlzLnJ1bigpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2hlY2tzIHRvIHNlZSB3aGVuIHRoZSBsYXN0IHRpbWUgYSB0ZXh0dXJlIHdhcyB1c2VkLlxuICAgKiBJZiB0aGUgdGV4dHVyZSBoYXMgbm90IGJlZW4gdXNlZCBmb3IgYSBzcGVjaWZpZWQgYW1vdW50IG9mIHRpbWUsIGl0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBHUFUuXG4gICAqL1xuICBydW4oKSB7XG4gICAgY29uc3QgbWFuYWdlZFRleHR1cmVzID0gdGhpcy5fcmVuZGVyZXIudGV4dHVyZS5tYW5hZ2VkVGV4dHVyZXM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYW5hZ2VkVGV4dHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHRleHR1cmUgPSBtYW5hZ2VkVGV4dHVyZXNbaV07XG4gICAgICBpZiAodGV4dHVyZS5hdXRvR2FyYmFnZUNvbGxlY3QgJiYgdGV4dHVyZS5yZXNvdXJjZSAmJiB0ZXh0dXJlLl90b3VjaGVkID4gLTEgJiYgdGhpcy5jb3VudCAtIHRleHR1cmUuX3RvdWNoZWQgPiB0aGlzLm1heElkbGUpIHtcbiAgICAgICAgdGV4dHVyZS5fdG91Y2hlZCA9IC0xO1xuICAgICAgICB0ZXh0dXJlLnVubG9hZCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gbnVsbDtcbiAgfVxufTtcbi8qKiBAaWdub3JlICovXG5fVGV4dHVyZUdDU3lzdGVtLmV4dGVuc2lvbiA9IHtcbiAgdHlwZTogW1xuICAgIEV4dGVuc2lvblR5cGUuV2ViR0xTeXN0ZW0sXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHUFVTeXN0ZW1cbiAgXSxcbiAgbmFtZTogXCJ0ZXh0dXJlR0NcIlxufTtcbi8qKiBkZWZhdWx0IG9wdGlvbnMgZm9yIHRoZSBUZXh0dXJlR0NTeXN0ZW0gKi9cbl9UZXh0dXJlR0NTeXN0ZW0uZGVmYXVsdE9wdGlvbnMgPSB7XG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhpcyB3aWxsIGVuYWJsZSB0aGUgZ2FyYmFnZSBjb2xsZWN0b3Igb24gdGhlIEdQVS5cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgdGV4dHVyZUdDQWN0aXZlOiB0cnVlLFxuICAvKipcbiAgICogVGhlIG1heGltdW0gaWRsZSBmcmFtZXMgYmVmb3JlIGEgdGV4dHVyZSBpcyBkZXN0cm95ZWQgYnkgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICAgKiBAZGVmYXVsdCA2MCAqIDYwXG4gICAqL1xuICB0ZXh0dXJlR0NBTWF4SWRsZTogNjAgKiA2MCxcbiAgLyoqXG4gICAqIEZyYW1lcyBiZXR3ZWVuIHR3byBnYXJiYWdlIGNvbGxlY3Rpb25zLlxuICAgKiBAZGVmYXVsdCA2MDBcbiAgICovXG4gIHRleHR1cmVHQ0NoZWNrQ291bnRNYXg6IDYwMFxufTtcbmxldCBUZXh0dXJlR0NTeXN0ZW0gPSBfVGV4dHVyZUdDU3lzdGVtO1xuZXh0ZW5zaW9ucy5hZGQoVGV4dHVyZUdDU3lzdGVtKTtcblxuZXhwb3J0IHsgVGV4dHVyZUdDU3lzdGVtIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UZXh0dXJlR0NTeXN0ZW0ubWpzLm1hcFxuIiwiaW1wb3J0IHsgRE9NQWRhcHRlciB9IGZyb20gJy4uLy4uLy4uLy4uL2Vudmlyb25tZW50L2FkYXB0ZXIubWpzJztcbmltcG9ydCB7IEV4dGVuc2lvblR5cGUgfSBmcm9tICcuLi8uLi8uLi8uLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gJy4uLy4uLy4uLy4uL21hdGhzL3NoYXBlcy9SZWN0YW5nbGUubWpzJztcbmltcG9ydCB7IGRlcHJlY2F0aW9uLCB2OF8wXzAgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy9sb2dnaW5nL2RlcHJlY2F0aW9uLm1qcyc7XG5pbXBvcnQgeyBSZW5kZXJUYXJnZXQgfSBmcm9tICcuLi9yZW5kZXJUYXJnZXQvUmVuZGVyVGFyZ2V0Lm1qcyc7XG5pbXBvcnQgeyBnZXRDYW52YXNUZXh0dXJlIH0gZnJvbSAnLi4vdGV4dHVyZS91dGlscy9nZXRDYW52YXNUZXh0dXJlLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgX1ZpZXdTeXN0ZW0gPSBjbGFzcyBfVmlld1N5c3RlbSB7XG4gIC8qKiBUaGUgcmVzb2x1dGlvbiAvIGRldmljZSBwaXhlbCByYXRpbyBvZiB0aGUgcmVuZGVyZXIuICovXG4gIGdldCByZXNvbHV0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRleHR1cmUuc291cmNlLl9yZXNvbHV0aW9uO1xuICB9XG4gIHNldCByZXNvbHV0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy50ZXh0dXJlLnNvdXJjZS5yZXNpemUoXG4gICAgICB0aGlzLnRleHR1cmUuc291cmNlLndpZHRoLFxuICAgICAgdGhpcy50ZXh0dXJlLnNvdXJjZS5oZWlnaHQsXG4gICAgICB2YWx1ZVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIGluaXRpYXRlcyB0aGUgdmlldyBzeXN0ZW1cbiAgICogQHBhcmFtIG9wdGlvbnMgLSB0aGUgb3B0aW9ucyBmb3IgdGhlIHZpZXdcbiAgICovXG4gIGluaXQob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7XG4gICAgICAuLi5fVmlld1N5c3RlbS5kZWZhdWx0T3B0aW9ucyxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuICAgIGlmIChvcHRpb25zLnZpZXcpIHtcbiAgICAgIGRlcHJlY2F0aW9uKHY4XzBfMCwgXCJWaWV3U3lzdGVtLnZpZXcgaGFzIGJlZW4gcmVuYW1lZCB0byBWaWV3U3lzdGVtLmNhbnZhc1wiKTtcbiAgICAgIG9wdGlvbnMuY2FudmFzID0gb3B0aW9ucy52aWV3O1xuICAgIH1cbiAgICB0aGlzLnNjcmVlbiA9IG5ldyBSZWN0YW5nbGUoMCwgMCwgb3B0aW9ucy53aWR0aCwgb3B0aW9ucy5oZWlnaHQpO1xuICAgIHRoaXMuY2FudmFzID0gb3B0aW9ucy5jYW52YXMgfHwgRE9NQWRhcHRlci5nZXQoKS5jcmVhdGVDYW52YXMoKTtcbiAgICB0aGlzLmFudGlhbGlhcyA9ICEhb3B0aW9ucy5hbnRpYWxpYXM7XG4gICAgdGhpcy50ZXh0dXJlID0gZ2V0Q2FudmFzVGV4dHVyZSh0aGlzLmNhbnZhcywgb3B0aW9ucyk7XG4gICAgdGhpcy5yZW5kZXJUYXJnZXQgPSBuZXcgUmVuZGVyVGFyZ2V0KHtcbiAgICAgIGNvbG9yVGV4dHVyZXM6IFt0aGlzLnRleHR1cmVdLFxuICAgICAgZGVwdGg6ICEhb3B0aW9ucy5kZXB0aCxcbiAgICAgIGlzUm9vdDogdHJ1ZVxuICAgIH0pO1xuICAgIHRoaXMudGV4dHVyZS5zb3VyY2UudHJhbnNwYXJlbnQgPSBvcHRpb25zLmJhY2tncm91bmRBbHBoYSA8IDE7XG4gICAgdGhpcy5tdWx0aVZpZXcgPSAhIW9wdGlvbnMubXVsdGlWaWV3O1xuICAgIGlmICh0aGlzLmF1dG9EZW5zaXR5KSB7XG4gICAgICB0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9IGAke3RoaXMudGV4dHVyZS53aWR0aH1weGA7XG4gICAgICB0aGlzLmNhbnZhcy5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLnRleHR1cmUuaGVpZ2h0fXB4YDtcbiAgICB9XG4gICAgdGhpcy5yZXNvbHV0aW9uID0gb3B0aW9ucy5yZXNvbHV0aW9uO1xuICB9XG4gIC8qKlxuICAgKiBSZXNpemVzIHRoZSBzY3JlZW4gYW5kIGNhbnZhcyB0byB0aGUgc3BlY2lmaWVkIGRpbWVuc2lvbnMuXG4gICAqIEBwYXJhbSBkZXNpcmVkU2NyZWVuV2lkdGggLSBUaGUgbmV3IHdpZHRoIG9mIHRoZSBzY3JlZW4uXG4gICAqIEBwYXJhbSBkZXNpcmVkU2NyZWVuSGVpZ2h0IC0gVGhlIG5ldyBoZWlnaHQgb2YgdGhlIHNjcmVlbi5cbiAgICogQHBhcmFtIHJlc29sdXRpb25cbiAgICovXG4gIHJlc2l6ZShkZXNpcmVkU2NyZWVuV2lkdGgsIGRlc2lyZWRTY3JlZW5IZWlnaHQsIHJlc29sdXRpb24pIHtcbiAgICB0aGlzLnRleHR1cmUuc291cmNlLnJlc2l6ZShkZXNpcmVkU2NyZWVuV2lkdGgsIGRlc2lyZWRTY3JlZW5IZWlnaHQsIHJlc29sdXRpb24pO1xuICAgIHRoaXMuc2NyZWVuLndpZHRoID0gdGhpcy50ZXh0dXJlLmZyYW1lLndpZHRoO1xuICAgIHRoaXMuc2NyZWVuLmhlaWdodCA9IHRoaXMudGV4dHVyZS5mcmFtZS5oZWlnaHQ7XG4gICAgaWYgKHRoaXMuYXV0b0RlbnNpdHkpIHtcbiAgICAgIHRoaXMuY2FudmFzLnN0eWxlLndpZHRoID0gYCR7ZGVzaXJlZFNjcmVlbldpZHRofXB4YDtcbiAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke2Rlc2lyZWRTY3JlZW5IZWlnaHR9cHhgO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRGVzdHJveXMgdGhpcyBTeXN0ZW0gYW5kIG9wdGlvbmFsbHkgcmVtb3ZlcyB0aGUgY2FudmFzIGZyb20gdGhlIGRvbS5cbiAgICogQHBhcmFtIHtvcHRpb25zIHwgZmFsc2V9IG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgZGVzdHJveWluZyB0aGUgdmlldywgb3IgXCJmYWxzZVwiLlxuICAgKiBAcGFyYW0gb3B0aW9ucy5yZW1vdmVWaWV3IC0gV2hldGhlciB0byByZW1vdmUgdGhlIHZpZXcgZWxlbWVudCBmcm9tIHRoZSBET00uIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gICAqL1xuICBkZXN0cm95KG9wdGlvbnMgPSBmYWxzZSkge1xuICAgIGNvbnN0IHJlbW92ZVZpZXcgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJib29sZWFuXCIgPyBvcHRpb25zIDogISFvcHRpb25zPy5yZW1vdmVWaWV3O1xuICAgIGlmIChyZW1vdmVWaWV3ICYmIHRoaXMuY2FudmFzLnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMuY2FudmFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5jYW52YXMpO1xuICAgIH1cbiAgfVxufTtcbi8qKiBAaWdub3JlICovXG5fVmlld1N5c3RlbS5leHRlbnNpb24gPSB7XG4gIHR5cGU6IFtcbiAgICBFeHRlbnNpb25UeXBlLldlYkdMU3lzdGVtLFxuICAgIEV4dGVuc2lvblR5cGUuV2ViR1BVU3lzdGVtLFxuICAgIEV4dGVuc2lvblR5cGUuQ2FudmFzU3lzdGVtXG4gIF0sXG4gIG5hbWU6IFwidmlld1wiLFxuICBwcmlvcml0eTogMFxufTtcbi8qKiBUaGUgZGVmYXVsdCBvcHRpb25zIGZvciB0aGUgdmlldyBzeXN0ZW0uICovXG5fVmlld1N5c3RlbS5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgLyoqXG4gICAqIHtAbGluayBXZWJHTE9wdGlvbnMud2lkdGh9XG4gICAqIEBkZWZhdWx0IDgwMFxuICAgKi9cbiAgd2lkdGg6IDgwMCxcbiAgLyoqXG4gICAqIHtAbGluayBXZWJHTE9wdGlvbnMuaGVpZ2h0fVxuICAgKiBAZGVmYXVsdCA2MDBcbiAgICovXG4gIGhlaWdodDogNjAwLFxuICAvKipcbiAgICoge0BsaW5rIFdlYkdMT3B0aW9ucy5hdXRvRGVuc2l0eX1cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGF1dG9EZW5zaXR5OiBmYWxzZSxcbiAgLyoqXG4gICAqIHtAbGluayBXZWJHTE9wdGlvbnMuYW50aWFsaWFzfVxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgYW50aWFsaWFzOiBmYWxzZVxufTtcbmxldCBWaWV3U3lzdGVtID0gX1ZpZXdTeXN0ZW07XG5cbmV4cG9ydCB7IFZpZXdTeXN0ZW0gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZXdTeXN0ZW0ubWpzLm1hcFxuIiwiaW1wb3J0IHsgQ3VzdG9tUmVuZGVyUGlwZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lL2NvbnRhaW5lci9DdXN0b21SZW5kZXJQaXBlLm1qcyc7XG5pbXBvcnQgeyBSZW5kZXJHcm91cFBpcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZS9jb250YWluZXIvUmVuZGVyR3JvdXBQaXBlLm1qcyc7XG5pbXBvcnQgeyBSZW5kZXJHcm91cFN5c3RlbSB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lL2NvbnRhaW5lci9SZW5kZXJHcm91cFN5c3RlbS5tanMnO1xuaW1wb3J0IHsgU3ByaXRlUGlwZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lL3Nwcml0ZS9TcHJpdGVQaXBlLm1qcyc7XG5pbXBvcnQgeyBSZW5kZXJlckluaXRIb29rIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvZ2xvYmFsL2dsb2JhbEhvb2tzLm1qcyc7XG5pbXBvcnQgeyBCYXRjaGVyUGlwZSB9IGZyb20gJy4uLy4uLy4uL2JhdGNoZXIvc2hhcmVkL0JhdGNoZXJQaXBlLm1qcyc7XG5pbXBvcnQgeyBBbHBoYU1hc2tQaXBlIH0gZnJvbSAnLi4vLi4vLi4vbWFzay9hbHBoYS9BbHBoYU1hc2tQaXBlLm1qcyc7XG5pbXBvcnQgeyBDb2xvck1hc2tQaXBlIH0gZnJvbSAnLi4vLi4vLi4vbWFzay9jb2xvci9Db2xvck1hc2tQaXBlLm1qcyc7XG5pbXBvcnQgeyBTdGVuY2lsTWFza1BpcGUgfSBmcm9tICcuLi8uLi8uLi9tYXNrL3N0ZW5jaWwvU3RlbmNpbE1hc2tQaXBlLm1qcyc7XG5pbXBvcnQgeyBCYWNrZ3JvdW5kU3lzdGVtIH0gZnJvbSAnLi4vYmFja2dyb3VuZC9CYWNrZ3JvdW5kU3lzdGVtLm1qcyc7XG5pbXBvcnQgeyBCbGVuZE1vZGVQaXBlIH0gZnJvbSAnLi4vYmxlbmRNb2Rlcy9CbGVuZE1vZGVQaXBlLm1qcyc7XG5pbXBvcnQgeyBFeHRyYWN0U3lzdGVtIH0gZnJvbSAnLi4vZXh0cmFjdC9FeHRyYWN0U3lzdGVtLm1qcyc7XG5pbXBvcnQgeyBHZW5lcmF0ZVRleHR1cmVTeXN0ZW0gfSBmcm9tICcuLi9leHRyYWN0L0dlbmVyYXRlVGV4dHVyZVN5c3RlbS5tanMnO1xuaW1wb3J0IHsgR2xvYmFsVW5pZm9ybVN5c3RlbSB9IGZyb20gJy4uL3JlbmRlclRhcmdldC9HbG9iYWxVbmlmb3JtU3lzdGVtLm1qcyc7XG5pbXBvcnQgeyBIZWxsb1N5c3RlbSB9IGZyb20gJy4uL3N0YXJ0dXAvSGVsbG9TeXN0ZW0ubWpzJztcbmltcG9ydCB7IFRleHR1cmVHQ1N5c3RlbSB9IGZyb20gJy4uL3RleHR1cmUvVGV4dHVyZUdDU3lzdGVtLm1qcyc7XG5pbXBvcnQgeyBWaWV3U3lzdGVtIH0gZnJvbSAnLi4vdmlldy9WaWV3U3lzdGVtLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgU2hhcmVkU3lzdGVtcyA9IFtcbiAgQmFja2dyb3VuZFN5c3RlbSxcbiAgR2xvYmFsVW5pZm9ybVN5c3RlbSxcbiAgSGVsbG9TeXN0ZW0sXG4gIFZpZXdTeXN0ZW0sXG4gIFJlbmRlckdyb3VwU3lzdGVtLFxuICBUZXh0dXJlR0NTeXN0ZW0sXG4gIEdlbmVyYXRlVGV4dHVyZVN5c3RlbSxcbiAgRXh0cmFjdFN5c3RlbSxcbiAgUmVuZGVyZXJJbml0SG9va1xuXTtcbmNvbnN0IFNoYXJlZFJlbmRlclBpcGVzID0gW1xuICBCbGVuZE1vZGVQaXBlLFxuICBCYXRjaGVyUGlwZSxcbiAgU3ByaXRlUGlwZSxcbiAgUmVuZGVyR3JvdXBQaXBlLFxuICBBbHBoYU1hc2tQaXBlLFxuICBTdGVuY2lsTWFza1BpcGUsXG4gIENvbG9yTWFza1BpcGUsXG4gIEN1c3RvbVJlbmRlclBpcGVcbl07XG5cbmV4cG9ydCB7IFNoYXJlZFJlbmRlclBpcGVzLCBTaGFyZWRTeXN0ZW1zIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TaGFyZWRTeXN0ZW1zLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6338\n')},1604:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   t: () => (/* binding */ getCanvasTexture)\n/* harmony export */ });\n/* unused harmony export hasCachedCanvasTexture */\n/* harmony import */ var _sources_CanvasSource_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6914);\n/* harmony import */ var _Texture_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9853);\n\n\n\n"use strict";\nconst canvasCache = /* @__PURE__ */ new Map();\nfunction getCanvasTexture(canvas, options) {\n  if (!canvasCache.has(canvas)) {\n    const texture = new _Texture_mjs__WEBPACK_IMPORTED_MODULE_0__/* .Texture */ .x({\n      source: new _sources_CanvasSource_mjs__WEBPACK_IMPORTED_MODULE_1__/* .CanvasSource */ .D({\n        resource: canvas,\n        ...options\n      })\n    });\n    const onDestroy = () => {\n      if (canvasCache.get(canvas) === texture) {\n        canvasCache.delete(canvas);\n      }\n    };\n    texture.once("destroy", onDestroy);\n    texture.source.once("destroy", onDestroy);\n    canvasCache.set(canvas, texture);\n  }\n  return canvasCache.get(canvas);\n}\nfunction hasCachedCanvasTexture(canvas) {\n  return canvasCache.has(canvas);\n}\n\n\n//# sourceMappingURL=getCanvasTexture.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYwNC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkQ7QUFDbEI7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBEQUFPO0FBQy9CLGtCQUFrQiw0RUFBWTtBQUM5QjtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVvRDtBQUNwRCIsInNvdXJjZXMiOlsid2VicGFjazovL0BtYXNhdG9tYWtpbm8vcGl4aWpzLXBhcnRpY2xlLXdheXBvaW50Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3JlbmRlcmluZy9yZW5kZXJlcnMvc2hhcmVkL3RleHR1cmUvdXRpbHMvZ2V0Q2FudmFzVGV4dHVyZS5tanM/NGEyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYW52YXNTb3VyY2UgfSBmcm9tICcuLi9zb3VyY2VzL0NhbnZhc1NvdXJjZS5tanMnO1xuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJy4uL1RleHR1cmUubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBjYW52YXNDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5mdW5jdGlvbiBnZXRDYW52YXNUZXh0dXJlKGNhbnZhcywgb3B0aW9ucykge1xuICBpZiAoIWNhbnZhc0NhY2hlLmhhcyhjYW52YXMpKSB7XG4gICAgY29uc3QgdGV4dHVyZSA9IG5ldyBUZXh0dXJlKHtcbiAgICAgIHNvdXJjZTogbmV3IENhbnZhc1NvdXJjZSh7XG4gICAgICAgIHJlc291cmNlOiBjYW52YXMsXG4gICAgICAgIC4uLm9wdGlvbnNcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgY29uc3Qgb25EZXN0cm95ID0gKCkgPT4ge1xuICAgICAgaWYgKGNhbnZhc0NhY2hlLmdldChjYW52YXMpID09PSB0ZXh0dXJlKSB7XG4gICAgICAgIGNhbnZhc0NhY2hlLmRlbGV0ZShjYW52YXMpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGV4dHVyZS5vbmNlKFwiZGVzdHJveVwiLCBvbkRlc3Ryb3kpO1xuICAgIHRleHR1cmUuc291cmNlLm9uY2UoXCJkZXN0cm95XCIsIG9uRGVzdHJveSk7XG4gICAgY2FudmFzQ2FjaGUuc2V0KGNhbnZhcywgdGV4dHVyZSk7XG4gIH1cbiAgcmV0dXJuIGNhbnZhc0NhY2hlLmdldChjYW52YXMpO1xufVxuZnVuY3Rpb24gaGFzQ2FjaGVkQ2FudmFzVGV4dHVyZShjYW52YXMpIHtcbiAgcmV0dXJuIGNhbnZhc0NhY2hlLmhhcyhjYW52YXMpO1xufVxuXG5leHBvcnQgeyBnZXRDYW52YXNUZXh0dXJlLCBoYXNDYWNoZWRDYW52YXNUZXh0dXJlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRDYW52YXNUZXh0dXJlLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1604\n')}}]);